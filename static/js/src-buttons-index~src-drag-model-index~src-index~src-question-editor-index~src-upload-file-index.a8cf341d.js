(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./src/Buttons/index.less":function(e,t,n){},"./src/QuestionEditor/editor/components/judgementAnswer.less":function(e,t,n){},"./src/index.tsx":function(e,t,n){"use strict";n.d(t,"d",(function(){return X})),n.d(t,"a",(function(){return ie})),n.d(t,"b",(function(){return re.a})),n.d(t,"c",(function(){return Oe}));var i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),r=(n("./node_modules/antd/es/message/style/index.js"),n("./node_modules/antd/es/message/index.js")),s=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),a=n.n(s),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),u=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),p=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),f=n("react"),m=n.n(f),b=n("./node_modules/cos-js-sdk-v5/index.js"),v=n.n(b),h=n("./node_modules/js-md5-file/index.js"),g=n.n(h),y=n("./node_modules/file-extension/file-extension.js"),O=n.n(y),x=n("./node_modules/umi-request/dist/index.es.js"),j=Object(x.a)({errorHandler:function(e){e.response;return e.data},timeout:1e4,credentials:"include"});j.interceptors.request.use((function(e,t){var n=t.token;if(n){var r={"Content-Type":"application/json",Accept:"application/json",userToken:n,Authorization:"Bearer "+n};return{url:e,options:Object(i.a)(Object(i.a)({},t),{},{headers:r})}}return{url:e,options:Object(i.a)({},t)}})),j.interceptors.response.use((function(e,t){var n=e.headers.get("userToken");return n&&localStorage.setItem("userToken",n),e}));var E=j;function F(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(a.a.mark((function e(t,n,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("".concat(n,"/ebook/api/admin/ebook/file?version=1.0"),{method:"POST",data:t,token:i}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t,n,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("".concat(n,"/ebook/api/admin/ebook/file?fileId=").concat(t.fileId,"&version=1.0"),{method:"PUT",data:{},token:i}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"undefined"!==typeof j&&j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"request",filename:"src\\uploadFile\\servers\\request.ts"}}),F&&F===Object(F)&&Object.isExtensible(F)&&Object.defineProperty(F,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"postSignatures",filename:"src\\uploadFile\\servers\\index.ts"}}),I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"updateFile",filename:"src\\uploadFile\\servers\\index.ts"}}),"undefined"!==typeof UploadInputbProps&&UploadInputbProps&&UploadInputbProps===Object(UploadInputbProps)&&Object.isExtensible(UploadInputbProps)&&Object.defineProperty(UploadInputbProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadInputbProps",filename:"src\\uploadFile\\uploadFile.tsx"}});var S=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).uniqueId="",s.inputFile=void 0,s.handleFiles=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i,r,o,u,c,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.state.fileList,i=s.props,r=i.maxSize,o=i.accept,u=i.fileNameLength,c=s.inputFile.files){e.next=5;break}return e.abrupt("return",!1);case 5:if(0!==(l=Array.from(c).filter((function(e){var t=e.name,n=e.size?e.size/1024/1024:0,i=t.substring(t.lastIndexOf(".")+1,t.length);if(-1===o.indexOf(i.toLowerCase())&&"*"!==o)return s.props.error("\u4e0d\u652f\u6301\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\uff01"),!1;if(!e)return!1;if(u&&e.name.length>u)return s.props.error("\u6587\u4ef6\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7".concat(u,"\u4e2a\u5b57\u7b26\uff01")),!1;if(n>r){var a=r>1024?"".concat(r/1024,"G"):"".concat(r,"M");return s.props.error("\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7".concat(a,"\uff01")),!1}return!0}))).length){e.next=9;break}return s.inputFile.value&&(s.inputFile.value=null),e.abrupt("return",!1);case 9:p=l.map((function(e,t){var n=String(Math.random()).replace(".",""),i=e.name,r=e.size?e.size:0,s=i.substring(i.lastIndexOf(".")+1,i.length);return{index:t,id:n,file:e,name:e.name,status:"ready",progress:0,uid:"",url:"",fileId:"",size:r,md5:"",fileName:i,createTime:(new Date).getTime(),extension:s,downloadUrl:"",previewUrl:""}})),s.setState({file:l,fileList:n.concat(p)},(function(){s.updateFileList(),setTimeout((function(){for(var e=0;e<l.length;e++){var t=l[e];s.sendFiles(t,p[e].id)}}),10)}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.sendFiles=function(e,t){s.uploadStatus(t,{progress:0,status:"ready"},(function(){s.sendFiles1(e,t)}))},s.sendFiles1=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var i,o,u,c,l,p,d,f,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=s.props,o=i.url,u=i.token,s.state.fileList,t.name){e.next=4;break}return e.abrupt("return",!1);case 4:return c=O()(t.name).toLowerCase(),e.next=7,s.getFileMd5(t);case 7:return l=e.sent,p={client:"R_Center",extension:c,fileName:t.name,genre:1,guid:null,md5:l,method:"put",provider:"tencent",size:t.size},e.prev=9,e.next=12,F(p,o,u);case 12:if(d=e.sent,console.log("UploadInput -> response",d),f=s.props.fileList.some((function(e){return e.id===n||e.fileId===d.fileId||e.id===d.fileId||e.md5===d.md5})),40100!==d.code){e.next=18;break}return s.props.error("\u767b\u5f55\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",401),e.abrupt("return",!1);case 18:d&&d.upload&&f?(s.uploadStatus(n,{progress:100,status:"uploading"}),s.inputFile.value&&(s.inputFile.value=null),s.state.fileList.some((function(e){return e.uid===d.fileId||e.fileId===d.fileId||e.md5===d.md5}))?f&&(s.props.error("\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u4e0d\u80fd\u91cd\u65b0\u4e0a\u4f20\uff01"),s.inputFile.value&&(s.inputFile.value=null),s.props.onCancelFile&&s.props.onCancelFile(n)):(r.a.success("".concat(t.name,"  \u6587\u4ef6\u4e0a\u4f20\u6210\u529f!")),setTimeout((function(){s.uploadStatus(n,{progress:100,uid:d.fileId,status:"done",name:t.name,url:d.path,fileId:d.fileId,md5:d.md5,downloadUrl:d.path,previewUrl:d.path})}),500))):f&&(m={signature:d.signature,bucket:d.bucket,region:d.region,path:d.path,id:d.fileId},s.sendCosFile(t,m,n)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(9),s.uploadStatus(n,{progress:0,status:"error"}),s.props.error("\u7f51\u7edc\u9519\u8bef,\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"),s.inputFile.value&&(s.inputFile.value=null);case 26:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t,n){return e.apply(this,arguments)}}(),s.sendCosFile=function(e,t,n){s.state.fileList;var i=s.props,u=i.url,c=i.token,p=Object(l.a)(s),d=new v.a({getAuthorization:function(e,n){n(t.signature)}});try{d.putObject({Bucket:t.bucket,Region:t.region,Key:t.path,Body:e,TaskReady:function(e){},onHashProgress:function(e){},onProgress:function(e){p.uploadStatus(n,{status:"uploading",progress:Math.round(100*e.percent)})}},function(){var i=Object(o.a)(a.a.mark((function i(s,o){var l,d;return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=p.props.fileList.some((function(e){return e.id===n})),s||200!==o.statusCode||!l){i.next=8;break}return i.next=4,I({fileId:"".concat(t.id),version:1},u,c);case 4:(d=i.sent)&&(p.inputFile.value=null,p.state.fileList.some((function(e){return e.uid===d.id||e.fileId===d.id}))?(p.props.error("\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u4e0d\u80fd\u91cd\u65b0\u4e0a\u4f20\uff01"),p.props.onCancelFile&&p.props.onCancelFile(n)):(r.a.success("".concat(e.name,"  \u6587\u4ef6\u4e0a\u4f20\u6210\u529f!")),p.uploadStatus(n,{progress:100,uid:d.id,name:d.fileName,status:"done",url:d.path,fileId:d.id,md5:d.md5,downloadUrl:d.path,previewUrl:d.path}))),i.next=9;break;case 8:l&&(p.uploadStatus(n,{progress:0,status:"error"}),p.props.error("".concat(e.name,"  \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25!")));case 9:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())}catch(f){s.props.error("\u7f51\u7edc\u9519\u8bef,\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"),s.inputFile.value&&(s.inputFile.value=null)}},s.uploadStatus=function(e,t,n){if(s.props.fileList.some((function(t){return t.id===e}))){var r=s.state.fileList.map((function(n){return n.id===e?Object(i.a)(Object(i.a)({},n),t):n}));s.setState({fileList:r},(function(){s.updateFileList(),n&&n()}))}},s.updateFileList=function(){var e=s.state,t=e.file,n=e.fileList;s.props.updateList({file:t,fileList:n})},s.getFileMd5=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e,n){g()(t,(function(t,n){n&&e(n)}),(function(e,t){1===e&&t&&n(t)}))})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={file:[],fileList:e.fileList||[]},s}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this)}},{key:"componentWillReceiveProps",value:function(e){JSON.stringify(e.fileList)!==JSON.stringify(this.state.fileList)&&(e.fileList.length<this.state.fileList.length&&this.inputFile.value&&(this.inputFile.value=null),this.setState({fileList:e.fileList}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,i=t.accept,r=t.multiple,s=void 0!==r&&r;return m.a.createElement("div",{onClick:function(){return e.inputFile.click()}},m.a.createElement("input",{type:"file",name:"file",accept:i,multiple:s,onChange:function(t){return e.handleFiles(t)},style:{display:"none"},ref:function(t){return e.inputFile=t}}),n)}}]),n}(f.Component),L=S;"undefined"!==typeof S&&S&&S===Object(S)&&Object.isExtensible(S)&&Object.defineProperty(S,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadInput",filename:"src\\uploadFile\\uploadFile.tsx"}});n("./node_modules/antd/es/progress/style/index.js");var q=n("./node_modules/antd/es/progress/index.js"),k=(n("./node_modules/antd/es/icon/style/index.js"),n("./node_modules/antd/es/icon/index.js")),P=(n("./src/uploadFile/index.less"),n("./src/uploadFile/assets/ic_file_audio.svg")),C=n.n(P),N=n("./src/uploadFile/assets/ic_file_picture.svg"),T=n.n(N),A=n("./src/uploadFile/assets/ic_file_video.svg"),U=n.n(A),D=n("./src/uploadFile/assets/ic_file_unknown.svg"),M=n.n(D),J=n("./src/uploadFile/assets/ic_file_attachment.svg"),Q=n.n(J),B=n("./src/uploadFile/assets/ic_file_animate.svg"),R=n.n(B),G=n("./src/uploadFile/assets/ic_file_word.svg"),V=n.n(G),z=n("./src/uploadFile/assets/ic_file_ppt.svg"),H=n.n(z),K=n("./src/uploadFile/assets/ic_file_gsp.svg"),W=n.n(K),$={image:["JPG","PNG","JPEG","JFIF","PJPEG","PJG","GIF","BMP","DIB","GIF","IFF","JPEG","JPG","JPE","PNG","TIF","TIFF"],video:["CDA","WAV","WMA","RA","MIDI","OGG","APE","FLAC","AAC","mp3","wma","wav"],audio:["MPGE","MOV","rm","ram","mp4","avi","mkv","flv","rmvb","wmv","3gp","asf","m4v"],flash:["swf","exe","swl"],word:["xls","xlsx","txt","doc","docx","pdf","text"],zip:["zip","rar","7z"],gsp:["gsp","gss"],ppt:["ppt","pptx","pptm"]};"undefined"!==typeof $&&$&&$===Object($)&&Object.isExtensible($)&&Object.defineProperty($,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"acceptName",filename:"src\\uploadFile\\index.tsx"}}),"undefined"!==typeof accessoriesType&&accessoriesType&&accessoriesType===Object(accessoriesType)&&Object.isExtensible(accessoriesType)&&Object.defineProperty(accessoriesType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"accessoriesType",filename:"src\\uploadFile\\index.tsx"}}),"undefined"!==typeof taskItemType&&taskItemType&&taskItemType===Object(taskItemType)&&Object.isExtensible(taskItemType)&&Object.defineProperty(taskItemType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"taskItemType",filename:"src\\uploadFile\\index.tsx"}}),"undefined"!==typeof UploadFileProps&&UploadFileProps&&UploadFileProps===Object(UploadFileProps)&&Object.isExtensible(UploadFileProps)&&Object.defineProperty(UploadFileProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadFileProps",filename:"src\\uploadFile\\index.tsx"}}),"undefined"!==typeof fileListType&&fileListType&&fileListType===Object(fileListType)&&Object.isExtensible(fileListType)&&Object.defineProperty(fileListType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"fileListType",filename:"src\\uploadFile\\index.tsx"}});var X=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).child=void 0,i.updateList=function(e){i.setState({fileList:e.fileList},(function(){i.onChangeFileList()}))},i.OnDeleteFile=function(e){var t=i.state.fileList.filter((function(t){return t.uid!==e}));i.setState({fileList:t},(function(){i.onChangeFileList()}))},i.onChangeFileList=function(){var e=i.state.fileList;i.props.onChangeFileList(e)},i.onCancelFile=function(e){var t=i.state.fileList.filter((function(t){return t.id!==e}));i.setState({fileList:t},(function(){i.onChangeFileList()}))},i.reUploadFile=function(e){i.child.sendFiles(e.file,e.id)},i.getExtensionImage=function(e){var t="unknownPic",n={ppt:H.a,flash:R.a,image:T.a,video:U.a,word:V.a,audio:C.a,zip:Q.a,gsp:W.a,unknownPic:M.a};for(var i in $){var r;if(Object.prototype.hasOwnProperty.call($,i)&&Array.isArray($[i]))(null===(r=$[i])||void 0===r?void 0:r.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.toLowerCase())}),"")).indexOf(e)>-1&&(t=i)}return m.a.createElement("img",{src:n[t]})},i.state={OSSData:{},fileList:e.fileList,files:null,fileMd5:""},i.child=null,i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this)}},{key:"componentWillReceiveProps",value:function(e){JSON.stringify(e.fileList)!==JSON.stringify(this.state.fileList)&&this.setState({fileList:e.fileList})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fileList,i=(t.files,this.props),r=i.url,s=i.token,a=i.fileNameLength,o=i.accept,u=void 0===o?"":o,c=i.children,l=void 0===c?null:c,p=i.maxSize,d=void 0===p?100:p,f=i.multiple,b=void 0===f||f;i.showLists;return m.a.createElement("div",{className:"fileContent"},m.a.createElement("div",{className:"hasFileBotton"},m.a.createElement(L,{accept:u,multiple:b,fileList:n,updateList:this.updateList,maxSize:d,fileNameLength:a,url:r,token:s,onRef:function(t){return e.child=t},error:this.props.error,onCancelFile:function(t){return e.onCancelFile(t)}},l)),n.map((function(t){return m.a.createElement("div",{className:"fileItemList".concat(" ","error"===t.status?"err":""),key:t.id,title:t.name},m.a.createElement("div",null,e.getExtensionImage(t.extension),m.a.createElement("span",{className:"fileName"},t.name),"ready"===t.status?m.a.createElement(k.a,{type:"loading"}):""),"ready"===t.status||"uploading"===t.status||"error"===t.status?m.a.createElement("div",{className:"progressClass"},m.a.createElement("div",null,m.a.createElement(q.a,{percent:t.progress,width:1100,size:"small",status:"active",strokeColor:"#FE8D29",trailColor:"#D9D9D9"})),"error"===t.status?m.a.createElement("div",{className:"oprationBtn",onClick:function(){return e.reUploadFile(t)}},"\u91cd\u65b0\u4e0a\u4f20"):m.a.createElement("div",null),m.a.createElement("div",{className:"oprationBtn",onClick:function(){return e.onCancelFile(t.id)}},"\u53d6\u6d88\u4e0a\u4f20")):"")})))}}]),n}(f.Component);"undefined"!==typeof X&&X&&X===Object(X)&&Object.isExtensible(X)&&Object.defineProperty(X,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadFile",filename:"src\\uploadFile\\index.tsx"}}),"undefined"!==typeof X&&X&&X===Object(X)&&Object.isExtensible(X)&&Object.defineProperty(X,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadFile",filename:"src\\uploadFile\\index.tsx"}});var Y=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),Z=n("./node_modules/emotion/dist/emotion.esm.js");n("./src/Buttons/index.less");function ee(){var e=Object(Y.a)(["\n                display: inline-block;\n                cursor: pointer;\n                border: 1px solid #FE8D29;\n                color: #FE8D29;\n                "]);return ee=function(){return e},e}var te=f.forwardRef((function(e,t){var n=Object.assign({},e);return f.createElement("button",Object.assign({},n,{className:Object(Z.b)("defaultButtn",Object(Z.a)(ee()))}))})),ne=function(e){var t=e.children;return f.createElement(te,null,t)},ie=ne;ne&&ne===Object(ne)&&Object.isExtensible(ne)&&Object.defineProperty(ne,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Button",filename:"src\\Buttons\\index.tsx"}});var re=n("./src/DragModel/index.tsx"),se=(n("./node_modules/antd/es/tabs/style/index.js"),n("./node_modules/antd/es/tabs/index.js")),ae=n("./src/QuestionEditor/editor/richtext.tsx"),oe=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");n("./src/QuestionEditor/editor/richtext.less");function ue(e){var t=Object(f.useState)(e.option),n=Object(oe.a)(t,2),i=n[0],r=n[1],s=Object(f.useState)((function(){var t=[];return e.answer.map((function(e){var n;e.children[0]&&e.children[0].text&&(n=e.children[0].text),t.push(n)})),t})),a=Object(oe.a)(s,2),o=a[0],u=a[1];return Object(f.useEffect)((function(){var t=[];e.answer.map((function(e){var n;e.children[0]&&e.children[0].text&&(n=e.children[0].text),t.push(n)})),u(t)}),[e.answer]),Object(f.useEffect)((function(){r(e.option)}),[e.option]),m.a.createElement("div",{className:"answerOption"},i.map((function(t,n){var i=o[0]===t;return m.a.createElement("div",{key:n,className:"item".concat(" ",i?"checked":""),onClick:function(){return function(t){var n=JSON.parse(JSON.stringify(o));"SINGLE_CHOICE"!==e.questionType&&"JUDGEMENT"!==e.questionType||(n=[]);var i=o.findIndex((function(e){return e===t}));i>-1?n.splice(i,1):n.push(t),n.sort((function(e,t){return e>t?1:-1}));var r=n.map((function(e){return{children:[{text:e}],type:"Left"}}));e.setAnswer(r)}(t)}},m.a.createElement("span",{style:{fontSize:1===t.length?"22px":"12px"}},t))})))}ue&&ue===Object(ue)&&Object.isExtensible(ue)&&Object.defineProperty(ue,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ChoiceAnswer",filename:"src\\QuestionEditor\\editor\\choiceAnswer.tsx"}});var ce=n("./src/QuestionEditor/editor/components/judgementAnswer.less"),le=n.n(ce),pe=n("./src/QuestionEditor/editor/client.ts");function de(e){var t=Object(f.useState)(e.option),n=Object(oe.a)(t,2),i=(n[0],n[1],Object(f.useState)(JSON.stringify(e.option))),r=Object(oe.a)(i,2),s=r[0],a=r[1];return Object(f.useEffect)((function(){}),[e.answer]),m.a.createElement("div",{className:le.a.JudgementAnswerCotent},pe.o.map((function(t,n){return m.a.createElement("div",{key:n,className:JSON.stringify(t)===s?le.a.checkItem:"",onClick:function(){return n=t,a(JSON.stringify(n)),void e.changeItem(n);var n}},"".concat(t[0],"/").concat(t[1]))})))}de&&de===Object(de)&&Object.isExtensible(de)&&Object.defineProperty(de,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"JudgementAnswer",filename:"src\\QuestionEditor\\editor\\components\\JudgementAnswer.tsx"}});var fe=n("./src/MessageTips/index.ts"),me=n("./node_modules/lodash/debounce.js"),be=n.n(me),ve=n("./node_modules/lodash/lodash.js"),he=n.n(ve);se.a.TabPane;"undefined"!==typeof EditItemProps&&EditItemProps&&EditItemProps===Object(EditItemProps)&&Object.isExtensible(EditItemProps)&&Object.defineProperty(EditItemProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditItemProps",filename:"src\\QuestionEditor\\editor\\index.tsx"}});var ge=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).changChild=function(){console.error("222")},r.changeValue=function(e,t,n,i){r.props.changeValue&&r.props.changeValue(e,t,n,i)},r.handleBatchOk=function(e){var t=r.state,n=t.questionItem,s=t.questionStructure,a=t.isChangeQuestionList,o=t.type,u=t.videoUrl,c=Object(pe.l)(JSON.parse(JSON.stringify(s)),o);c.questionList.questions&&(c.questionList.questions=c.questionList.questions.map((function(e,t){return Object(i.a)(Object(i.a)({},n.question.questions[t]),e)})));var l=Object(i.a)(Object(i.a)({},n),{},{question:Object(i.a)(Object(i.a)(Object(i.a)({},n.question),c.questionList),{},{isChangeQuestionList:1===e?a:[]})});if(c.errList.length>0&&0!==e){fe.a.open({message:"\u8bf7\u5b8c\u5584\u5185\u5bb9",type:"fail"});var p=c.errList.map((function(e){return e.index}));p=p.filter((function(e){return void 0!==e})),r.setState({questionStructure:c.question,errList:p,activeKey:"".concat(p&&p.length>0?p[0]:r.state.activeKey)})}else{if(u.content&&l.question.stem.push({alignment:"Left",fragments:[{content:u.content,mediaType:"AUDIO",styles:[]}],indentation:0,styles:[]}),u.questions&&Object.keys(u.questions).length>0)for(var d in u.questions)if(u.questions.hasOwnProperty(d)){var f=u.questions[d].content;f&&l.question.questions[d].stem.push({alignment:"Left",fragments:[{content:f,mediaType:"AUDIO",styles:[]}],indentation:0,styles:[]})}r.props.handOkVal&&r.props.handOkVal(l,e)}},r.chooseBox=function(e){var t=r.state.questionStructure.map((function(t,n){return t.isChoose=e===n,t.readOnly=!1,t}));r.setState({questionStructure:t})},r.setAnswer=function(e,t){var n=r.state.questionStructure,i=JSON.parse(JSON.stringify(n)).map((function(n){return"answer"===n.type&&(n.content=e,n.isFilled=!0),"comprehensive"===n.type&&n.content[t].map((function(t){"answer"===t.type&&(t.content=e,t.isFilled=!0)})),n}));console.log("newQuestionStructure==>",i),r.setState({questionStructure:i},(function(){r.props.changeAnswer(i)}))},r.deleteOption=function(e,t){var n,i=r.state,s=i.questionStructure,a=i.isChangeQuestionList;n=Object(pe.j)(e,s,!1,t),void 0!==t?-1===a.indexOf(t)&&a.push(t):-1===a.indexOf(-1)&&a.push(-1),n.isOnlyOption?fe.a.open({message:"\u81f3\u5c11\u5305\u542b\u4e24\u4e2a\u9009\u9879",type:"fail"}):r.setState({questionStructure:n.newQuestionStructure},(function(){r.setState({questionStructure:n.newQuestionStructure1,isChangeQuestionList:a},(function(){Object(pe.r)(!0)}))}))},r.callback=function(e){var t=r.state,n=(t.questionItem,t.questionStructure),i=t.type,s=Object(pe.l)(JSON.parse(JSON.stringify(n)),i).errList.map((function(e){return e.index}));s=s.filter((function(e){return void 0!==e})),r.setState({activeKey:e,errList:s},(function(){Object(pe.r)(!0)}))},r.postion=function(e){r.setState({modalPosition:e})},r.positionInsertFormula=function(e){r.setState({modalPositionInsertFormula:e})},r.changeItem=function(e){var t=r.state.questionStructure,n=he.a.map(t,(function(t){return"answer"===t.type&&(t.option=he.a.cloneDeep(e),t.content=[{children:[{text:e[0],styles:[],type:"Left"}]}]),t}));r.setState({questionStructure:n},(function(){r.props.changeAnswer(n)}))},r.calcelAnswers=function(e,t){var n=r.state,s=n.questionStructure,a=(n.type,he.a.map(s,(function(e){return"option"===e.type&&(e.content=he.a.map(e.content,(function(e,n){return n===t&&(e=Object(i.a)(Object(i.a)({},e),{},{isAnswer:!1})),e}))),e})));a=r.getAnswerStructure(a),r.setState({questionStructure:a},(function(){r.props.changeAnswer(a)}))},r.setAnswers=function(e,t){var n=r.state,s=n.questionStructure,a=n.type;console.log("newQuestionStructure==>",s);var o=he.a.map(s,(function(e){return e.isFilled=!0,"option"===e.type&&(e.content="SINGLE_CHOICE"===a?he.a.map(e.content,(function(e,n){return e=n===t?Object(i.a)(Object(i.a)({},e),{},{isAnswer:!0}):Object(i.a)(Object(i.a)({},e),{},{isAnswer:!1})})):he.a.map(e.content,(function(e,n){return n===t&&(e=Object(i.a)(Object(i.a)({},e),{},{isAnswer:!0})),e}))),e}));o=r.getAnswerStructure(s),r.setState({questionStructure:o},(function(){r.props.changeAnswer(o)}))},r.getAnswerStructure=function(e){var t=[];return e=he.a.map(e,(function(e){return"option"===e.type&&(e.content=he.a.map(e.content,(function(e,n){return e.isAnswer&&t.push({children:[{text:pe.p[n]}],styles:[],type:"Left"}),e}))),e})),e=he.a.map(e,(function(e){return"answer"===e.type&&(e.content=he.a.cloneDeep(t)),e}))},r.addAnswers=function(e,t){var n=r.state.questionStructure,s=he.a.cloneDeep(n),a=s[e].content;s[e].content=he.a.map(a,(function(e){return e=Object(i.a)(Object(i.a)({},e),{},{autoFocus:!1})})),s[e].content.splice(t+1,0,{children:[{text:"",isAdd:!0}],isFilled:!0,autoFocus:!0,key:String(Math.random()).replace(".",""),requireText:"\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a",styles:[],type:"Left"}),r.props.changeAnswer(he.a.cloneDeep(s))},r.deleteAnswers=function(e,t){var n=r.state.questionStructure;n[e].content.splice(t,1);var i=n[e].content.length,s=pe.p.filter((function(e,t){return t<i}));n=he.a.map(n,(function(e){return"answer"===e.type&&(e.content=e.content.map((function(e){return e.children=e.children.filter((function(e){var t="",n=e.text?e.text.replace(/(^\s*)|(\s*$)/g,""):"";return e.character&&(n+=e.character?e.character.replace(/(^\s*)|(\s*$)/g,""):""),t+=n,s.includes(t)})),e.option=he.a.cloneDeep(s),e}))),e}));var a=r.getAnswerStructure(n);r.setState({questionStructure:a},(function(){r.props.changeAnswer(he.a.cloneDeep(a))}))};var s=Object(pe.m)(e.value.question);return r.state={questionRenderCompleted:!1,questionItem:JSON.parse(JSON.stringify(e.value)),questionStructure:e.questionStructure,type:e.value.question.questionType,activeKey:"0",answer:["A"],errList:[],isChangeQuestionList:e.value.question.isChangeQuestionList||[],hasError:!1,orderSortVisible:!1,modalPosition:{visible:!1,ActiveKey:"0",left:"calc(50% - 200px)",top:"calc(50vh - 207px)"},modalPositionInsertFormula:{visible:!1,ActiveKey:"0",left:"calc(50% - 500px)",top:"calc(50vh - 200px)"},color:"black",sortFormat:"1",isInBox:!1,videoUrl:s},r.changeValue=be()(r.changeValue,100),r}return Object(c.a)(n,null,[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e;Object(pe.r)(),null===(e=document.getElementById("RichText"))||void 0===e||e.addEventListener("dragstart",(function(e){return e.preventDefault(),e.stopPropagation(),!1}))}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.questionStructure;JSON.stringify(this.state.questionStructure)!==JSON.stringify(n)&&this.setState({questionStructure:[]},(function(){t.setState({questionStructure:n,type:e.value.question.questionType},(function(){Object(pe.r)(!0)}))}))}},{key:"componentDidCatch",value:function(){var e=this.state.hasError;fe.a.open({message:"\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",type:"fail",time:500}),this.setState({hasError:!e}),Object(pe.r)(!0)}},{key:"RichTextRender",value:function(e,t,n){var i,r=this,s=this.state,a=s.modalPosition,o=s.color,u=s.sortFormat,c=s.modalPositionInsertFormula,l=s.isInBox,p=this.props.search;return"option"!==e.type&&"answer"!==e.type?i=m.a.createElement("div",null,m.a.createElement("div",{className:!e.isFilled&&e.require?"boxError":"RichTextInput"},m.a.createElement(ae.a,{search:p,value:e.content,isFistRich:e.isFistRich,minHeight:63,id:"".concat(t).concat(n),changeValue:function(e){return r.changeValue(e,[t],n)},postion:function(e){return r.postion(e)},positionInsertFormula:function(e){return r.positionInsertFormula(e)},modalPosition:a,modalPositionInsertFormula:c,changeColor:function(e){return r.setState({color:e})},color:o,sortFormat:u,setFormat:function(e){return r.setState({sortFormat:e})},isInBox:l})),!e.isFilled&&e.require?m.a.createElement("div",{className:"error"},e.requireText):""):"answer"!==e.type?i=m.a.createElement("div",{className:"optionContain"},e.content.map((function(i,s){return m.a.createElement("div",{key:i.key||s,className:"optionBox1"},m.a.createElement("div",{className:"optionItem"},m.a.createElement("div",{className:"richtext".concat("\n                                        optionContent\n                                        ",i.isFilled?"RichTextInput":"boxError","\n                                        ").concat(i.isAnswer?"isAnswer":"","\n                                    "),id:i.autoFocus?"autoFocus":""},m.a.createElement("div",{className:"answerOptate"},e.content.length>2?m.a.createElement("div",{className:"cancelswer",onClick:function(){return r.deleteAnswers(t,s)}},"\u5220\u9664"):"",i.isAnswer?m.a.createElement("div",{className:"answer",onClick:function(){return r.calcelAnswers(t,s)}},"\u53d6\u6d88\u7b54\u6848"):m.a.createElement("div",{className:"answer",onClick:function(){return r.setAnswers(t,s)}},"\u8bbe\u4e3a\u7b54\u6848"),m.a.createElement("div",{className:"addswer",onMouseUp:function(){return r.addAnswers(t,s)}},"\u65b0\u589e")),m.a.createElement(ae.a,{search:p,index:i.Key,value:[i],autoFocus:i.autoFocus,isoption:!0,isOption:!0,id:"".concat(t).concat(s),isFilled:i.isFilled,changeValue:function(e){return r.changeValue(e,[t,s],n)},postion:function(e){return r.postion(e)},positionInsertFormula:function(e){return r.positionInsertFormula(e)},modalPosition:a,modalPositionInsertFormula:c,changeColor:function(e){return r.setState({color:e})},color:o,sortFormat:u,setFormat:function(e){return r.setState({sortFormat:e})},isInBox:l}))),i.isFilled?"":m.a.createElement("div",{className:"error"},i.requireText))}))):"answer"===e.type&&"SINGLE_CHOICE"!==e.questionType&&"MULTIPLE_CHOICE"!==e.questionType&&"INDEFINITE_CHOICE"!==e.questionType?i=e.isChoice?m.a.createElement("div",null,m.a.createElement(ue,{answer:e.content,option:e.option,questionType:e.questionType,setAnswer:function(e){return r.setAnswer(e,n)}}),!e.isFilled&&e.require?m.a.createElement("div",{className:"error"},e.requireText):""):m.a.createElement("div",null,m.a.createElement("div",{className:!e.isFilled&&e.require?"boxError":"RichTextInput"},m.a.createElement(ae.a,{search:p,value:e.content,isFistRich:e.isFistRich,minHeight:63,id:"".concat(t).concat(n),changeValue:function(e){return r.changeValue(e,[t],n,"answer")},postion:function(e){return r.postion(e)},positionInsertFormula:function(e){return r.positionInsertFormula(e)},modalPosition:a,modalPositionInsertFormula:c,changeColor:function(e){return r.setState({color:e})},color:o,sortFormat:u,setFormat:function(e){return r.setState({sortFormat:e})},isInBox:l})),!e.isFilled&&e.require?m.a.createElement("div",{className:"error"},e.requireText):""):"answer"===e.type&&(i=e.isChoice?m.a.createElement("div",null,!e.isFilled&&e.require?m.a.createElement("div",{className:"error"},e.requireText):""):""),i}},{key:"render",value:function(){var e=this,t=this.state,n=t.questionStructure,i=(t.errList,t.activeKey,t.hasError),r=(t.videoUrl,this.props),s=r.copyQuestionMode,a=r.renderDOM,o=function(t){return m.a.createElement("div",{id:"RichText",className:"".concat(t)},n.map((function(t,n){var i=m.a.createElement("div",{key:n});return"comprehensive"!==t.type&&(i=function(t,n,i){return m.a.createElement("div",{key:n},"answer"!==t.type||"SINGLE_CHOICE"!==t.questionType&&"MULTIPLE_CHOICE"!==t.questionType&&"INDEFINITE_CHOICE"!==t.questionType?m.a.createElement("div",{className:"title"},t.require?m.a.createElement("span",{className:"require"},"*"):"",m.a.createElement("span",null,t.title),"stem"===t.type&&s?m.a.createElement("span",{className:"copyQuestion",onClick:function(){return e.props.cancelCopy}},"\u53d6\u6d88",1===s?"\u590d\u5236":"\u5f15\u7528"):"","option"===t.type?m.a.createElement("span",{className:"choiceTips"},pe.q[t.questionType]):"","JUDGEMENT"===t.questionType&&"answer"===t.type?m.a.createElement(de,{option:t.option,changeItem:function(t){return e.changeItem(t)}}):""):"",e.RichTextRender(t,n,i),"stem"===t.type?m.a.createElement("div",{className:"addQuestionItem"},m.a.createElement("span",{className:"questionType"},a&&a)):"")}(t,n)),i})),m.a.createElement("div",{id:"showImgBox"}))};return m.a.createElement("div",null,o(!!i))}}]),n}(f.Component);"undefined"!==typeof ge&&ge&&ge===Object(ge)&&Object.isExtensible(ge)&&Object.defineProperty(ge,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditItem",filename:"src\\QuestionEditor\\editor\\index.tsx"}}),"undefined"!==typeof ge&&ge&&ge===Object(ge)&&Object.isExtensible(ge)&&Object.defineProperty(ge,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditItem",filename:"src\\QuestionEditor\\editor\\index.tsx"}});var ye=n("./src/QuestionEditor/utils/client.ts"),Oe=function(e){Object(p.a)(i,e);var t,n=Object(d.a)(i);function i(e){var t;Object(u.a)(this,i),(t=n.call(this,e)).changeValue=function(e,n,i,r){t.props.changeValue(e,n,i,r)},t.changeAnswer=function(){},Object(ye.a)((function(){t.setState({depLoaded:!0})}));var r=Object(pe.k)(e.question.question,"SINGLE_CHOICE");return t.state={questions:e.question,type:"SINGLE_CHOICE",search:"",depLoaded:!1,questionStructure:r},t}return Object(c.a)(i,[{key:"componentDidMount",value:(t=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ye.b.js[0],n=document.querySelector("head"),Array.from(n.childNodes).filter((function(e){return"SCRIPT"===e.tagName})).map((function(e){return e.getAttribute("src")})).includes(t)&&this.setState({depLoaded:!0});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.type,n=e.search,i=e.questions,r=e.questionStructure,s=e.depLoaded;return console.log("\ud83d\ude80 ~ file: index.tsx ~ line 129 ~ Minpage ~ render ~ depLoaded",s),m.a.createElement("div",null,s?m.a.createElement(ge,{type:t,search:n,value:i,questionStructure:r,changeValue:this.changeValue,changeAnswer:this.changeAnswer}):m.a.createElement("div",null,"Loading..."))}}]),i}(f.Component);"undefined"!==typeof Oe&&Oe&&Oe===Object(Oe)&&Object.isExtensible(Oe)&&Object.defineProperty(Oe,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Minpage",filename:"src\\QuestionEditor\\index.tsx"}}),"undefined"!==typeof Oe&&Oe&&Oe===Object(Oe)&&Object.isExtensible(Oe)&&Object.defineProperty(Oe,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Minpage",filename:"src\\QuestionEditor\\index.tsx"}}),"undefined"!==typeof UploadInput&&UploadInput&&UploadInput===Object(UploadInput)&&Object.isExtensible(UploadInput)&&Object.defineProperty(UploadInput,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadInput",filename:"src\\index.tsx"}}),"undefined"!==typeof UploadFile&&UploadFile&&UploadFile===Object(UploadFile)&&Object.isExtensible(UploadFile)&&Object.defineProperty(UploadFile,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UploadFile",filename:"src\\index.tsx"}}),"undefined"!==typeof Button&&Button&&Button===Object(Button)&&Object.isExtensible(Button)&&Object.defineProperty(Button,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Button",filename:"src\\index.tsx"}}),"undefined"!==typeof DragModel&&DragModel&&DragModel===Object(DragModel)&&Object.isExtensible(DragModel)&&Object.defineProperty(DragModel,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DragModel",filename:"src\\index.tsx"}}),"undefined"!==typeof QuestionEditor&&QuestionEditor&&QuestionEditor===Object(QuestionEditor)&&Object.isExtensible(QuestionEditor)&&Object.defineProperty(QuestionEditor,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"QuestionEditor",filename:"src\\index.tsx"}})},"./src/uploadFile/assets/ic_file_animate.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_animate.2fd1f463.svg"},"./src/uploadFile/assets/ic_file_attachment.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_attachment.ffb4b322.svg"},"./src/uploadFile/assets/ic_file_audio.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_audio.1fb5ad9a.svg"},"./src/uploadFile/assets/ic_file_gsp.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_gsp.cd086e47.svg"},"./src/uploadFile/assets/ic_file_picture.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_picture.cd249ac0.svg"},"./src/uploadFile/assets/ic_file_ppt.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_ppt.11467320.svg"},"./src/uploadFile/assets/ic_file_unknown.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_unknown.d02d831c.svg"},"./src/uploadFile/assets/ic_file_video.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_video.e3acd6e0.svg"},"./src/uploadFile/assets/ic_file_word.svg":function(e,t,n){e.exports=n.p+"static/img/ic_file_word.16faba57.svg"},"./src/uploadFile/index.less":function(e,t,n){}}]);
{"remainingRequest":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js??ref--11-1!F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--11-2!F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js!F:\\slate\\easteduCompoents\\src\\QuestionEditor\\editor\\components\\UploadFile.ts","dependencies":[{"path":"F:\\slate\\easteduCompoents\\src\\QuestionEditor\\editor\\components\\UploadFile.ts","mtime":1611717659242},{"path":"F:\\slate\\easteduCompoents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1611297672593},{"path":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1611297676370},{"path":"F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1611297672218},{"path":"F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js","mtime":1599723087186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL3JlZ2VuZXJhdG9yIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKLy8gQHRzLW5vY2hlY2sKaW1wb3J0IENvcyBmcm9tICdjb3MtanMtc2RrLXY1JzsKaW1wb3J0IGpzTWQ1RmlsZSBmcm9tICdqcy1tZDUtZmlsZSc7CmltcG9ydCBmaWxlRXh0ZW5zaW9uIGZyb20gJ2ZpbGUtZXh0ZW5zaW9uJzsgLy8gaW1wb3J0IHsgVGlwcywgbWVzc2FnZSB9IGZyb20gJy4vLi4vLi4vaW5kZXgnOwoKaW1wb3J0IHsgVGlwcyB9IGZyb20gJy4uLy4uLy4uL01lc3NhZ2VUaXBzL2luZGV4JzsKaW1wb3J0IHsgcG9zdFNpZ25hdHVyZXMgLy8g6I635Y+W562+5ZCNCiwgdXBkYXRlRmlsZSAvLyDkuIrkvKDmlofku7bmiJDlip/lkI7vvIzmm7TmlrDmlbDmja4KfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9FZGl0ZFF1ZXN0aW9uJzsKCnZhciBVcGxvYWRGaWxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBVcGxvYWRGaWxlKHByb3BzKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVcGxvYWRGaWxlKTsKCiAgICB0aGlzLmhhbmRsZUZpbGVzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGZpbGUpIHsKICAgICAgICB2YXIgbmFtZSwgZXh0LCBmaWxlTWQ1LCBzZW5kRGF0YSwgcmVzLCByZXNwb25zZSwgdXBsb2FkRmlsZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICAgICAgbmFtZSA9IGZpbGUubmFtZTsgLy8g6I635Y+W5paH5Lu25ZCO57yACgogICAgICAgICAgICAgICAgZXh0ID0gZmlsZUV4dGVuc2lvbihmaWxlLm5hbWUpLnRvTG93ZXJDYXNlKCk7IC8vIOiOt+WPluaWh+S7tk1ENeWKoOWvhgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldEZpbGVNZDUoZmlsZSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGZpbGVNZDUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgLy8g6K+35rGC5a+G6ZKlCiAgICAgICAgICAgICAgICBzZW5kRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgY2xpZW50OiAnUl9DZW50ZXInLAogICAgICAgICAgICAgICAgICBleHRlbnNpb246IGV4dCwKICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSwKICAgICAgICAgICAgICAgICAgZ2VucmU6IDEsCiAgICAgICAgICAgICAgICAgIGd1aWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgIG1kNTogZmlsZU1kNSwKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6ICd0ZW5jZW50JywKICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9zdFNpZ25hdHVyZXMoc2VuZERhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlcz09PT4nLCByZXMpOwogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByZXM7CiAgICAgICAgICAgICAgICAvKiog5b2T5paH5Lu25a2Y5Zyo55qE5pe25YCZICoqLwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS51cGxvYWQpIHsKICAgICAgICAgICAgICAgICAgdXBsb2FkRmlsZSA9IHsKICAgICAgICAgICAgICAgICAgICB1aWQ6IHJlc3BvbnNlLmZpbGVJZCwKICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZG9uZScsCiAgICAgICAgICAgICAgICAgICAgdXJsOiByZXNwb25zZS5wYXRoCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIF90aGlzLmZpbGUgPSB1cGxvYWRGaWxlOyAvLyBUaXBzLm9wZW4oewogICAgICAgICAgICAgICAgICAvLyAgICAgbWVzc2FnZTogYCR7ZmlsZS5uYW1lfSAg5paH5Lu25LiK5Lyg5oiQ5YqfIWAsCiAgICAgICAgICAgICAgICAgIC8vICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIC8vICAgICB0aW1lOiAyMDAwCiAgICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgICAvLyBtZXNzYWdlLnN1Y2Nlc3MoYCR7ZmlsZS5uYW1lfSAg5paH5Lu25LiK5Lyg5oiQ5YqfIWApOwogICAgICAgICAgICAgICAgICAvLyA7CgogICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVGaWxlTGlzdChyZXNwb25zZS5wYXRoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIOiuvue9ruWPguaVsAogICAgICAgICAgICAgICAgICBfdGhpcy5Db3NQYXJhbSA9IHsKICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHJlc3BvbnNlLnNpZ25hdHVyZSwKICAgICAgICAgICAgICAgICAgICBidWNrZXQ6IHJlc3BvbnNlLmJ1Y2tldCwKICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlc3BvbnNlLnJlZ2lvbiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiByZXNwb25zZS5wYXRoLAogICAgICAgICAgICAgICAgICAgIGlkOiByZXNwb25zZS5maWxlSWQKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZSA9IGZpbGU7CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZW5kQ29zRmlsZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHRoaXMuc2VuZENvc0ZpbGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBDb3NQYXJhbSA9IF90aGlzLkNvc1BhcmFtOwogICAgICB2YXIgZmlsZSA9IF90aGlzLmZpbGU7CiAgICAgIHZhciB0aGF0ID0gX3RoaXM7IC8vIGNvbnNvbGUubG9nKCdmaWxlPT09PicsIGZpbGUpOwogICAgICAvLyBjb25zb2xlLmxvZygnQ29zUGFyYW09PT0+JywgQ29zUGFyYW0pOwoKICAgICAgdmFyIE9TU0RhdGEgPSBuZXcgQ29zKHsKICAgICAgICBnZXRBdXRob3JpemF0aW9uOiBmdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICAgICAgICBjYWxsYmFjayhDb3NQYXJhbS5zaWduYXR1cmUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIE9TU0RhdGEucHV0T2JqZWN0KHsKICAgICAgICBCdWNrZXQ6IENvc1BhcmFtLmJ1Y2tldCwKICAgICAgICBSZWdpb246IENvc1BhcmFtLnJlZ2lvbiwKICAgICAgICBLZXk6IENvc1BhcmFtLnBhdGgsCiAgICAgICAgQm9keTogZmlsZSwKICAgICAgICAvLyDkuIrkvKDmlofku7blr7nosaEKICAgICAgICAvLyBTbGljZVNpemU6ICc1TScsCiAgICAgICAgLy8gQXN5bmNMaW1pdDogJzUnLAogICAgICAgIFRhc2tSZWFkeTogZnVuY3Rpb24gVGFza1JlYWR5KGUpIHsKICAgICAgICAgIC8qIOmdnuW/hemhuyAqLwogICAgICAgIH0sCiAgICAgICAgb25IYXNoUHJvZ3Jlc3M6IGZ1bmN0aW9uIG9uSGFzaFByb2dyZXNzKGUpIHsKICAgICAgICAgIC8qIOmdnuW/hemhuyAqLwogICAgICAgICAgLy8KICAgICAgICB9LAogICAgICAgIG9uUHJvZ3Jlc3M6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3MoZSkge30KICAgICAgfSwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihlcnIsIGRhdGEpIHsKICAgICAgICAgIHZhciByZXMsIHJlc3BvbnNlLCB1cGxvYWRGaWxlOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghKCFlcnIgJiYgZGF0YS5zdGF0dXNDb2RlID09PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVGaWxlKHsKICAgICAgICAgICAgICAgICAgICBmaWxlSWQ6ICIiLmNvbmNhdChDb3NQYXJhbS5pZCksCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMS4wCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVzOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkRmlsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgIHVpZDogcmVzcG9uc2UuaWQsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXNwb25zZS5maWxlTmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2RvbmUnLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiByZXNwb25zZS5wYXRoCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGF0LmZpbGUgPSB1cGxvYWRGaWxlOwogICAgICAgICAgICAgICAgICAgIHRoYXQudXBkYXRlRmlsZUxpc3QocmVzcG9uc2UucGF0aCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5paH5Lu25LiK5Lyg5aSx6LSl5Y6f5ZugPT0+JywgZXJyKTsKICAgICAgICAgICAgICAgICAgVGlwcy5vcGVuKHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5paH5Lu25LiK5Lyg5aSx6LSl77yBJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmFpbCcsCiAgICAgICAgICAgICAgICAgICAgdGltZTogMjAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MiwgX3gzKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfTsKCiAgICB0aGlzLnVwZGF0ZUZpbGVMaXN0ID0gZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgX3RoaXMuaW1hZ2VVcmwgPSBwYXRoOwoKICAgICAgX3RoaXMuY2FsbEJhY2socGF0aCk7CiAgICB9OwoKICAgIHRoaXMuZ2V0RmlsZU1kNSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGZpbGUpIHsKICAgICAgICB2YXIgbWQ1U3RyaW5nOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbWQ1U3RyaW5nID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICBqc01kNUZpbGUoZmlsZSwKICAgICAgICAgICAgICAgICAgLyogZXNsaW50IGhhbmRsZS1jYWxsYmFjay1lcnI6ICJ3YXJuIiAqLwogICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyLCBmaWxlTWQ1KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbGVNZDU9PT0+JywgZmlsZU1kNSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChmaWxlTWQ1KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZpbGVNZDUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVyciwgZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnIgPT09IDEgJiYgZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBtZDVTdHJpbmcpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIGNvbnNvbGUubG9nKHByb3BzKTsKICAgIHRoaXMuQ29zUGFyYW0gPSB7CiAgICAgIHNpZ25hdHVyZTogJycsCiAgICAgIGJ1Y2tldDogJycsCiAgICAgIHJlZ2lvbjogJycsCiAgICAgIHBhdGg6ICcnLAogICAgICBpZDogMAogICAgfTsKICAgIHRoaXMuY2FsbEJhY2sgPSBwcm9wcy5jYWxsQmFjazsKICAgIHRoaXMuaGFuZGxlRmlsZXMocHJvcHMuYmxvYik7CiAgICB0aGlzLmltYWdlVXJsID0gJyc7CiAgfSAvLyDngrnlh7vkuIrkvKDmlofku7YKCgogIF9jcmVhdGVDbGFzcyhVcGxvYWRGaWxlLCBbewogICAga2V5OiAiX19yZWFjdHN0YW5kaW5fX3JlZ2VuZXJhdGVCeUV2YWwiLAogICAgLy8gQHRzLWlnbm9yZQogICAgdmFsdWU6IGZ1bmN0aW9uIF9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsKGtleSwgY29kZSkgewogICAgICAvLyBAdHMtaWdub3JlCiAgICAgIHRoaXNba2V5XSA9IGV2YWwoY29kZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVXBsb2FkRmlsZTsKfSgpOwoKdmFyIF9kZWZhdWx0ID0gVXBsb2FkRmlsZTsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CgppZiAodHlwZW9mIFVwbG9hZEZpbGUgIT09ICd1bmRlZmluZWQnICYmIFVwbG9hZEZpbGUgJiYgVXBsb2FkRmlsZSA9PT0gT2JqZWN0KFVwbG9hZEZpbGUpICYmIE9iamVjdC5pc0V4dGVuc2libGUoVXBsb2FkRmlsZSkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkRmlsZSwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIlVwbG9hZEZpbGUiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY29tcG9uZW50c1xcVXBsb2FkRmlsZS50cyIKICAgIH0KICB9KTsKfQoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoVXBsb2FkRmlsZSwgIlVwbG9hZEZpbGUiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNvbXBvbmVudHNcXFVwbG9hZEZpbGUudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNvbXBvbmVudHNcXFVwbG9hZEZpbGUudHMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["F:/slate/easteduCompoents/src/QuestionEditor/editor/components/UploadFile.ts"],"names":["Cos","jsMd5File","fileExtension","Tips","postSignatures","updateFile","UploadFile","props","handleFiles","file","name","ext","toLowerCase","getFileMd5","fileMd5","sendData","client","extension","fileName","genre","guid","md5","method","provider","size","res","console","log","response","upload","uploadFile","uid","fileId","status","url","path","updateFileList","CosParam","signature","bucket","region","id","sendCosFile","that","OSSData","getAuthorization","options","callback","putObject","Bucket","Region","Key","Body","TaskReady","e","onHashProgress","onProgress","err","data","statusCode","version","error","open","message","type","time","imageUrl","callBack","md5String","Promise","resolve","reject","blob"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport Cos from 'cos-js-sdk-v5';\r\nimport jsMd5File from 'js-md5-file';\r\nimport fileExtension from 'file-extension';\r\n\r\n// import { Tips, message } from './../../index';\r\nimport { Tips } from '../../../MessageTips/index';\r\nimport {\r\n    postSignatures, // 获取签名\r\n    updateFile, // 上传文件成功后，更新数据\r\n  } from '../../services/EditdQuestion';\r\n\r\nclass UploadFile {\r\n\r\n    \r\n\r\n    constructor(props) {\r\n\r\n        console.log(props);\r\n\r\n        this.CosParam = {\r\n            signature: '',\r\n            bucket: '',\r\n            region: '',\r\n            path: '',\r\n            id: 0,\r\n        };\r\n\r\n        this.callBack = props.callBack;\r\n        this.handleFiles(props.blob);\r\n        this.imageUrl = '';\r\n        \r\n    }\r\n\r\n    // 点击上传文件\r\n    handleFiles = async (file: any) => {\r\n        // const file = e.target.files[0];\r\n\r\n        let name = file.name;\r\n\r\n        // 获取文件后缀\r\n        let ext = fileExtension(file.name).toLowerCase();\r\n\r\n        // 获取文件MD5加密\r\n        let fileMd5 = await this.getFileMd5(file);\r\n\r\n        // 请求密钥\r\n        let sendData = {\r\n            client: 'R_Center',\r\n            extension: ext,\r\n            fileName: file.name,\r\n            genre: 1,\r\n            guid: null,\r\n            md5: fileMd5,\r\n            method: 'put',\r\n            provider: 'tencent',\r\n            size: file.size,\r\n        };\r\n\r\n        let res = await postSignatures(sendData);\r\n\r\n        console.log('res===>', res);\r\n\r\n        let response = res;\r\n\r\n        /** 当文件存在的时候 **/\r\n        if (response.upload) {\r\n            let uploadFile = {\r\n                uid: response.fileId,\r\n                name: file.name,\r\n                status: 'done',\r\n                url: response.path,\r\n            };\r\n\r\n            this.file = uploadFile;\r\n\r\n            // Tips.open({\r\n            //     message: `${file.name}  文件上传成功!`,\r\n            //     type: 'success',\r\n            //     time: 2000\r\n            // });\r\n            // message.success(`${file.name}  文件上传成功!`);\r\n\r\n            // ;\r\n\r\n            this.updateFileList(response.path);\r\n\r\n        } else {\r\n            \r\n            // 设置参数\r\n\r\n            this.CosParam = {\r\n                signature: response.signature,\r\n                bucket: response.bucket,\r\n                region: response.region,\r\n                path: response.path,\r\n                id: response.fileId,\r\n            };\r\n\r\n            this.file = file;\r\n\r\n            this.sendCosFile();\r\n\r\n   \r\n        }\r\n    };\r\n\r\n    // 进行请求腾讯云文件上传\r\n    sendCosFile = () => {\r\n\r\n        let CosParam = this.CosParam;\r\n        let file = this.file;\r\n\r\n        let that = this;\r\n\r\n        // console.log('file===>', file);\r\n        // console.log('CosParam===>', CosParam);\r\n\r\n        let OSSData = new Cos({\r\n            getAuthorization: function (options, callback) {\r\n                callback(CosParam.signature);\r\n            },\r\n        });\r\n\r\n        OSSData.putObject(\r\n            {\r\n                Bucket: CosParam.bucket,\r\n                Region: CosParam.region,\r\n                Key: CosParam.path,\r\n                Body: file, // 上传文件对象\r\n                // SliceSize: '5M',\r\n                // AsyncLimit: '5',\r\n                TaskReady: function (e) {\r\n                    /* 非必须 */\r\n                },\r\n                onHashProgress: function (e) {\r\n                    /* 非必须 */\r\n                    //\r\n                },\r\n                onProgress: function (e) { },\r\n            },\r\n            async function (err, data) {\r\n                if (!err && data.statusCode === 200) {\r\n                    let res = await updateFile({ fileId: `${CosParam.id}`, version: 1.0 });\r\n                    let response = res;\r\n\r\n                    if (response) {\r\n\r\n                        let uploadFile = {\r\n                            uid: response.id,\r\n                            name: response.fileName,\r\n                            status: 'done',\r\n                            url: response.path,\r\n                        };\r\n\r\n                        that.file = uploadFile;\r\n                        \r\n                        that.updateFileList(response.path);\r\n\r\n                    }\r\n                } else {\r\n                    console.error('文件上传失败原因==>',err);\r\n                    Tips.open({\r\n                        message: '文件上传失败！',\r\n                        type: 'fail',\r\n                        time: 2000\r\n                    });\r\n                }\r\n            },\r\n        );\r\n    };\r\n\r\n    // 当文件上传成功的时候，更新列表\r\n\r\n    updateFileList = (path: any) => {\r\n        \r\n        this.imageUrl = path;\r\n\r\n        this.callBack(path);\r\n\r\n    };\r\n\r\n\r\n    getFileMd5 = async (file) => {\r\n        let md5String = new Promise((resolve, reject) => {\r\n            jsMd5File(\r\n                file,\r\n                /* eslint handle-callback-err: \"warn\" */\r\n                (err, fileMd5) => {\r\n                    console.log('fileMd5===>', fileMd5);\r\n                    if (fileMd5) {\r\n                        resolve(fileMd5);\r\n                    }\r\n                },\r\n                function (err, data) {\r\n                    if (err === 1 && data) {\r\n                        reject(data);\r\n                    }\r\n                },\r\n            );\r\n        });\r\n\r\n        return md5String;\r\n    };\r\n\r\n}\r\n\r\nexport default UploadFile;"]}]}
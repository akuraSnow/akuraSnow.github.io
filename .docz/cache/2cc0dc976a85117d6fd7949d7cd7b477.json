{"remainingRequest":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js??ref--11-1!F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--11-2!F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js!F:\\slate\\easteduCompoents\\src\\uploadFile\\servers\\index.ts","dependencies":[{"path":"F:\\slate\\easteduCompoents\\src\\uploadFile\\servers\\index.ts","mtime":1611298675828},{"path":"F:\\slate\\easteduCompoents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1611297672593},{"path":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1611297676370},{"path":"F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1611297672218},{"path":"F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js","mtime":1599723087186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL3JlZ2VuZXJhdG9yIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGVudGVyTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmVudGVyTW9kdWxlIDogdW5kZWZpbmVkOwogIGVudGVyTW9kdWxlICYmIGVudGVyTW9kdWxlKG1vZHVsZSk7Cn0pKCk7Cgp2YXIgX19zaWduYXR1cmVfXyA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbFsiZGVmYXVsdCJdLnNpZ25hdHVyZSA6IGZ1bmN0aW9uIChhKSB7CiAgcmV0dXJuIGE7Cn07CgppbXBvcnQgcmVxdWVzdCBmcm9tICcuL3JlcXVlc3QnOyAvLyDmj5DkuqTnrb7lkI3mlbDmja7vvIzov5Tlm57nrb7lkI3kv6Hmga/vvIgy5q2l5ZCI5LiA77yJCgpleHBvcnQgZnVuY3Rpb24gcG9zdFNpZ25hdHVyZXMoX3gsIF94MiwgX3gzKSB7CiAgcmV0dXJuIF9wb3N0U2lnbmF0dXJlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8vIOaPkOS6pOaWh+S7tuaVsOaNru+8jOabtOaWsOaVsOaNrgoKZnVuY3Rpb24gX3Bvc3RTaWduYXR1cmVzKCkgewogIF9wb3N0U2lnbmF0dXJlcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocGFyYW1zLCB1cmwsIHRva2VuKSB7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXF1ZXN0KCIiLmNvbmNhdCh1cmwsICIvZWJvb2svYXBpL2FkbWluL2Vib29rL2ZpbGU/dmVyc2lvbj0xLjAiKSwgewogICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgIGRhdGE6IHBhcmFtcywKICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfcG9zdFNpZ25hdHVyZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKaWYgKHR5cGVvZiBwb3N0U2lnbmF0dXJlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcG9zdFNpZ25hdHVyZXMgJiYgcG9zdFNpZ25hdHVyZXMgPT09IE9iamVjdChwb3N0U2lnbmF0dXJlcykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShwb3N0U2lnbmF0dXJlcykpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkocG9zdFNpZ25hdHVyZXMsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJwb3N0U2lnbmF0dXJlcyIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxpbmRleC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUZpbGUoX3g0LCBfeDUsIF94NikgewogIHJldHVybiBfdXBkYXRlRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfdXBkYXRlRmlsZSgpIHsKICBfdXBkYXRlRmlsZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHBhcmFtcywgdXJsLCB0b2tlbikgewogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXF1ZXN0KCIiLmNvbmNhdCh1cmwsICIvZWJvb2svYXBpL2FkbWluL2Vib29rL2ZpbGU/ZmlsZUlkPSIpLmNvbmNhdChwYXJhbXMuZmlsZUlkLCAiJnZlcnNpb249MS4wIiksIHsKICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLAogICAgICAgICAgICAgIGRhdGE6IHt9LAogICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX3VwZGF0ZUZpbGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKaWYgKHR5cGVvZiB1cGRhdGVGaWxlICE9PSAndW5kZWZpbmVkJyAmJiB1cGRhdGVGaWxlICYmIHVwZGF0ZUZpbGUgPT09IE9iamVjdCh1cGRhdGVGaWxlKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHVwZGF0ZUZpbGUpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHVwZGF0ZUZpbGUsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJ1cGRhdGVGaWxlIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXHVwbG9hZEZpbGVcXHNlcnZlcnNcXGluZGV4LnRzIgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcihwb3N0U2lnbmF0dXJlcywgInBvc3RTaWduYXR1cmVzIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxpbmRleC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHVwZGF0ZUZpbGUsICJ1cGRhdGVGaWxlIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxpbmRleC50cyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["F:/slate/easteduCompoents/src/uploadFile/servers/index.ts"],"names":["request","postSignatures","params","url","token","method","data","updateFile","fileId"],"mappings":";;;;;;;;;;;;AACA,OAAOA,OAAP,MAAoB,WAApB,C,CACA;;AACA,gBAAsBC,cAAtB;AAAA;AAAA,C,CAeA;;;6EAfO,iBAA8BC,MAA9B,EAA2CC,GAA3C,EAAwDC,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA,6CAMIJ,OAAO,WAAIG,GAAJ,8CAAkD;AAC9DE,cAAAA,MAAM,EAAE,MADsD;AAE9DC,cAAAA,IAAI,EAAEJ,MAFwD;AAG9D;AACAE,cAAAA,KAAK,EAAEA;AAJuD,aAAlD,CANX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;AAgBP,gBAAsBG,UAAtB;AAAA;AAAA;;;yEAAO,kBAA0BL,MAA1B,EAAuCC,GAAvC,EAAoDC,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA,8CACIJ,OAAO,WAAIG,GAAJ,gDAA6CD,MAAM,CAACM,MAApD,mBAA0E;AACtFH,cAAAA,MAAM,EAAE,KAD8E;AAEtFC,cAAAA,IAAI,EAAE,EAFgF;AAGtF;AACAF,cAAAA,KAAK,EAAEA;AAJ+E,aAA1E,CADX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;;;;;0BAhBeH,c;0BAgBAM,U","sourcesContent":["\r\nimport request from './request';\r\n// 提交签名数据，返回签名信息（2步合一）\r\nexport async function postSignatures(params: any, url: string, token: string) {\r\n    // return request('javaUrl|file-service/v3/cloud/signatures', {\r\n    //     method: 'POST',\r\n    //     data: params,\r\n    // });\r\n  \r\n    return request(`${url}/ebook/api/admin/ebook/file?version=1.0`, {\r\n      method: 'POST',\r\n      data: params,\r\n      // @ts-ignore\r\n      token: token\r\n    });\r\n}\r\n\r\n\r\n// 提交文件数据，更新数据\r\nexport async function updateFile(params: any, url: string, token?: string) {\r\n    return request(`${url}/ebook/api/admin/ebook/file?fileId=${params.fileId}&version=1.0`, {\r\n      method: 'PUT',\r\n      data: {},\r\n      // @ts-ignore\r\n      token: token\r\n    });\r\n}"]}]}
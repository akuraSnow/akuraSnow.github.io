{"remainingRequest":"F:\\next\\akuraSnow.github.io\\node_modules\\thread-loader\\dist\\cjs.js??ref--11-1!F:\\next\\akuraSnow.github.io\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--11-2!F:\\next\\akuraSnow.github.io\\node_modules\\source-map-loader\\index.js!F:\\next\\akuraSnow.github.io\\src\\uploadFile\\servers\\request.ts","dependencies":[{"path":"F:\\next\\akuraSnow.github.io\\src\\uploadFile\\servers\\request.ts","mtime":1597627075134},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594630873110},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1594630874798},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1594630866664},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\source-map-loader\\index.js","mtime":1594630874806}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjpcXG5leHRcXGFrdXJhU25vdy5naXRodWIuaW9cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKLyoNCiAqIEBEZXNjcmlwdGlvbjogSW4gVXNlciBTZXR0aW5ncyBFZGl0DQogKiBAQXV0aG9yOiB5b3VyIG5hbWUNCiAqIEBEYXRlOiAyMDE5LTEwLTA5IDEzOjEzOjQ1DQogKiBATGFzdEVkaXRUaW1lOiAyMDE5LTExLTIyIDEzOjAzOjA1DQogKiBATGFzdEVkaXRvcnM6IFBsZWFzZSBzZXQgTGFzdEVkaXRvcnMNCiAqLwoKLyoqDQogKiByZXF1ZXN0IOe9kee7nOivt+axguW3peWFtw0KICog5pu06K+m57uG55qEIGFwaSDmlofmoaMIOiBodHRwczovL2dpdGh1Yi5jb20vdW1panMvdW1pLXJlcXVlc3QNCiAqLwppbXBvcnQgeyBleHRlbmQgfSBmcm9tICd1bWktcmVxdWVzdCc7Ci8qKg0KICog5byC5bi45aSE55CG56iL5bqPDQogKi8KCnZhciBlcnJvckhhbmRsZXIgPSBmdW5jdGlvbiBlcnJvckhhbmRsZXIoZXJyb3IpIHsKICB2YXIgcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSwKICAgICAgZGF0YSA9IGVycm9yLmRhdGE7CiAgcmV0dXJuIGRhdGE7Cn07Ci8qKg0KICog6YWN572ucmVxdWVzdOivt+axguaXtueahOm7mOiupOWPguaVsA0KICovCgoKdmFyIHJlcXVlc3QgPSBleHRlbmQoewogIGVycm9ySGFuZGxlcjogZXJyb3JIYW5kbGVyLAogIC8vIOm7mOiupOmUmeivr+WkhOeQhgogIHRpbWVvdXQ6IDEwMDAwLAogIC8vIOiuvue9rui2heaXtgogIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgLy8g6buY6K6k6K+35rGC5piv5ZCm5bim5LiKY29va2llCgp9KTsgLy8gcmVxdWVzdOaLpuaIquWZqCwg5pS55Y+YdXJsIOaIliBvcHRpb25zLgoKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKHVybCwgb3B0aW9ucykgewogIHZhciBjX3Rva2VuID0gb3B0aW9ucy50b2tlbjsKCiAgaWYgKGNfdG9rZW4pIHsKICAgIHZhciBoZWFkZXJzID0gewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgdXNlclRva2VuOiBjX3Rva2VuLAogICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBjX3Rva2VuIC8vICdBdXRob3JpemF0aW9uJzogJ2Jhc2ljIDEyMycKCiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgdXJsOiB1cmwsCiAgICAgIG9wdGlvbnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucyksIHt9LCB7CiAgICAgICAgaGVhZGVyczogaGVhZGVycwogICAgICB9KQogICAgfTsKICB9IGVsc2UgewogICAgdmFyIF9oZWFkZXJzID0gewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgdXNlclRva2VuOiBjX3Rva2VuCiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgdXJsOiB1cmwsCiAgICAgIG9wdGlvbnM6IF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMpCiAgICB9OwogIH0KfSk7IC8vIHJlc3BvbnNl5oum5oiq5ZmoLCDlpITnkIZyZXNwb25zZQovLyBAdHMtaWdub3JlCgpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlLCBvcHRpb25zKSB7CiAgdmFyIHRva2VuID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3VzZXJUb2tlbicpOwoKICBpZiAodG9rZW4pIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyVG9rZW4nLCB0b2tlbik7CiAgfQoKICByZXR1cm4gcmVzcG9uc2U7Cn0pOwp2YXIgX2RlZmF1bHQgPSByZXF1ZXN0OwpleHBvcnQgZGVmYXVsdCBfZGVmYXVsdDsKCmlmICh0eXBlb2YgcmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcgJiYgcmVxdWVzdCAmJiByZXF1ZXN0ID09PSBPYmplY3QocmVxdWVzdCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShyZXF1ZXN0KSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1ZXN0LCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAicmVxdWVzdCIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxyZXF1ZXN0LnRzIgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihlcnJvckhhbmRsZXIsICJlcnJvckhhbmRsZXIiLCAiRjpcXG5leHRcXGFrdXJhU25vdy5naXRodWIuaW9cXHNyY1xcdXBsb2FkRmlsZVxcc2VydmVyc1xccmVxdWVzdC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHJlcXVlc3QsICJyZXF1ZXN0IiwgIkY6XFxuZXh0XFxha3VyYVNub3cuZ2l0aHViLmlvXFxzcmNcXHVwbG9hZEZpbGVcXHNlcnZlcnNcXHJlcXVlc3QudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiRjpcXG5leHRcXGFrdXJhU25vdy5naXRodWIuaW9cXHNyY1xcdXBsb2FkRmlsZVxcc2VydmVyc1xccmVxdWVzdC50cyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["F:/next/akuraSnow.github.io/src/uploadFile/servers/request.ts"],"names":["extend","errorHandler","error","response","data","request","timeout","credentials","interceptors","use","url","options","c_token","token","headers","Accept","userToken","Authorization","get","localStorage","setItem"],"mappings":";;;;;;;;;;;AAAA;;;;;;;;AAOA;;;;AAIA,SAASA,MAAT,QAAuB,aAAvB;AAIA;;;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAA6C;AAAA,MACxDC,QADwD,GACrCD,KADqC,CACxDC,QADwD;AAAA,MAC9CC,IAD8C,GACrCF,KADqC,CAC9CE,IAD8C;AAGhE,SAAOA,IAAP;AACD,CAJD;AAMA;;;;;AAGA,IAAMC,OAAO,GAAGL,MAAM,CAAC;AACrBC,EAAAA,YAAY,EAAZA,YADqB;AACP;AACdK,EAAAA,OAAO,EAAE,KAFY;AAEL;AAChBC,EAAAA,WAAW,EAAE,SAHQ,CAGG;;AAHH,CAAD,CAAtB,C,CAMA;;AACAF,OAAO,CAACG,YAAR,CAAqBH,OAArB,CAA6BI,GAA7B,CAAiC,UAACC,GAAD,EAAcC,OAAd,EAA+B;AAE9D,MAAIC,OAAO,GAAGD,OAAO,CAACE,KAAtB;;AACA,MAAID,OAAJ,EAAa;AACX,QAAME,OAAO,GAAG;AACd,sBAAgB,kBADF;AAEdC,MAAAA,MAAM,EAAE,kBAFM;AAGdC,MAAAA,SAAS,EAAEJ,OAHG;AAIdK,MAAAA,aAAa,EAAE,YAAYL,OAJb,CAKd;;AALc,KAAhB;AAOA,WAAO;AACLF,MAAAA,GAAG,EAAEA,GADA;AAELC,MAAAA,OAAO,kCAAOA,OAAP;AAAgBG,QAAAA,OAAO,EAAEA;AAAzB;AAFF,KAAP;AAID,GAZD,MAYO;AACL,QAAMA,QAAO,GAAG;AACd,sBAAgB,kBADF;AAEdC,MAAAA,MAAM,EAAE,kBAFM;AAGdC,MAAAA,SAAS,EAAEJ;AAHG,KAAhB;AAKA,WAAO;AACLF,MAAAA,GAAG,EAAEA,GADA;AAELC,MAAAA,OAAO,oBAAOA,OAAP;AAFF,KAAP;AAID;AACF,CA1BD,E,CA4BA;AACA;;AACAN,OAAO,CAACG,YAAR,CAAqBL,QAArB,CAA8BM,GAA9B,CAAkC,UAACN,QAAD,EAAWQ,OAAX,EAAuB;AACvD,MAAIE,KAAK,GAAGV,QAAQ,CAACW,OAAT,CAAiBI,GAAjB,CAAqB,WAArB,CAAZ;;AACA,MAAIL,KAAJ,EAAW;AACTM,IAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCP,KAAlC;AACD;;AACD,SAAOV,QAAP;AACD,CAND;eAQeE,O;AAAf;;;;;;;;;;;;;;;;;;;;;;0BAtDMJ,Y;0BASAI,O","sourcesContent":["/*\r\n * @Description: In User Settings Edit\r\n * @Author: your name\r\n * @Date: 2019-10-09 13:13:45\r\n * @LastEditTime: 2019-11-22 13:03:05\r\n * @LastEditors: Please set LastEditors\r\n */\r\n/**\r\n * request 网络请求工具\r\n * 更详细的 api 文档\b: https://github.com/umijs/umi-request\r\n */\r\nimport { extend } from 'umi-request';\r\n\r\n\r\n\r\n/**\r\n * 异常处理程序\r\n */\r\nconst errorHandler = (error: { response: any, data:any }): any => {\r\n  const { response, data } = error;\r\n\r\n  return data;\r\n};\r\n\r\n/**\r\n * 配置request请求时的默认参数\r\n */\r\nconst request = extend({\r\n  errorHandler, // 默认错误处理\r\n  timeout: 10000, // 设置超时\r\n  credentials: 'include', // 默认请求是否带上cookie\r\n});\r\n\r\n// request拦截器, 改变url 或 options.\r\nrequest.interceptors.request.use((url: string, options: any) => {\r\n\r\n  let c_token = options.token;\r\n  if (c_token) {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      userToken: c_token,\r\n      Authorization: 'Bearer ' + c_token,\r\n      // 'Authorization': 'basic 123'\r\n    };\r\n    return {\r\n      url: url,\r\n      options: { ...options, headers: headers },\r\n    };\r\n  } else {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      userToken: c_token,\r\n    };\r\n    return {\r\n      url: url,\r\n      options: { ...options },\r\n    };\r\n  }\r\n});\r\n\r\n// response拦截器, 处理response\r\n// @ts-ignore\r\nrequest.interceptors.response.use((response, options) => {\r\n  let token = response.headers.get('userToken');\r\n  if (token) {\r\n    localStorage.setItem('userToken', token);\r\n  }\r\n  return response;\r\n});\r\n\r\nexport default request;\r\n"]}]}
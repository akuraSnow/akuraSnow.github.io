{"remainingRequest":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js??ref--11-1!F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--11-2!F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js!F:\\slate\\easteduCompoents\\src\\uploadFile\\servers\\request.ts","dependencies":[{"path":"F:\\slate\\easteduCompoents\\src\\uploadFile\\servers\\request.ts","mtime":1611298675828},{"path":"F:\\slate\\easteduCompoents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1611297672593},{"path":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1611297676370},{"path":"F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1611297672218},{"path":"F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js","mtime":1599723087186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qDQogKiBARGVzY3JpcHRpb246IEluIFVzZXIgU2V0dGluZ3MgRWRpdA0KICogQEF1dGhvcjogeW91ciBuYW1lDQogKiBARGF0ZTogMjAxOS0xMC0wOSAxMzoxMzo0NQ0KICogQExhc3RFZGl0VGltZTogMjAxOS0xMS0yMiAxMzowMzowNQ0KICogQExhc3RFZGl0b3JzOiBQbGVhc2Ugc2V0IExhc3RFZGl0b3JzDQogKi8KCi8qKg0KICogcmVxdWVzdCDnvZHnu5zor7fmsYLlt6XlhbcNCiAqIOabtOivpue7hueahCBhcGkg5paH5qGjCDogaHR0cHM6Ly9naXRodWIuY29tL3VtaWpzL3VtaS1yZXF1ZXN0DQogKi8KaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAndW1pLXJlcXVlc3QnOwovKioNCiAqIOW8guW4uOWkhOeQhueoi+W6jw0KICovCgp2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycm9yKSB7CiAgdmFyIHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UsCiAgICAgIGRhdGEgPSBlcnJvci5kYXRhOwogIHJldHVybiBkYXRhOwp9OwovKioNCiAqIOmFjee9rnJlcXVlc3Tor7fmsYLml7bnmoTpu5jorqTlj4LmlbANCiAqLwoKCnZhciByZXF1ZXN0ID0gZXh0ZW5kKHsKICBlcnJvckhhbmRsZXI6IGVycm9ySGFuZGxlciwKICAvLyDpu5jorqTplJnor6/lpITnkIYKICB0aW1lb3V0OiAxMDAwMCwKICAvLyDorr7nva7otoXml7YKICBjcmVkZW50aWFsczogJ2luY2x1ZGUnIC8vIOm7mOiupOivt+axguaYr+WQpuW4puS4imNvb2tpZQoKfSk7IC8vIHJlcXVlc3Tmi6bmiKrlmagsIOaUueWPmHVybCDmiJYgb3B0aW9ucy4KCnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHsKICB2YXIgY190b2tlbiA9IG9wdGlvbnMudG9rZW47CgogIGlmIChjX3Rva2VuKSB7CiAgICB2YXIgaGVhZGVycyA9IHsKICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgIHVzZXJUb2tlbjogY190b2tlbiwKICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgY190b2tlbiAvLyAnQXV0aG9yaXphdGlvbic6ICdiYXNpYyAxMjMnCgogICAgfTsKICAgIHJldHVybiB7CiAgICAgIHVybDogdXJsLAogICAgICBvcHRpb25zOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMpLCB7fSwgewogICAgICAgIGhlYWRlcnM6IGhlYWRlcnMKICAgICAgfSkKICAgIH07CiAgfSBlbHNlIHsKICAgIHZhciBfaGVhZGVycyA9IHsKICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgIHVzZXJUb2tlbjogY190b2tlbgogICAgfTsKICAgIHJldHVybiB7CiAgICAgIHVybDogdXJsLAogICAgICBvcHRpb25zOiBfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zKQogICAgfTsKICB9Cn0pOyAvLyByZXNwb25zZeaLpuaIquWZqCwg5aSE55CGcmVzcG9uc2UKLy8gQHRzLWlnbm9yZQoKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSwgb3B0aW9ucykgewogIHZhciB0b2tlbiA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd1c2VyVG9rZW4nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclRva2VuJywgdG9rZW4pOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlOwp9KTsKdmFyIF9kZWZhdWx0ID0gcmVxdWVzdDsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CgppZiAodHlwZW9mIHJlcXVlc3QgIT09ICd1bmRlZmluZWQnICYmIHJlcXVlc3QgJiYgcmVxdWVzdCA9PT0gT2JqZWN0KHJlcXVlc3QpICYmIE9iamVjdC5pc0V4dGVuc2libGUocmVxdWVzdCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWVzdCwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogInJlcXVlc3QiLAogICAgICBmaWxlbmFtZTogInNyY1xcdXBsb2FkRmlsZVxcc2VydmVyc1xccmVxdWVzdC50cyIKICAgIH0KICB9KTsKfQoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZXJyb3JIYW5kbGVyLCAiZXJyb3JIYW5kbGVyIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxyZXF1ZXN0LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIocmVxdWVzdCwgInJlcXVlc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXHVwbG9hZEZpbGVcXHNlcnZlcnNcXHJlcXVlc3QudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXHVwbG9hZEZpbGVcXHNlcnZlcnNcXHJlcXVlc3QudHMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["F:/slate/easteduCompoents/src/uploadFile/servers/request.ts"],"names":["extend","errorHandler","error","response","data","request","timeout","credentials","interceptors","use","url","options","c_token","token","headers","Accept","userToken","Authorization","get","localStorage","setItem"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,SAASA,MAAT,QAAuB,aAAvB;AAIA;AACA;AACA;;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAA6C;AAAA,MACxDC,QADwD,GACrCD,KADqC,CACxDC,QADwD;AAAA,MAC9CC,IAD8C,GACrCF,KADqC,CAC9CE,IAD8C;AAGhE,SAAOA,IAAP;AACD,CAJD;AAMA;AACA;AACA;;;AACA,IAAMC,OAAO,GAAGL,MAAM,CAAC;AACrBC,EAAAA,YAAY,EAAZA,YADqB;AACP;AACdK,EAAAA,OAAO,EAAE,KAFY;AAEL;AAChBC,EAAAA,WAAW,EAAE,SAHQ,CAGG;;AAHH,CAAD,CAAtB,C,CAMA;;AACAF,OAAO,CAACG,YAAR,CAAqBH,OAArB,CAA6BI,GAA7B,CAAiC,UAACC,GAAD,EAAcC,OAAd,EAA+B;AAE9D,MAAIC,OAAO,GAAGD,OAAO,CAACE,KAAtB;;AACA,MAAID,OAAJ,EAAa;AACX,QAAME,OAAO,GAAG;AACd,sBAAgB,kBADF;AAEdC,MAAAA,MAAM,EAAE,kBAFM;AAGdC,MAAAA,SAAS,EAAEJ,OAHG;AAIdK,MAAAA,aAAa,EAAE,YAAYL,OAJb,CAKd;;AALc,KAAhB;AAOA,WAAO;AACLF,MAAAA,GAAG,EAAEA,GADA;AAELC,MAAAA,OAAO,kCAAOA,OAAP;AAAgBG,QAAAA,OAAO,EAAEA;AAAzB;AAFF,KAAP;AAID,GAZD,MAYO;AACL,QAAMA,QAAO,GAAG;AACd,sBAAgB,kBADF;AAEdC,MAAAA,MAAM,EAAE,kBAFM;AAGdC,MAAAA,SAAS,EAAEJ;AAHG,KAAhB;AAKA,WAAO;AACLF,MAAAA,GAAG,EAAEA,GADA;AAELC,MAAAA,OAAO,oBAAOA,OAAP;AAFF,KAAP;AAID;AACF,CA1BD,E,CA4BA;AACA;;AACAN,OAAO,CAACG,YAAR,CAAqBL,QAArB,CAA8BM,GAA9B,CAAkC,UAACN,QAAD,EAAWQ,OAAX,EAAuB;AACvD,MAAIE,KAAK,GAAGV,QAAQ,CAACW,OAAT,CAAiBI,GAAjB,CAAqB,WAArB,CAAZ;;AACA,MAAIL,KAAJ,EAAW;AACTM,IAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCP,KAAlC;AACD;;AACD,SAAOV,QAAP;AACD,CAND;eAQeE,O;AAAf;;;;;;;;;;;;;;;;;;;;;;0BAtDMJ,Y;0BASAI,O","sourcesContent":["/*\r\n * @Description: In User Settings Edit\r\n * @Author: your name\r\n * @Date: 2019-10-09 13:13:45\r\n * @LastEditTime: 2019-11-22 13:03:05\r\n * @LastEditors: Please set LastEditors\r\n */\r\n/**\r\n * request 网络请求工具\r\n * 更详细的 api 文档\b: https://github.com/umijs/umi-request\r\n */\r\nimport { extend } from 'umi-request';\r\n\r\n\r\n\r\n/**\r\n * 异常处理程序\r\n */\r\nconst errorHandler = (error: { response: any, data:any }): any => {\r\n  const { response, data } = error;\r\n\r\n  return data;\r\n};\r\n\r\n/**\r\n * 配置request请求时的默认参数\r\n */\r\nconst request = extend({\r\n  errorHandler, // 默认错误处理\r\n  timeout: 10000, // 设置超时\r\n  credentials: 'include', // 默认请求是否带上cookie\r\n});\r\n\r\n// request拦截器, 改变url 或 options.\r\nrequest.interceptors.request.use((url: string, options: any) => {\r\n\r\n  let c_token = options.token;\r\n  if (c_token) {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      userToken: c_token,\r\n      Authorization: 'Bearer ' + c_token,\r\n      // 'Authorization': 'basic 123'\r\n    };\r\n    return {\r\n      url: url,\r\n      options: { ...options, headers: headers },\r\n    };\r\n  } else {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      userToken: c_token,\r\n    };\r\n    return {\r\n      url: url,\r\n      options: { ...options },\r\n    };\r\n  }\r\n});\r\n\r\n// response拦截器, 处理response\r\n// @ts-ignore\r\nrequest.interceptors.response.use((response, options) => {\r\n  let token = response.headers.get('userToken');\r\n  if (token) {\r\n    localStorage.setItem('userToken', token);\r\n  }\r\n  return response;\r\n});\r\n\r\nexport default request;\r\n"]}]}
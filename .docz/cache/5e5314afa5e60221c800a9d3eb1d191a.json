{"remainingRequest":"F:\\next\\akuraSnow.github.io\\node_modules\\thread-loader\\dist\\cjs.js??ref--11-1!F:\\next\\akuraSnow.github.io\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--11-2!F:\\next\\akuraSnow.github.io\\node_modules\\source-map-loader\\index.js!F:\\next\\akuraSnow.github.io\\src\\uploadFile\\servers\\index.ts","dependencies":[{"path":"F:\\next\\akuraSnow.github.io\\src\\uploadFile\\servers\\index.ts","mtime":1597627065286},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594630873110},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1594630874798},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1594630866664},{"path":"F:\\next\\akuraSnow.github.io\\node_modules\\source-map-loader\\index.js","mtime":1594630874806}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRjpcXG5leHRcXGFrdXJhU25vdy5naXRodWIuaW9cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjpcXG5leHRcXGFrdXJhU25vdy5naXRodWIuaW9cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi9yZXF1ZXN0JzsgLy8g5o+Q5Lqk562+5ZCN5pWw5o2u77yM6L+U5Zue562+5ZCN5L+h5oGv77yIMuatpeWQiOS4gO+8iQoKZXhwb3J0IGZ1bmN0aW9uIHBvc3RTaWduYXR1cmVzKF94LCBfeDIsIF94MykgewogIHJldHVybiBfcG9zdFNpZ25hdHVyZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyDmj5DkuqTmlofku7bmlbDmja7vvIzmm7TmlrDmlbDmja4KCmZ1bmN0aW9uIF9wb3N0U2lnbmF0dXJlcygpIHsKICBfcG9zdFNpZ25hdHVyZXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBhcmFtcywgdXJsLCB0b2tlbikgewogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVxdWVzdCgiIi5jb25jYXQodXJsLCAiL2Vib29rL2FwaS9hZG1pbi9lYm9vay9maWxlP3ZlcnNpb249MS4wIiksIHsKICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICBkYXRhOiBwYXJhbXMsCiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgICAgIHRva2VuOiB0b2tlbgogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX3Bvc3RTaWduYXR1cmVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmlmICh0eXBlb2YgcG9zdFNpZ25hdHVyZXMgIT09ICd1bmRlZmluZWQnICYmIHBvc3RTaWduYXR1cmVzICYmIHBvc3RTaWduYXR1cmVzID09PSBPYmplY3QocG9zdFNpZ25hdHVyZXMpICYmIE9iamVjdC5pc0V4dGVuc2libGUocG9zdFNpZ25hdHVyZXMpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBvc3RTaWduYXR1cmVzLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAicG9zdFNpZ25hdHVyZXMiLAogICAgICBmaWxlbmFtZTogInNyY1xcdXBsb2FkRmlsZVxcc2VydmVyc1xcaW5kZXgudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVGaWxlKF94NCwgX3g1LCBfeDYpIHsKICByZXR1cm4gX3VwZGF0ZUZpbGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3VwZGF0ZUZpbGUoKSB7CiAgX3VwZGF0ZUZpbGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwYXJhbXMsIHVybCwgdG9rZW4pIHsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVxdWVzdCgiIi5jb25jYXQodXJsLCAiL2Vib29rL2FwaS9hZG1pbi9lYm9vay9maWxlP2ZpbGVJZD0iKS5jb25jYXQocGFyYW1zLmZpbGVJZCwgIiZ2ZXJzaW9uPTEuMCIpLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICAgICAgICBkYXRhOiB7fSwKICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CiAgcmV0dXJuIF91cGRhdGVGaWxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmlmICh0eXBlb2YgdXBkYXRlRmlsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdXBkYXRlRmlsZSAmJiB1cGRhdGVGaWxlID09PSBPYmplY3QodXBkYXRlRmlsZSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh1cGRhdGVGaWxlKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1cGRhdGVGaWxlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAidXBkYXRlRmlsZSIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxpbmRleC50cyIKICAgIH0KICB9KTsKfQoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIocG9zdFNpZ25hdHVyZXMsICJwb3N0U2lnbmF0dXJlcyIsICJGOlxcbmV4dFxcYWt1cmFTbm93LmdpdGh1Yi5pb1xcc3JjXFx1cGxvYWRGaWxlXFxzZXJ2ZXJzXFxpbmRleC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHVwZGF0ZUZpbGUsICJ1cGRhdGVGaWxlIiwgIkY6XFxuZXh0XFxha3VyYVNub3cuZ2l0aHViLmlvXFxzcmNcXHVwbG9hZEZpbGVcXHNlcnZlcnNcXGluZGV4LnRzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["F:/next/akuraSnow.github.io/src/uploadFile/servers/index.ts"],"names":["request","postSignatures","params","url","token","method","data","updateFile","fileId"],"mappings":";;;;;;;;;;;;AACA,OAAOA,OAAP,MAAoB,WAApB,C,CACA;;AACA,gBAAsBC,cAAtB;AAAA;AAAA,C,CAeA;;;6EAfO,iBAA8BC,MAA9B,EAA2CC,GAA3C,EAAwDC,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA,6CAMIJ,OAAO,WAAIG,GAAJ,8CAAkD;AAC9DE,cAAAA,MAAM,EAAE,MADsD;AAE9DC,cAAAA,IAAI,EAAEJ,MAFwD;AAG9D;AACAE,cAAAA,KAAK,EAAEA;AAJuD,aAAlD,CANX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;AAgBP,gBAAsBG,UAAtB;AAAA;AAAA;;;yEAAO,kBAA0BL,MAA1B,EAAuCC,GAAvC,EAAoDC,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA,8CACIJ,OAAO,WAAIG,GAAJ,gDAA6CD,MAAM,CAACM,MAApD,mBAA0E;AACtFH,cAAAA,MAAM,EAAE,KAD8E;AAEtFC,cAAAA,IAAI,EAAE,EAFgF;AAGtF;AACAF,cAAAA,KAAK,EAAEA;AAJ+E,aAA1E,CADX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;;;;;0BAhBeH,c;0BAgBAM,U","sourcesContent":["\r\nimport request from './request';\r\n// 提交签名数据，返回签名信息（2步合一）\r\nexport async function postSignatures(params: any, url: string, token: string) {\r\n    // return request('javaUrl|file-service/v3/cloud/signatures', {\r\n    //     method: 'POST',\r\n    //     data: params,\r\n    // });\r\n  \r\n    return request(`${url}/ebook/api/admin/ebook/file?version=1.0`, {\r\n      method: 'POST',\r\n      data: params,\r\n      // @ts-ignore\r\n      token: token\r\n    });\r\n}\r\n\r\n\r\n// 提交文件数据，更新数据\r\nexport async function updateFile(params: any, url: string, token?: string) {\r\n    return request(`${url}/ebook/api/admin/ebook/file?fileId=${params.fileId}&version=1.0`, {\r\n      method: 'PUT',\r\n      data: {},\r\n      // @ts-ignore\r\n      token: token\r\n    });\r\n}"]}]}
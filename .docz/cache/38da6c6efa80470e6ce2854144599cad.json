{"remainingRequest":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js??ref--11-1!F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--11-2!F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js!F:\\slate\\easteduCompoents\\src\\QuestionEditor\\editor\\client.ts","dependencies":[{"path":"F:\\slate\\easteduCompoents\\src\\QuestionEditor\\editor\\client.ts","mtime":1611712276640},{"path":"F:\\slate\\easteduCompoents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1611297672593},{"path":"F:\\slate\\easteduCompoents\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1611297676370},{"path":"F:\\slate\\easteduCompoents\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1611297672218},{"path":"F:\\slate\\easteduCompoents\\node_modules\\source-map-loader\\index.js","mtime":1599723087186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCB7IGluaXRNYXRoamF4Q29uZmlnIH0gZnJvbSAnLi4vLi4vc2hvd1F1ZXN0aW9uL01hdGhDb25maWcnOwppbml0TWF0aGpheENvbmZpZygpOyAvLyBpbXBvcnQgeyBUaXBzIH0gZnJvbSAnLi4vaW5kZXgnOwoKaW1wb3J0IHsgVGlwcyB9IGZyb20gJy4uLy4uL01lc3NhZ2VUaXBzL2luZGV4JzsKaW1wb3J0IHsgYm9sZCwgY2VudGVyQWxpZ25tZW50LCBjbGVhblVwLCBkaXNvcmRlciwgZm9ybWF0TWF0Y2gsIEl0YWxpYywgbGVmdEFsaWdubWVudCwgb3JkZXIsIHBpY3R1cmUsIHBpbnlpbiwgcG9pbnQsIHJpZ2h0QWxpZ25tZW50LCBzdHJpa2VvdXQsIHN1YnNjcmlwdCwgc3VwZXJzY3JpcHQsIHN5bWJvbCwgdGV4dEluZGVudCwgdHJpYW5nbGUsIHVuZGVybGluZSwgdmlkZW8sIHdvcmRzcGFjZSwgbGluZVNwYWNlLCBsb3dlclRyaWFuZ2xlIH0gZnJvbSAnLi90b29sYmFySWNvbic7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmV4cG9ydCB2YXIgY2hhbmdlSnNvbiA9IGZ1bmN0aW9uIGNoYW5nZUpzb24oanNvbikgewogIHZhciBpbml0VmFsID0gW107CiAgdmFyIE51bWJlcmVkTGlzdE9iaiA9IHt9OwoKICBmb3IgKHZhciBrZXkgaW4ganNvbikgewogICAgaWYgKGpzb24uaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlbCA9IGpzb25ba2V5XS5mcmFnbWVudHM7CiAgICAgICAgdmFyIGNoaWxkcmVuID0gW107IC8vIOa3u+WKoOauteiQveagt+W8jwoKICAgICAgICB2YXIgc3R5bGVzT2JqID0ge307CiAgICAgICAgdmFyIGlzVmlkZW9JdGVtID0gZmFsc2U7CiAgICAgICAgZWwuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgZWxlbWVudC5jb250ZW50ID0gZWxlbWVudC5jb250ZW50ID8gZWxlbWVudC5jb250ZW50IDogJyc7CgogICAgICAgICAgaWYgKGVsZW1lbnQuY29udGVudCAhPT0gIlx1MjAwQiIpIHsKICAgICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgICB2YXIgb2JqZWN0ID0gZWxlbWVudC5zdHlsZXM7CiAgICAgICAgICAgIG9iai50ZXh0ID0gZWxlbWVudC5jb250ZW50OwoKICAgICAgICAgICAgZm9yICh2YXIgX2tleSBpbiBvYmplY3QpIHsKICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KF9rZXkpKSB7CiAgICAgICAgICAgICAgICB2YXIgX2VsID0gb2JqZWN0W19rZXldOwoKICAgICAgICAgICAgICAgIGlmIChfZWwuaW5kZXhPZignQ29sb3InKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gX2VsLnNwbGl0KCdDb2xvcicpWzFdOwoKICAgICAgICAgICAgICAgICAgb2JqWydjb2xvciddID0gIiMiLmNvbmNhdChjb2xvcik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9lbC5pbmRleE9mKCdXb3Jkc3BhY2UnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgdmFyIFdvcmRzcGFjZSA9IF9lbC5zcGxpdCgnIycpWzFdOwoKICAgICAgICAgICAgICAgICAgb2JqWydXb3Jkc3BhY2UnXSA9ICIiLmNvbmNhdChXb3Jkc3BhY2UpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfZWwuaW5kZXhPZignRm9udFNpemUnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgdmFyIEZvbnRTaXplID0gX2VsLnNwbGl0KCdGb250U2l6ZScpWzFdOwoKICAgICAgICAgICAgICAgICAgb2JqWydGb250U2l6ZSddID0gIiIuY29uY2F0KEZvbnRTaXplKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2VsLmluZGV4T2YoJ0ZvbnQnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgdmFyIEZvbnQgPSBfZWwuc3BsaXQoJ0ZvbnQnKVsxXTsKCiAgICAgICAgICAgICAgICAgIG9ialsnRm9udCddID0gIiIuY29uY2F0KEZvbnQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgb2JqW19lbF0gPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGVsZW1lbnQubWVkaWFUeXBlID09PSAnSU1BR0UnIHx8IGVsZW1lbnQubWVkaWFUeXBlID09PSAnRk9STVVMQScpIHsKICAgICAgICAgICAgICBvYmogPSB7CiAgICAgICAgICAgICAgICB0eXBlOiAnbWVudGlvbicsCiAgICAgICAgICAgICAgICBtZWRpYVR5cGU6IGVsZW1lbnQubWVkaWFUeXBlLAogICAgICAgICAgICAgICAgY2hhcmFjdGVyOiBlbGVtZW50LmNvbnRlbnQsCiAgICAgICAgICAgICAgICB0YWc6IFN0cmluZyhNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKCdcLicsICcnKSwKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbewogICAgICAgICAgICAgICAgICB0ZXh0OiAnSU1BR0UnLAogICAgICAgICAgICAgICAgICBtYXJrOiBbXQogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBfb2JqZWN0ID0gZWxlbWVudC5zdHlsZXM7IC8vIOa3u+WKoOWbvueJh+eahOWuveW6puWSjOe8qeaUvgoKICAgICAgICAgICAgICBmb3IgKHZhciBfa2V5MiBpbiBfb2JqZWN0KSB7CiAgICAgICAgICAgICAgICBpZiAoX29iamVjdC5oYXNPd25Qcm9wZXJ0eShfa2V5MikpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9lbDIgPSBfb2JqZWN0W19rZXkyXTsKCiAgICAgICAgICAgICAgICAgIGlmIChfZWwyLmluZGV4T2YoJ3dpZHRoJykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gX2VsMi5zcGxpdCgnIycpWzFdOwoKICAgICAgICAgICAgICAgICAgICBvYmpbJ3dpZHRoJ10gPSB3aWR0aDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9lbDIuaW5kZXhPZignc2NhbGUnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBfZWwyLnNwbGl0KCcjJylbMV07CgogICAgICAgICAgICAgICAgICAgIG9ialsnc2NhbGUnXSA9IHNjYWxlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHsKICAgICAgICAgICAgICAgIHRleHQ6ICJcdTIwMEIiLAogICAgICAgICAgICAgICAgdHlwZTogJ3NwYWNlJywKICAgICAgICAgICAgICAgIHRhZzogU3RyaW5nKE1hdGgucmFuZG9tKCkpLnJlcGxhY2UoJ1wuJywgJycpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChvYmopOwogICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goewogICAgICAgICAgICAgICAgdGV4dDogJycsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3BhY2UnLAogICAgICAgICAgICAgICAgdGFnOiBTdHJpbmcoTWF0aC5yYW5kb20oKSkucmVwbGFjZSgnXC4nLCAnJykKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lm1lZGlhVHlwZSAhPT0gJ0FVRElPJykgewogICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gob2JqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpc1ZpZGVvSXRlbSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAoanNvbltrZXldLnN0eWxlcyB8fCBbXSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICB2YXIgc3R5bGVJdGVtID0gaXRlbS5zcGxpdCgnIycpOwogICAgICAgICAgc3R5bGVzT2JqW3N0eWxlSXRlbVswXV0gPSBzdHlsZUl0ZW1bMV07CiAgICAgICAgfSk7CgogICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuaYr+aOkuW6jwogICAgICAgICAgdmFyIGhhc051bWJlcmVkTGlzdCA9IChqc29uW2tleV0uc3R5bGVzIHx8IFtdKS5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuaW5jbHVkZXMoJ051bWJlcmVkTGlzdCcpOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGhhc051bWJlcmVkTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgaW5pdFZhbC5wdXNoKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiwKICAgICAgICAgICAgICB0eXBlOiBqc29uW2tleV0uYWxpZ25tZW50LAogICAgICAgICAgICAgIHN0eWxlczoganNvbltrZXldLnN0eWxlcyB8fCBbXQogICAgICAgICAgICB9LCBzdHlsZXNPYmopKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciB0eXBlID0gaGFzTnVtYmVyZWRMaXN0WzBdLnNwbGl0KCcjJyk7CiAgICAgICAgICAgIGRlbGV0ZSBzdHlsZXNPYmouTnVtYmVyZWRMaXN0OwogICAgICAgICAgICB2YXIgc3R5bGVzID0gKGpzb25ba2V5XS5zdHlsZXMgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiAhZS5pbmNsdWRlcygnTnVtYmVyZWRMaXN0Jyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKE51bWJlcmVkTGlzdE9ialtoYXNOdW1iZXJlZExpc3RbMF1dID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBpbml0VmFsLnB1c2goewogICAgICAgICAgICAgICAgTnVtYmVyZWRMaXN0OiB0eXBlWzFdLAogICAgICAgICAgICAgICAgY2hpbGRyZW46IFtfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgTGlzdEl0ZW06IHRydWUsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgdHlwZToganNvbltrZXldLmFsaWdubWVudCwKICAgICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZXMKICAgICAgICAgICAgICAgIH0sIHN0eWxlc09iaildCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgTnVtYmVyZWRMaXN0T2JqW2hhc051bWJlcmVkTGlzdFswXV0gPSBpbml0VmFsLmxlbmd0aCAtIDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaW5pdFZhbFtOdW1iZXJlZExpc3RPYmpbaGFzTnVtYmVyZWRMaXN0WzBdXV0uY2hpbGRyZW4ucHVzaChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiwKICAgICAgICAgICAgICAgIExpc3RJdGVtOiB0cnVlLAogICAgICAgICAgICAgICAgdHlwZToganNvbltrZXldLmFsaWdubWVudCwKICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVzCiAgICAgICAgICAgICAgfSwgc3R5bGVzT2JqKSk7CiAgICAgICAgICAgICAgTnVtYmVyZWRMaXN0T2JqW2hhc051bWJlcmVkTGlzdFswXV0gPSBpbml0VmFsLmxlbmd0aCAtIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKCFpc1ZpZGVvSXRlbSkgewogICAgICAgICAgaW5pdFZhbC5wdXNoKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBjaGlsZHJlbjogW3sKICAgICAgICAgICAgICB0ZXh0OiAnJwogICAgICAgICAgICB9XSwKICAgICAgICAgICAgdHlwZToganNvbltrZXldLmFsaWdubWVudCwKICAgICAgICAgICAgc3R5bGVzOiBqc29uW2tleV0uc3R5bGVzIHx8IFtdCiAgICAgICAgICB9LCBzdHlsZXNPYmopKTsKICAgICAgICB9CiAgICAgIH0pKCk7CiAgICB9CiAgfSAvLyDlvZPmnIDlkI7mmK/lm77niYfmiJbogIXlhazlvI/nmoTml7blgJnvvIzlop7liqDnqbrmoLwKCgogIHZhciBsYXN0Q2hpbGRyZW4gPSBpbml0VmFsLmxlbmd0aCAhPT0gMCAmJiBpbml0VmFsW2luaXRWYWwubGVuZ3RoIC0gMV0uY2hpbGRyZW47CgogIGlmIChsYXN0Q2hpbGRyZW4gJiYgbGFzdENoaWxkcmVuLmxlbmd0aCA+IDAgJiYgbGFzdENoaWxkcmVuW2xhc3RDaGlsZHJlbi5sZW5ndGggLSAxXS50eXBlID09PSAnc3BhY2UnKSB7CiAgICBpbml0VmFsW2luaXRWYWwubGVuZ3RoIC0gMV0uY2hpbGRyZW4ucHVzaCh7CiAgICAgIHRleHQ6ICcgJywKICAgICAgaXNFbmQ6IHRydWUsCiAgICAgIHR5cGU6ICcnCiAgICB9KTsKICB9CgogIGlmIChpbml0VmFsLmxlbmd0aCA9PT0gMCkgewogICAgaW5pdFZhbCA9IFt7CiAgICAgIGNoaWxkcmVuOiBbewogICAgICAgIHRleHQ6ICcnCiAgICAgIH1dLAogICAgICB0eXBlOiAnTGVmdCcKICAgIH1dOwogIH0KCiAgcmV0dXJuIGluaXRWYWw7Cn07CgppZiAodHlwZW9mIGNoYW5nZUpzb24gIT09ICd1bmRlZmluZWQnICYmIGNoYW5nZUpzb24gJiYgY2hhbmdlSnNvbiA9PT0gT2JqZWN0KGNoYW5nZUpzb24pICYmIE9iamVjdC5pc0V4dGVuc2libGUoY2hhbmdlSnNvbikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2hhbmdlSnNvbiwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImNoYW5nZUpzb24iLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0VmlkZW9VcmwoaXRlbSkgewogIHZhciB1cmxPYmogPSB7CiAgICBjb250ZW50OiAnJwogIH07CgogIF8ubWFwKGl0ZW0uc3RlbSwgZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIF8ubWFwKGVsZW1lbnQuZnJhZ21lbnRzLCBmdW5jdGlvbiAoZWwpIHsKICAgICAgaWYgKGVsLm1lZGlhVHlwZSA9PT0gJ0FVRElPJykgewogICAgICAgIHVybE9iai5jb250ZW50ID0gZWwuY29udGVudDsKICAgICAgfQogICAgfSk7CiAgfSk7CgogIGlmIChpdGVtLnF1ZXN0aW9ucyAmJiBpdGVtLnF1ZXN0aW9ucy5sZW5ndGggPiAwKSB7CiAgICB2YXIgcXVlc3Rpb25zID0ge307CgogICAgXy5tYXAoaXRlbS5xdWVzdGlvbnMsIGZ1bmN0aW9uIChlbCwgaW5kZXgpIHsKICAgICAgcXVlc3Rpb25zW2luZGV4XSA9IGdldFZpZGVvVXJsKGVsKTsKICAgIH0pOwoKICAgIHVybE9iai5xdWVzdGlvbnMgPSBxdWVzdGlvbnM7CiAgfQoKICByZXR1cm4gdXJsT2JqOwp9CgppZiAodHlwZW9mIGdldFZpZGVvVXJsICE9PSAndW5kZWZpbmVkJyAmJiBnZXRWaWRlb1VybCAmJiBnZXRWaWRlb1VybCA9PT0gT2JqZWN0KGdldFZpZGVvVXJsKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGdldFZpZGVvVXJsKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXRWaWRlb1VybCwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImdldFZpZGVvVXJsIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKdmFyIGNsYXNzTmFtZUxpc3QgPSBbJ0JvbGQnLCAnVW5kZXJsaW5lV2F2ZScsICdJdGFsaWMnLCAnVW5kZXJsaW5lRG90dGVkJywgJ1VuZGVybGluZURvdWJsZScsICdWZXJ0QWxpZ25TdXBlcnNjcmlwdCcsICdWZXJ0QWxpZ25TdWJzY3JpcHQnLCAnVW5kZXJsaW5lU2luZ2xlJywgJ1N0cmlrZScsICdFbXBoYXNpc0RvdCddOwp2YXIgYmxvY2tTdHlsZUxpc3QgPSBbJ0xpbmVTcGFjZScsICdUZXh0SW5kZW50J107CmV4cG9ydCB2YXIgY2hhbmdlSHRtbCA9IGZ1bmN0aW9uIGNoYW5nZUh0bWwoanNvbikgewogIHZhciBlZGl0b3JKc29uID0gW107CgogIGZvciAodmFyIGtleSBpbiBqc29uKSB7CiAgICBpZiAoanNvbi5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIHZhciBlbGVtZW50ID0ganNvbltrZXldLmNoaWxkcmVuOyAvLyBjb25zb2xlLmxvZyhlbGVtZW50KTsKICAgICAgLy8g5aaC5p6c5pyJ5o6S5bqP55qE5pWw5o2uCgogICAgICBpZiAoIWpzb25ba2V5XS5OdW1iZXJlZExpc3QpIHsKICAgICAgICBlZGl0b3JKc29uID0gZ2V0ZnJhZ21lbnRzKGpzb24sIGtleSwgZWRpdG9ySnNvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KICAgICAgICBmb3IgKHZhciBpIGluIGpzb25ba2V5XS5jaGlsZHJlbikgewogICAgICAgICAgaWYgKGpzb25ba2V5XS5jaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgICAgICB2YXIgX2VsZW1lbnQgPSBqc29uW2tleV0uY2hpbGRyZW5ba2V5XTsKICAgICAgICAgICAgZWRpdG9ySnNvbiA9IGdldGZyYWdtZW50cyhqc29uW2tleV0uY2hpbGRyZW4sIGksIGVkaXRvckpzb24sIGpzb25ba2V5XS5OdW1iZXJlZExpc3QsIGtleSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZWRpdG9ySnNvbjsKfTsKCmlmICh0eXBlb2YgY2hhbmdlSHRtbCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2hhbmdlSHRtbCAmJiBjaGFuZ2VIdG1sID09PSBPYmplY3QoY2hhbmdlSHRtbCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShjaGFuZ2VIdG1sKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjaGFuZ2VIdG1sLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiY2hhbmdlSHRtbCIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCnZhciBnZXRmcmFnbWVudHMgPSBmdW5jdGlvbiBnZXRmcmFnbWVudHMoanNvbiwga2V5LCBlZGl0b3JKc29uLCBOdW1iZXJlZExpc3QsIG51bSkgewogIHZhciBlbGVtZW50ID0ganNvbltrZXldLmNoaWxkcmVuOwogIHZhciBmcmFnbWVudHMgPSBbXTsgLy8gaWYgKCFlbGVtZW50KSB7CiAgLy8gICAgIHJldHVybiBbXTsKICAvLyB9CgogIGlmIChlbGVtZW50KSB7CiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpbmRleCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIHZhciBlbCA9IGVsZW1lbnRbaW5kZXhdOwogICAgICB2YXIgc3R5bGVzID0gY2xhc3NOYW1lTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGNsYXNzTmFtZUl0ZW0pIHsKICAgICAgICByZXR1cm4gZWxbY2xhc3NOYW1lSXRlbV07CiAgICAgIH0pOwoKICAgICAgaWYgKGVsLmNvbG9yKSB7CiAgICAgICAgdmFyIGNvbG9yID0gZWwuY29sb3Iuc2xpY2UoMSk7CiAgICAgICAgc3R5bGVzLnB1c2goIkNvbG9yIi5jb25jYXQoY29sb3IpKTsKICAgICAgfQoKICAgICAgaWYgKGVsLkZvbnQpIHsKICAgICAgICB2YXIgZm9udEZhbWlseSA9IGVsLkZvbnQ7CiAgICAgICAgc3R5bGVzLnB1c2goIkZvbnQiLmNvbmNhdChmb250RmFtaWx5KSk7CiAgICAgIH0KCiAgICAgIGlmIChlbC5Gb250U2l6ZSkgewogICAgICAgIHZhciBmb250U2l6ZSA9IGVsLkZvbnRTaXplOwogICAgICAgIHN0eWxlcy5wdXNoKCJGb250U2l6ZSIuY29uY2F0KGZvbnRTaXplKSk7CiAgICAgIH0KCiAgICAgIGlmIChlbC5Xb3Jkc3BhY2UpIHsKICAgICAgICBzdHlsZXMucHVzaCgiV29yZHNwYWNlIyIuY29uY2F0KGVsLldvcmRzcGFjZSkpOwogICAgICB9CgogICAgICBpZiAoZWwud2lkdGgpIHsKICAgICAgICBzdHlsZXMucHVzaCgid2lkdGgjIi5jb25jYXQoZWwud2lkdGgpKTsKICAgICAgfQoKICAgICAgaWYgKGVsLnNjYWxlKSB7CiAgICAgICAgc3R5bGVzLnB1c2goInNjYWxlIyIuY29uY2F0KGVsLnNjYWxlKSk7CiAgICAgIH0KCiAgICAgIGlmIChlbC5tZWRpYVR5cGUgIT09ICdGT1JNVUxBJyAmJiBlbC5tZWRpYVR5cGUgIT09ICdJTUFHRScpIHsKICAgICAgICBvYmogPSB7CiAgICAgICAgICBjb250ZW50OiBlbC50ZXh0LAogICAgICAgICAgbWVkaWFUeXBlOiAnVEVYVCcsCiAgICAgICAgICBzdHlsZXM6IHN0eWxlcwogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAoZWwubWVkaWFUeXBlID09PSAnSU1BR0UnIHx8IGVsLm1lZGlhVHlwZSA9PT0gJ0ZPUk1VTEEnKSB7CiAgICAgICAgb2JqID0gewogICAgICAgICAgY29udGVudDogZWwuY2hhcmFjdGVyLAogICAgICAgICAgbWVkaWFUeXBlOiBlbC5tZWRpYVR5cGUsCiAgICAgICAgICBzdHlsZXM6IHN0eWxlcwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmIChlbC50eXBlID09PSAnc3BhY2UnICYmIGVsLnRleHQgJiYgZWwudGV4dC5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICcnKSAhPT0gJycgfHwgZWwudHlwZSAhPT0gJ3NwYWNlJykgewogICAgICAgIGZyYWdtZW50cyA9IGZyYWdtZW50cy5jb25jYXQoXy5jbG9uZURlZXAob2JqKSk7CiAgICAgIH0KICAgIH07CgogICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGVsZW1lbnQubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIF9sb29wKGluZGV4KTsKICAgIH0KCiAgICBpZiAoZnJhZ21lbnRzLmxlbmd0aCkgewogICAgICB2YXIgbmV3U3R5bGVMaXN0ID0gYmxvY2tTdHlsZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChibG9ja0l0ZW0pIHsKICAgICAgICByZXR1cm4ganNvbltrZXldW2Jsb2NrSXRlbV07CiAgICAgIH0pOwogICAgICBuZXdTdHlsZUxpc3QgPSBuZXdTdHlsZUxpc3QubWFwKGZ1bmN0aW9uIChTdHlsZUl0ZW0pIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KFN0eWxlSXRlbSwgIiMiKS5jb25jYXQoanNvbltrZXldW1N0eWxlSXRlbV0pOwogICAgICB9KTsgLy8g5pyJ5o6S5bqP6L+b6KGM5aSE55CGCgogICAgICBpZiAoTnVtYmVyZWRMaXN0KSB7CiAgICAgICAgbmV3U3R5bGVMaXN0LnB1c2goIk51bWJlcmVkTGlzdCMiLmNvbmNhdChOdW1iZXJlZExpc3QsICIjIikuY29uY2F0KG51bSkpOwogICAgICB9CgogICAgICBlZGl0b3JKc29uLnB1c2goewogICAgICAgIGZyYWdtZW50czogZnJhZ21lbnRzLAogICAgICAgIGFsaWdubWVudDoganNvbltrZXldLnR5cGUsCiAgICAgICAgc3R5bGVzOiBuZXdTdHlsZUxpc3QsCiAgICAgICAgaW5kZW50YXRpb246IDAKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gZWRpdG9ySnNvbjsKfTsKCmV4cG9ydCB2YXIgc2hvd01hdGhKYXggPSBmdW5jdGlvbiBzaG93TWF0aEpheChoaWRkZW4pIHsKICB2YXIgX3dpbmRvdzsKCiAgaWYgKCFoaWRkZW4pIHsvLyBUaXBzLm9wZW4oewogICAgLy8gICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgLy8gICAgIHR5cGU6ICdzcGluJywKICAgIC8vICAgICBpc1Nob3c6IHRydWUKICAgIC8vIH0pOwogIH0gLy8gQHRzLWlnbm9yZQoKCiAgaWYgKChfd2luZG93ID0gd2luZG93KSA9PT0gbnVsbCB8fCBfd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2luZG93Lk1hdGhKYXgpIHsKICAgIHZhciBfd2luZG93MjsKCiAgICBpZiAoIWhpZGRlbikgewogICAgICBUaXBzLmNsb3NlKCk7CiAgICB9IC8vIEB0cy1pZ25vcmUKCgogICAgKF93aW5kb3cyID0gd2luZG93KSA9PT0gbnVsbCB8fCBfd2luZG93MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dpbmRvdzIuTWF0aEpheC5IdWIuUXVldWUoWydUeXBlc2V0JywgTWF0aEpheC5IdWIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSaWNoVGV4dCcpXSk7CiAgfQp9OwoKaWYgKHR5cGVvZiBzaG93TWF0aEpheCAhPT0gJ3VuZGVmaW5lZCcgJiYgc2hvd01hdGhKYXggJiYgc2hvd01hdGhKYXggPT09IE9iamVjdChzaG93TWF0aEpheCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShzaG93TWF0aEpheCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2hvd01hdGhKYXgsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJzaG93TWF0aEpheCIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgc2hvd01hdGhKYXgxID0gZnVuY3Rpb24gc2hvd01hdGhKYXgxKGNiKSB7CiAgdmFyIF93aW5kb3czOwoKICAvLyBAdHMtaWdub3JlCiAgaWYgKChfd2luZG93MyA9IHdpbmRvdykgPT09IG51bGwgfHwgX3dpbmRvdzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3czLk1hdGhKYXgpIHsKICAgIHZhciBfd2luZG93NDsKCiAgICAvLyBAdHMtaWdub3JlCiAgICAoX3dpbmRvdzQgPSB3aW5kb3cpID09PSBudWxsIHx8IF93aW5kb3c0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2luZG93NC5NYXRoSmF4Lkh1Yi5RdWV1ZShbJ1R5cGVzZXQnLCBNYXRoSmF4Lkh1YiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKV0sIGZ1bmN0aW9uICgpIHsKICAgICAgY2IgJiYgY2IoKTsKICAgIH0pOwogIH0KfTsKCmlmICh0eXBlb2Ygc2hvd01hdGhKYXgxICE9PSAndW5kZWZpbmVkJyAmJiBzaG93TWF0aEpheDEgJiYgc2hvd01hdGhKYXgxID09PSBPYmplY3Qoc2hvd01hdGhKYXgxKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHNob3dNYXRoSmF4MSkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2hvd01hdGhKYXgxLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAic2hvd01hdGhKYXgxIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBpc0Nob2ljZSA9IFsnU0lOR0xFX0NIT0lDRScsICdNVUxUSVBMRV9DSE9JQ0UnLCAnSU5ERUZJTklURV9DSE9JQ0UnXTsKCmlmICh0eXBlb2YgaXNDaG9pY2UgIT09ICd1bmRlZmluZWQnICYmIGlzQ2hvaWNlICYmIGlzQ2hvaWNlID09PSBPYmplY3QoaXNDaG9pY2UpICYmIE9iamVjdC5pc0V4dGVuc2libGUoaXNDaG9pY2UpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlzQ2hvaWNlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiaXNDaG9pY2UiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgdmFyIG9wdGlvbk9iamVjdCA9IFtbJ+KImicsICfDlyddLCBbJ1QnLCAnRiddLCBbJ1RydWUnLCAnRmFsc2UnXSwgWyfmraPnoa4nLCAn6ZSZ6K+vJ10sIFsnQScsICdCJ10gLy8gWydhJywgJ2InXSwKLy8gWyfmmK8nLCAn5ZCmJ10sCi8vIFsn5a+5JywgJ+mUmSddLAovLyBbJ1RSVUUnLCAnRkFMU0UnXSwKLy8gWyd0cnVlJywgJ2ZhbHNlJ10sCi8vIFsn4pyUJywgJ+KcliddLApdOwoKaWYgKHR5cGVvZiBvcHRpb25PYmplY3QgIT09ICd1bmRlZmluZWQnICYmIG9wdGlvbk9iamVjdCAmJiBvcHRpb25PYmplY3QgPT09IE9iamVjdChvcHRpb25PYmplY3QpICYmIE9iamVjdC5pc0V4dGVuc2libGUob3B0aW9uT2JqZWN0KSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcHRpb25PYmplY3QsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJvcHRpb25PYmplY3QiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgdmFyIG9wdGlvblZhbHVlID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXTsKCmlmICh0eXBlb2Ygb3B0aW9uVmFsdWUgIT09ICd1bmRlZmluZWQnICYmIG9wdGlvblZhbHVlICYmIG9wdGlvblZhbHVlID09PSBPYmplY3Qob3B0aW9uVmFsdWUpICYmIE9iamVjdC5pc0V4dGVuc2libGUob3B0aW9uVmFsdWUpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdGlvblZhbHVlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAib3B0aW9uVmFsdWUiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgdmFyIHF1ZXN0aW9uVHlwZVRleHQgPSB7CiAgU0lOR0xFX0NIT0lDRTogJycsCiAgTVVMVElQTEVfQ0hPSUNFOiAn77yI6K+36K6+572u5aSa5Liq562U5qGI77yJJywKICBJTkRFRklOSVRFX0NIT0lDRTogJ++8iOivt+iuvue9ruS4gOS4quaIluWkmuS4quetlOahiO+8iScsCiAgQ09NUExFVElPTjogJycsCiAgSlVER0VNRU5UOiAnJywKICBGUkVFX1JFU1BPTlNFOiAnJywKICBDT01QUkVIRU5TSVZFOiAnJwp9OwoKaWYgKHR5cGVvZiBxdWVzdGlvblR5cGVUZXh0ICE9PSAndW5kZWZpbmVkJyAmJiBxdWVzdGlvblR5cGVUZXh0ICYmIHF1ZXN0aW9uVHlwZVRleHQgPT09IE9iamVjdChxdWVzdGlvblR5cGVUZXh0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHF1ZXN0aW9uVHlwZVRleHQpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHF1ZXN0aW9uVHlwZVRleHQsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJxdWVzdGlvblR5cGVUZXh0IiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBxdWVzdGlvblR5cGUgPSB7CiAgU0lOR0xFX0NIT0lDRTogJ+WNlemAiemimCcsCiAgTVVMVElQTEVfQ0hPSUNFOiAn5aSa6YCJ6aKYJywKICBJTkRFRklOSVRFX0NIT0lDRTogJ+S4jeWumumhuemAieaLqemimCcsCiAgQ09NUExFVElPTjogJ+Whq+epuumimCcsCiAgSlVER0VNRU5UOiAn5Yik5pat6aKYJywKICBGUkVFX1JFU1BPTlNFOiAn6Kej562U6aKYJywKICBDT01QUkVIRU5TSVZFOiAn57u85ZCI6aKYJwp9OwoKaWYgKHR5cGVvZiBxdWVzdGlvblR5cGUgIT09ICd1bmRlZmluZWQnICYmIHF1ZXN0aW9uVHlwZSAmJiBxdWVzdGlvblR5cGUgPT09IE9iamVjdChxdWVzdGlvblR5cGUpICYmIE9iamVjdC5pc0V4dGVuc2libGUocXVlc3Rpb25UeXBlKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShxdWVzdGlvblR5cGUsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJxdWVzdGlvblR5cGUiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0UXVlc3Rpb24ocXVlc3Rpb24sIHF1ZXN0aW9uVHlwZSkgewogIHZhciBxdWVzdGlvbkFyciA9IGdldFN0cnVjdHVyZShxdWVzdGlvbiwgcXVlc3Rpb25UeXBlKTsKCiAgaWYgKHF1ZXN0aW9uVHlwZSA9PT0gJ0NPTVBSRUhFTlNJVkUnKSB7CiAgICB2YXIgQ29tcHJlaGVuc2l2ZSA9IHsKICAgICAgdHlwZTogJ2NvbXByZWhlbnNpdmUnLAogICAgICB0aXRsZTogJ+e7vOWQiOmimCcsCiAgICAgIGNvbnRlbnQ6IFtdCiAgICB9OwogICAgQ29tcHJlaGVuc2l2ZS5jb250ZW50ID0gKHF1ZXN0aW9uLnF1ZXN0aW9ucyB8fCBbXSkubWFwKGZ1bmN0aW9uIChxdWVzdGlvbkl0ZW0pIHsKICAgICAgcmV0dXJuIGdldFN0cnVjdHVyZShxdWVzdGlvbkl0ZW0sIHF1ZXN0aW9uSXRlbS5xdWVzdGlvblR5cGUsIHRydWUpOwogICAgfSk7CiAgICBxdWVzdGlvbkFyci5wdXNoKENvbXByZWhlbnNpdmUpOwogIH0KCiAgcmV0dXJuIHF1ZXN0aW9uQXJyOwp9CgppZiAodHlwZW9mIGdldFF1ZXN0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBnZXRRdWVzdGlvbiAmJiBnZXRRdWVzdGlvbiA9PT0gT2JqZWN0KGdldFF1ZXN0aW9uKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGdldFF1ZXN0aW9uKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXRRdWVzdGlvbiwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImdldFF1ZXN0aW9uIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gZ2V0U3RydWN0dXJlKHF1ZXN0aW9uLCBxdWVzdGlvblR5cGUsIGlzTWlub3JUb3BpYykgewogIHZhciBxdWVzdGlvbkFyciA9IGdldFF1ZXN0aW9uVHlwZShxdWVzdGlvblR5cGUsIGlzTWlub3JUb3BpYykubWFwKGZ1bmN0aW9uICh0eXBlSXRlbSkgewogICAgdHlwZUl0ZW0uY29udGVudCA9IGNoYW5nZUpzb24ocXVlc3Rpb25bdHlwZUl0ZW1bJ3R5cGUnXV0pOwogICAgdHlwZUl0ZW0ucXVlc3Rpb25UeXBlID0gcXVlc3Rpb24ucXVlc3Rpb25UeXBlOyAvLyDlvZPpgInmi6npopjnmoTml7blgJnvvIzmt7vliqDlhoXlrrkKCiAgICBpZiAodHlwZUl0ZW1bJ3R5cGUnXSA9PT0gJ29wdGlvbicgJiYgaXNDaG9pY2UuaW5kZXhPZihxdWVzdGlvblR5cGUpID4gLTEpIHsKICAgICAgdHlwZUl0ZW0uY29udGVudCA9IHR5cGVJdGVtLmNvbnRlbnQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbVsnY2hpbGRyZW4nXVswXS5pc0FkZCA9IHRydWU7CiAgICAgICAgaXRlbS5pc0ZpbGxlZCA9IHRydWU7CiAgICAgICAgaXRlbS5pc0Fuc3dlciA9IGZhbHNlOwogICAgICAgIGl0ZW0ua2V5ID0gU3RyaW5nKE1hdGgucmFuZG9tKCkpLnJlcGxhY2UoJ1wuJywgJycpOwogICAgICAgIGl0ZW0ucmVxdWlyZVRleHQgPSAn5YaF5a655LiN6IO95Li656m6JzsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHR5cGVJdGVtWyd0eXBlJ10gPT09ICdhbnN3ZXInKSB7CiAgICAgIGlmIChpc0Nob2ljZS5pbmRleE9mKHF1ZXN0aW9uVHlwZSkgPiAtMSkgewogICAgICAgIHZhciBvcHRpb25MZW5ndGggPSBxdWVzdGlvbi5vcHRpb24gJiYgcXVlc3Rpb24ub3B0aW9uLmxlbmd0aDsKICAgICAgICB0eXBlSXRlbS5pc0Nob2ljZSA9IHRydWU7CiAgICAgICAgdHlwZUl0ZW0ub3B0aW9uID0gb3B0aW9uVmFsdWUuc2xpY2UoMCwgb3B0aW9uTGVuZ3RoKTsKICAgICAgICB0eXBlSXRlbS5xdWVzdGlvblR5cGUgPSBxdWVzdGlvblR5cGU7CiAgICAgICAgdHlwZUl0ZW0uY29udGVudCA9IHR5cGVJdGVtLmNvbnRlbnQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBvcHRpb25WYWx1ZS5pbmRleE9mKGl0ZW0uY2hpbGRyZW5bMF1bJ3RleHQnXS5yZXBsYWNlKC9ccy9nLCAnJykpID4gLTE7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocXVlc3Rpb25UeXBlID09PSAnSlVER0VNRU5UJykgewogICAgICAgIHR5cGVJdGVtLmlzQ2hvaWNlID0gdHJ1ZTsKICAgICAgICB0eXBlSXRlbS5xdWVzdGlvblR5cGUgPSBxdWVzdGlvblR5cGU7CiAgICAgICAgdHlwZUl0ZW0ub3B0aW9uID0gb3B0aW9uT2JqZWN0LmZpbHRlcihmdW5jdGlvbiAob3B0aW9uSXRlbSkgewogICAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLmFuc3dlciAmJiBxdWVzdGlvbi5hbnN3ZXJbMF0gJiYgb3B0aW9uSXRlbS5pbmRleE9mKHF1ZXN0aW9uLmFuc3dlclswXS5mcmFnbWVudHNbMF1bJ2NvbnRlbnQnXSkgPiAtMTsKICAgICAgICB9KVswXSB8fCBbJ+KImicsICfDlyddOwogICAgICAgIHR5cGVJdGVtLmNvbnRlbnQgPSB0eXBlSXRlbS5jb250ZW50LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggJiYgdHlwZUl0ZW0ub3B0aW9uLmluZGV4T2YoaXRlbS5jaGlsZHJlblswXVsndGV4dCddKSA+IC0xOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHR5cGVJdGVtLnJlcXVpcmVUZXh0ID0gJ+WGheWuueS4jeiDveS4uuepuic7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdHlwZUl0ZW07CiAgfSk7CiAgcmV0dXJuIHF1ZXN0aW9uQXJyOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0UXVlc3Rpb25IdG1sKHF1ZXN0aW9uLCB0eXBlKSB7CiAgdmFyIHF1ZXN0aW9uTGlzdCA9IHt9OyAvLyDpqozor4HmmK/lkKbmnInplJkKCiAgdmFyIGNoZWNrUXVlc3Rpb24gPSBjaGVja0FycihxdWVzdGlvbiwgdHlwZSk7CiAgcXVlc3Rpb24ubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbS50eXBlICE9PSAnY29tcHJlaGVuc2l2ZScpIHsKICAgICAgcXVlc3Rpb25MaXN0W2l0ZW0udHlwZV0gPSBjaGFuZ2VIdG1sKGl0ZW0uY29udGVudCk7CiAgICB9IGVsc2UgewogICAgICBxdWVzdGlvbkxpc3QucXVlc3Rpb25zID0gaXRlbVsnY29udGVudCddLm1hcChmdW5jdGlvbiAoZWwpIHsKICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgZWwubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gb2JqW2kudHlwZV0gPSBjaGFuZ2VIdG1sKGkuY29udGVudCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG9iajsKICAgICAgfSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgcXVlc3Rpb25MaXN0OiBxdWVzdGlvbkxpc3QKICB9LCBjaGVja1F1ZXN0aW9uKTsKfQoKaWYgKHR5cGVvZiBnZXRRdWVzdGlvbkh0bWwgIT09ICd1bmRlZmluZWQnICYmIGdldFF1ZXN0aW9uSHRtbCAmJiBnZXRRdWVzdGlvbkh0bWwgPT09IE9iamVjdChnZXRRdWVzdGlvbkh0bWwpICYmIE9iamVjdC5pc0V4dGVuc2libGUoZ2V0UXVlc3Rpb25IdG1sKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXRRdWVzdGlvbkh0bWwsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJnZXRRdWVzdGlvbkh0bWwiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0RW1wdHlPcHRpb24oaW5kZXgsIHF1ZXN0aW9uU3RydWN0dXJlLCBpc09ubHlPcHRpb24sIGVpKSB7CiAgdmFyIG5ld1F1ZXN0aW9uU3RydWN0dXJlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShxdWVzdGlvblN0cnVjdHVyZSkpLm1hcChmdW5jdGlvbiAocXVlc3Rpb25JdGVtKSB7CiAgICBpZiAocXVlc3Rpb25JdGVtLnR5cGUgPT09ICdvcHRpb24nKSB7CiAgICAgIGlmIChxdWVzdGlvbkl0ZW0uY29udGVudC5sZW5ndGggPT09IDIpIHsKICAgICAgICBpc09ubHlPcHRpb24gPSB0cnVlOwogICAgICB9CgogICAgICBxdWVzdGlvbkl0ZW0uY29udGVudC5sZW5ndGggPSAwOwogICAgfQoKICAgIGlmIChxdWVzdGlvbkl0ZW0udHlwZSA9PT0gJ2NvbXByZWhlbnNpdmUnKSB7CiAgICAgIHF1ZXN0aW9uSXRlbS5jb250ZW50W2VpXS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnb3B0aW9uJykgewogICAgICAgICAgaWYgKGl0ZW0uY29udGVudC5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgaXNPbmx5T3B0aW9uID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpdGVtLmNvbnRlbnQubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBxdWVzdGlvbkl0ZW07CiAgfSk7CiAgdmFyIG5ld1F1ZXN0aW9uU3RydWN0dXJlMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocXVlc3Rpb25TdHJ1Y3R1cmUpKS5tYXAoZnVuY3Rpb24gKHF1ZXN0aW9uSXRlbSkgewogICAgaWYgKHF1ZXN0aW9uSXRlbS50eXBlID09PSAnb3B0aW9uJykgewogICAgICBxdWVzdGlvbkl0ZW0uY29udGVudC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfQoKICAgIGlmIChxdWVzdGlvbkl0ZW0udHlwZSA9PT0gJ2Fuc3dlcicpIHsKICAgICAgcXVlc3Rpb25JdGVtLm9wdGlvbi5wb3AoKTsKICAgICAgcXVlc3Rpb25JdGVtLmNvbnRlbnQgPSBxdWVzdGlvbkl0ZW0uY29udGVudC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gcXVlc3Rpb25JdGVtLm9wdGlvbi5pbmRleE9mKGl0ZW0uY2hpbGRyZW5bMF1bJ3RleHQnXS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICcnKSkgPiAtMTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHF1ZXN0aW9uSXRlbS50eXBlID09PSAnY29tcHJlaGVuc2l2ZScpIHsKICAgICAgcXVlc3Rpb25JdGVtLmNvbnRlbnRbZWldLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdvcHRpb24nKSB7CiAgICAgICAgICBpdGVtLmNvbnRlbnQuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB9CgogICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgICBpdGVtLm9wdGlvbi5wb3AoKTsKICAgICAgICAgIGl0ZW0uY29udGVudCA9IGl0ZW0uY29udGVudC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLm9wdGlvbi5pbmRleE9mKGVsLmNoaWxkcmVuWzBdWyd0ZXh0J10ucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAnJykpID4gLTE7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBxdWVzdGlvbkl0ZW07CiAgfSk7CiAgcmV0dXJuIHsKICAgIG5ld1F1ZXN0aW9uU3RydWN0dXJlOiBuZXdRdWVzdGlvblN0cnVjdHVyZSwKICAgIG5ld1F1ZXN0aW9uU3RydWN0dXJlMTogbmV3UXVlc3Rpb25TdHJ1Y3R1cmUxLAogICAgaXNPbmx5T3B0aW9uOiBpc09ubHlPcHRpb24KICB9Owp9CgppZiAodHlwZW9mIGdldEVtcHR5T3B0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBnZXRFbXB0eU9wdGlvbiAmJiBnZXRFbXB0eU9wdGlvbiA9PT0gT2JqZWN0KGdldEVtcHR5T3B0aW9uKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGdldEVtcHR5T3B0aW9uKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXRFbXB0eU9wdGlvbiwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImdldEVtcHR5T3B0aW9uIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gY2hlY2tBcnIocXVlc3Rpb24sIHR5cGUpIHsKICB2YXIgZXJyTGlzdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogW107CiAgcXVlc3Rpb24ubWFwKGZ1bmN0aW9uIChxdWVzdGlvbkl0ZW0pIHsKICAgIGlmIChxdWVzdGlvbkl0ZW0udHlwZSAhPT0gJ2NvbXByZWhlbnNpdmUnKSB7CiAgICAgIHZhciBvYmogPSBjaGVja1F1ZXN0aW9uKHF1ZXN0aW9uSXRlbSwgdHlwZSwgZXJyTGlzdCk7CiAgICAgIHF1ZXN0aW9uSXRlbSA9IG9iai5xdWVzdGlvbkl0ZW07CiAgICAgIGVyckxpc3QgPSBvYmouZXJyTGlzdDsKICAgIH0gZWxzZSB7CiAgICAgIHF1ZXN0aW9uSXRlbVsnY29udGVudCddLm1hcChmdW5jdGlvbiAoZWwsIGluZGV4KSB7CiAgICAgICAgZWwubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgb2JqID0gY2hlY2tRdWVzdGlvbihlLCBlLnF1ZXN0aW9uVHlwZSwgZXJyTGlzdCwgaW5kZXgpOwogICAgICAgICAgZSA9IG9iai5xdWVzdGlvbkl0ZW07CiAgICAgICAgICBlcnJMaXN0ID0gb2JqLmVyckxpc3Q7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0pOwogIHJldHVybiB7CiAgICBxdWVzdGlvbjogcXVlc3Rpb24sCiAgICBlcnJMaXN0OiBlcnJMaXN0CiAgfTsKfQoKZnVuY3Rpb24gY2hlY2tRdWVzdGlvbihxdWVzdGlvbkl0ZW0sIHR5cGUsIGVyckxpc3QsIGkpIHsKICB2YXIgdGV4dCA9ICcnOwogIHF1ZXN0aW9uSXRlbS5jb250ZW50ID0gdHlwZW9mIHF1ZXN0aW9uSXRlbS5jb250ZW50ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UocXVlc3Rpb25JdGVtLmNvbnRlbnQpIDogcXVlc3Rpb25JdGVtLmNvbnRlbnQ7CiAgKHF1ZXN0aW9uSXRlbS5jb250ZW50IHx8IFtdKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmIChpdGVtLk51bWJlcmVkTGlzdCkgewogICAgICB0ZXh0ICs9ICcgJzsKICAgIH0KCiAgICBpdGVtLmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAvLyBsZXQgcmVzdWx0ID0gZS50ZXh0ID8gZS50ZXh0LnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgJycpIDogJyc7CiAgICAgIHZhciByZXN1bHQgPSBlLnRleHQ7CgogICAgICBpZiAoZS5jaGFyYWN0ZXIpIHsKICAgICAgICByZXN1bHQgKz0gZS5jaGFyYWN0ZXIgPyBlLmNoYXJhY3RlciA6ICcnOwogICAgICB9CgogICAgICB0ZXh0ICs9IHJlc3VsdDsKICAgIH0pOwogIH0pOwoKICBpZiAocXVlc3Rpb25JdGVtLnJlcXVpcmUgJiYgKHF1ZXN0aW9uSXRlbS5jb250ZW50Lmxlbmd0aCA9PT0gMCB8fCB0ZXh0ID09PSAnJykpIHsKICAgIHF1ZXN0aW9uSXRlbS5pc0ZpbGxlZCA9IGZhbHNlOwogICAgZXJyTGlzdC5wdXNoKHsKICAgICAgaW5kZXg6IGksCiAgICAgIHR5cGU6IHF1ZXN0aW9uSXRlbS50eXBlCiAgICB9KTsKICB9IC8vIOW9k+mdnuW/heWhq+ayoeacieaVsOaNrueahOaXtuWAme+8jOWKoOS4gOS4qifnlaUnCgoKICBpZiAoIXF1ZXN0aW9uSXRlbS5yZXF1aXJlICYmIHRleHQgPT09ICcnKSB7CiAgICBxdWVzdGlvbkl0ZW0uY29udGVudCA9IFt7CiAgICAgIGNoaWxkcmVuOiBbewogICAgICAgIHRleHQ6ICfnlaUnCiAgICAgIH1dLAogICAgICB0eXBlOiAnTGVmdCcKICAgIH1dOwogIH0KCiAgaWYgKHF1ZXN0aW9uSXRlbS50eXBlID09PSAnb3B0aW9uJykgewogICAgcXVlc3Rpb25JdGVtWydjb250ZW50J10ubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHZhciB0ZXh0ID0gJyc7CgogICAgICBpZiAoaXRlbS5OdW1iZXJlZExpc3QpIHsKICAgICAgICB0ZXh0ICs9ICcgJzsKICAgICAgfSAvLyBpdGVtLmNoaWxkcmVuLm1hcCgoZTphbnkpID0+IHsKICAgICAgLy8gICAgIGxldCByZXN1bHQgPSBlLnRleHQgPyBlLnRleHQucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAnJykgOiAnJzsKICAgICAgLy8gICAgIGlmIChlLmNoYXJhY3RlcikgewogICAgICAvLyAgICAgICAgIHJlc3VsdCArPSBlLmNoYXJhY3RlciA/IGUuY2hhcmFjdGVyLnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgJycpIDogJyc7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICB0ZXh0ICs9IHJlc3VsdDsKICAgICAgLy8gfSk7CgoKICAgICAgaXRlbS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBsZXQgcmVzdWx0ID0gZS50ZXh0ID8gZS50ZXh0LnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgJycpIDogJyc7CiAgICAgICAgdmFyIHJlc3VsdCA9IGUudGV4dDsKCiAgICAgICAgaWYgKGUuY2hhcmFjdGVyKSB7CiAgICAgICAgICByZXN1bHQgKz0gZS5jaGFyYWN0ZXIgPyBlLmNoYXJhY3RlciA6ICcnOwogICAgICAgIH0KCiAgICAgICAgdGV4dCArPSByZXN1bHQ7CiAgICAgIH0pOwoKICAgICAgaWYgKHRleHQgPT09ICcnKSB7CiAgICAgICAgaXRlbS5pc0ZpbGxlZCA9IGZhbHNlOwogICAgICAgIGVyckxpc3QucHVzaCh7CiAgICAgICAgICBpbmRleDogaSwKICAgICAgICAgIHR5cGU6IHF1ZXN0aW9uSXRlbS50eXBlCiAgICAgICAgfSk7CgogICAgICAgIGlmICghcXVlc3Rpb25JdGVtLnJlcXVpcmUpIHsKICAgICAgICAgIGl0ZW0gPSBbewogICAgICAgICAgICBjaGlsZHJlbjogW3sKICAgICAgICAgICAgICB0ZXh0OiAn55WlJwogICAgICAgICAgICB9XSwKICAgICAgICAgICAgdHlwZTogJ0xlZnQnCiAgICAgICAgICB9XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KCiAgaWYgKHF1ZXN0aW9uSXRlbS50eXBlID09PSAnYW5zd2VyJyAmJiB0eXBlID09PSAnTVVMVElQTEVfQ0hPSUNFJyAmJiBxdWVzdGlvbkl0ZW1bJ2NvbnRlbnQnXS5sZW5ndGggPD0gMSkgewogICAgcXVlc3Rpb25JdGVtLmlzRmlsbGVkID0gZmFsc2U7CiAgICBlcnJMaXN0LnB1c2goewogICAgICBpbmRleDogaSwKICAgICAgdHlwZTogcXVlc3Rpb25JdGVtLnR5cGUKICAgIH0pOwogIH0gZWxzZSBpZiAocXVlc3Rpb25JdGVtLnR5cGUgPT09ICdhbnN3ZXInICYmICh0eXBlID09PSAnU0lOR0xFX0NIT0lDRScgfHwgdHlwZSA9PT0gJ0pVREdFTUVOVCcpICYmIHF1ZXN0aW9uSXRlbVsnY29udGVudCddLmxlbmd0aCAhPT0gMSkgewogICAgcXVlc3Rpb25JdGVtLmlzRmlsbGVkID0gZmFsc2U7CiAgICBlcnJMaXN0LnB1c2goewogICAgICBpbmRleDogaSwKICAgICAgdHlwZTogcXVlc3Rpb25JdGVtLnR5cGUKICAgIH0pOwogIH0KCiAgcmV0dXJuIHsKICAgIHF1ZXN0aW9uSXRlbTogcXVlc3Rpb25JdGVtLAogICAgZXJyTGlzdDogZXJyTGlzdAogIH07Cn0KCnZhciBiID0gW3sKICBjaGlsZHJlbjogW3sKICAgIHRleHQ6ICI8bWF0aCBkaXNwbGF5PSdibG9jayc+IDxtcm93PiAgPG1zdWI+ICAgPG1pPlM8L21pPiAgIDxtcm93PiAgICA8bW8+JiN4MjVCMzs8L21vPjxtaT5PPC9taT48bWk+QjwvbWk+PG1pPkM8L21pPjwvbXJvdz4gIDwvbXN1Yj4gIDxtbz49PC9tbz48bWZyYWM+ICAgPG1uPjE8L21uPiAgIDxtbj4yPC9tbj4gIDwvbWZyYWM+ICA8bWk+QjwvbWk+PG1pPkM8L21pPjxtbz4mI3gyMkM1OzwvbW8+PG1pPnI8L21pPjwvbXJvdz48L21hdGg+IiwKICAgIEZPUk1VTEE6IHRydWUKICB9LCB7CiAgICB0ZXh0OiAnaHR0cHM6Ly93d3cubWF0aGpheC5vcmcvYmFkZ2Uvc3BvbnNvcnMvQ1VQJwogIH0sIHsKICAgIHRleHQ6ICdodHRwczovL3d3dy5tYXRoamF4Lm9yZy9iYWRnZS9zcG9uc29ycy9DVVAuanBnJywKICAgIGltYWdlOiB0cnVlCiAgfV0KfSwgewogIHR5cGU6ICdwYXJhZ3JhcGgnLAogIGNoaWxkcmVuOiBbewogICAgdGV4dDogJ1RoaXMgaXMgZWRpdGFibGUgJwogIH0sIHsKICAgIHRleHQ6ICdyaWNoJywKICAgIGJvbGQ6IHRydWUKICB9LCB7CiAgICB0ZXh0OiAnIHRleHQsICcKICB9LCB7CiAgICB0ZXh0OiAnbXVjaCcsCiAgICBpdGFsaWM6IHRydWUKICB9LCB7CiAgICB0ZXh0OiAnIGJldHRlciB0aGFuIGEgJwogIH0sIHsKICAgIHRleHQ6ICc8dGV4dGFyZWE+JywKICAgIGNvZGU6IHRydWUKICB9LCB7CiAgICB0ZXh0OiAnIScKICB9XQp9LCB7CiAgdHlwZTogJ3JpZ2h0JywKICBjaGlsZHJlbjogW3sKICAgIHRleHQ6ICdTaW5jZSBpdCcKICB9LCB7CiAgICB0ZXh0OiAnYm9sZCcsCiAgICBib2xkOiB0cnVlCiAgfSwgewogICAgdGV4dDogJywgb3IgYWRkIGEgc2VtYW50aWNhbGx5IHJlbmRlcmVkIGJsb2NrIHF1b3RlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHBhZ2UsIGxpa2UgdGhpczonCiAgfV0KfSwgewogIHR5cGU6ICdibG9jay1xdW90ZScsCiAgY2hpbGRyZW46IFt7CiAgICB0ZXh0OiAnQSB3aXNlIHF1b3RlLicKICB9XQp9LCB7CiAgdHlwZTogJ2NlbnRlcicsCiAgY2hpbGRyZW46IFt7CiAgICB0ZXh0OiAnVHJ5IGl0IG91dCBmb3IgeW91cnNlbGYhJwogIH1dCn1dOwpleHBvcnQgdmFyIGdldFF1ZXN0aW9uVHlwZSA9IGZ1bmN0aW9uIGdldFF1ZXN0aW9uVHlwZShxdWVzdGlvblR5cGUsIGlzTWlub3JUb3BpYykgewogIHZhciBxdWVzdGlvbkRlbW8gPSBbewogICAgdHlwZTogJ3N0ZW0nLAogICAgLy8g6aKY5Z6LCiAgICB0aXRsZTogIWlzTWlub3JUb3BpYyA/ICfpopjlubInIDogJ+Wwj+mimOmimOW5sicsCiAgICAvLyDmoIfpopgKICAgIHJlcXVpcmU6IHRydWUsCiAgICAvLyDmmK/lkKbmmK/lv4XloasKICAgIGlzRmlsbGVkOiB0cnVlLAogICAgLy8g5piv5ZCm5aGr5YaZCiAgICByZXF1aXJlVGV4dDogJ+WGheWuueS4jeiDveS4uuepuicsCiAgICAvLyDmsqHloavnmoTmj5DnpLoKICAgIGlzRmlzdFJpY2g6ICFpc01pbm9yVG9waWMgPyB0cnVlIDogZmFsc2UsCiAgICAvLyDmmK/lkKbmmK/nrKzkuIDkuKrlvLnlh7rmoYYKICAgIGNvbnRlbnQ6IFtdIC8vIOWvjOaWh+acrOWGheWuuQoKICB9LCB7CiAgICB0eXBlOiAnb3B0aW9uJywKICAgIHRpdGxlOiAhaXNNaW5vclRvcGljID8gJ+mAiemhuScgOiAn5bCP6aKY6YCJ6aG5JywKICAgIHJlcXVpcmU6IHRydWUsCiAgICBpc0ZpbGxlZDogdHJ1ZSwKICAgIGNvbnRlbnQ6IFtdCiAgfSwgewogICAgdHlwZTogJ2Fuc3dlcicsCiAgICB0aXRsZTogIWlzTWlub3JUb3BpYyA/ICfnrZTmoYgnIDogJ+Wwj+mimOetlOahiCcsCiAgICByZXF1aXJlOiB0cnVlLAogICAgaXNGaWxsZWQ6IHRydWUsCiAgICByZXF1aXJlVGV4dDogJ+ato+ehruetlOahiOayoeaciemAieWhqycsCiAgICBvcHRpb246IFtdLAogICAgY29udGVudDogW10KICB9LCB7CiAgICB0eXBlOiAnZXhwbGFuYXRpb24nLAogICAgdGl0bGU6ICFpc01pbm9yVG9waWMgPyAn6Kej5p6QJyA6ICflsI/popjop6PmnpAnLAogICAgY29udGVudDogW10KICB9XTsKCiAgaWYgKGlzQ2hvaWNlLmluZGV4T2YocXVlc3Rpb25UeXBlKSA9PT0gLTEpIHsKICAgIHF1ZXN0aW9uRGVtby5zcGxpY2UoMSwgMSk7CiAgfQoKICBpZiAocXVlc3Rpb25UeXBlID09PSAnQ09NUFJFSEVOU0lWRScpIHsKICAgIHF1ZXN0aW9uRGVtbyA9IHF1ZXN0aW9uRGVtby5zbGljZSgwLCAxKTsKICB9CgogIHJldHVybiBxdWVzdGlvbkRlbW87Cn07CgppZiAodHlwZW9mIGdldFF1ZXN0aW9uVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2V0UXVlc3Rpb25UeXBlICYmIGdldFF1ZXN0aW9uVHlwZSA9PT0gT2JqZWN0KGdldFF1ZXN0aW9uVHlwZSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShnZXRRdWVzdGlvblR5cGUpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdldFF1ZXN0aW9uVHlwZSwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImdldFF1ZXN0aW9uVHlwZSIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgVmVyaWZpY2F0aW9uS2V5ID0gWzksIDEzLCAxNiwgMTcsIDE4LCAzMiwgMzcsIDM4LCAzOSwgNDAsIDkzXTsgLy8g5LiN6KKr6aqM6K+B55qE5oyJ6ZSu77ybCgppZiAodHlwZW9mIFZlcmlmaWNhdGlvbktleSAhPT0gJ3VuZGVmaW5lZCcgJiYgVmVyaWZpY2F0aW9uS2V5ICYmIFZlcmlmaWNhdGlvbktleSA9PT0gT2JqZWN0KFZlcmlmaWNhdGlvbktleSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShWZXJpZmljYXRpb25LZXkpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcmlmaWNhdGlvbktleSwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIlZlcmlmaWNhdGlvbktleSIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgaWNvbk9iaiA9IHsKICBib2xkOiBib2xkLAogIC8vIOWKoOeylwogIGNlbnRlckFsaWdubWVudDogY2VudGVyQWxpZ25tZW50LAogIC8vIOWxheS4rQogIGNsZWFuVXA6IGNsZWFuVXAsCiAgLy8g5riF6ZmkCiAgZGlzb3JkZXI6IGRpc29yZGVyLAogIC8vIOaXoOW6j+aOkuW6jwogIGZvcm1hdE1hdGNoOiBmb3JtYXRNYXRjaCwKICAvLyDmoLzlvI/liLcKICBJdGFsaWM6IEl0YWxpYywKICAvLyDmlpzmnaAKICBsZWZ0QWxpZ25tZW50OiBsZWZ0QWxpZ25tZW50LAogIC8vIOWxheW3pgogIG9yZGVyOiBvcmRlciwKICAvLyDmnInluo/mjpLluo8KICBwaWN0dXJlOiBwaWN0dXJlLAogIC8vIOWbvueJhwogIHBpbnlpbjogcGlueWluLAogIC8vIOaLvOmfswogIHBvaW50OiBwb2ludCwKICAvLyDnnYDph43lj7cKICByaWdodEFsaWdubWVudDogcmlnaHRBbGlnbm1lbnQsCiAgLy8g5bGF5Y+zCiAgc3RyaWtlb3V0OiBzdHJpa2VvdXQsCiAgLy8g5Yig6Zmk57q/CiAgc3Vic2NyaXB0OiBzdWJzY3JpcHQsCiAgLy8g5Y+z5LiL5qCHCiAgc3VwZXJzY3JpcHQ6IHN1cGVyc2NyaXB0LAogIC8vIOWPs+S4iuaghwogIHN5bWJvbDogc3ltYm9sLAogIC8vIOWFrOW8jwogIHRleHRJbmRlbnQ6IHRleHRJbmRlbnQsCiAgLy8g6aaW6Iiq57yp6L+bCiAgdHJpYW5nbGU6IHRyaWFuZ2xlLAogIC8vIOeCueWHu+WQkeS4iwogIHVuZGVybGluZTogdW5kZXJsaW5lLAogIC8vIOS4i+aghwogIHZpZGVvOiB2aWRlbywKICAvLyDpn7PpopEKICB3b3Jkc3BhY2U6IHdvcmRzcGFjZSwKICAvLyDlrZfpl7Tot50KICBsaW5lU3BhY2U6IGxpbmVTcGFjZSwKICAvLyDooYzpl7Tot50KICBsb3dlclRyaWFuZ2xlOiBsb3dlclRyaWFuZ2xlIC8vIOS4i+S4ieinkgoKfTsKCmlmICh0eXBlb2YgaWNvbk9iaiAhPT0gJ3VuZGVmaW5lZCcgJiYgaWNvbk9iaiAmJiBpY29uT2JqID09PSBPYmplY3QoaWNvbk9iaikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShpY29uT2JqKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpY29uT2JqLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiaWNvbk9iaiIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgY2xhc3NOYW1lc0xpc3QgPSBbJ0JvbGQnLCAnVW5kZXJsaW5lV2F2ZScsICdJdGFsaWMnLCAnVW5kZXJsaW5lRG90dGVkJywgJ1VuZGVybGluZURvdWJsZScsICdWZXJ0QWxpZ25TdXBlcnNjcmlwdCcsICdWZXJ0QWxpZ25TdWJzY3JpcHQnLCAnVW5kZXJsaW5lU2luZ2xlJywgJ1N0cmlrZSddOwoKaWYgKHR5cGVvZiBjbGFzc05hbWVzTGlzdCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2xhc3NOYW1lc0xpc3QgJiYgY2xhc3NOYW1lc0xpc3QgPT09IE9iamVjdChjbGFzc05hbWVzTGlzdCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShjbGFzc05hbWVzTGlzdCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NOYW1lc0xpc3QsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJjbGFzc05hbWVzTGlzdCIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgc2hvd1N0eWxlID0gWy8vIHsgbmFtZTogJ2JvbGQnLCBzaWduOiAnQm9sZCcgfSwKLy8geyBuYW1lOiAnSXRhbGljJywgc2lnbjogJ0l0YWxpYycgfSwKewogIG5hbWU6ICd1bmRlcmxpbmUnLAogIHNpZ246ICdVbmRlcmxpbmVTaW5nbGUnLAogIFN1YnNjcmlwdEJ1dHRvbjogdHJ1ZQp9IC8vIHsgbmFtZTogJ3N0cmlrZW91dCcsIHNpZ246ICdTdHJpa2UnIH0sCi8vIHsgbmFtZTogJ3N1YnNjcmlwdCcsIHNpZ246ICdWZXJ0QWxpZ25TdWJzY3JpcHQnIH0sCi8vIHsgbmFtZTogJ3N1cGVyc2NyaXB0Jywgc2lnbjogJ1ZlcnRBbGlnblN1cGVyc2NyaXB0JyB9LAovLyB7IG5hbWU6ICdwb2ludCcsIHNpZ246ICdFbXBoYXNpc0RvdCcgfSwKXTsKCmlmICh0eXBlb2Ygc2hvd1N0eWxlICE9PSAndW5kZWZpbmVkJyAmJiBzaG93U3R5bGUgJiYgc2hvd1N0eWxlID09PSBPYmplY3Qoc2hvd1N0eWxlKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHNob3dTdHlsZSkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2hvd1N0eWxlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAic2hvd1N0eWxlIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBzaG93Tm9kZSA9IFsvLyB7IG5hbWU6ICdsZWZ0QWxpZ25tZW50Jywgc2lnbjogJ0xlZnQnIH0sCiAgLy8geyBuYW1lOiAnY2VudGVyQWxpZ25tZW50Jywgc2lnbjogJ0NlbnRlcicgfSwKICAvLyB7IG5hbWU6ICdyaWdodEFsaWdubWVudCcsIHNpZ246ICdSaWdodCcgfSwKICAvLyB7IG5hbWU6ICd0ZXh0SW5kZW50Jywgc2lnbjogJ1RleHRJbmRlbnQnLCB0b2dldGhlckxvd2VyVHJpYW5nbGU6IHRydWUgfSwKXTsKCmlmICh0eXBlb2Ygc2hvd05vZGUgIT09ICd1bmRlZmluZWQnICYmIHNob3dOb2RlICYmIHNob3dOb2RlID09PSBPYmplY3Qoc2hvd05vZGUpICYmIE9iamVjdC5pc0V4dGVuc2libGUoc2hvd05vZGUpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNob3dOb2RlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAic2hvd05vZGUiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgdmFyIFRleHRJbmRlbnRMaXN0ID0gWzAsIDAuNSwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdOwoKaWYgKHR5cGVvZiBUZXh0SW5kZW50TGlzdCAhPT0gJ3VuZGVmaW5lZCcgJiYgVGV4dEluZGVudExpc3QgJiYgVGV4dEluZGVudExpc3QgPT09IE9iamVjdChUZXh0SW5kZW50TGlzdCkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShUZXh0SW5kZW50TGlzdCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dEluZGVudExpc3QsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJUZXh0SW5kZW50TGlzdCIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgTGluZVNwYWNlTGlzdCA9IFsnMS4wJywgMS4xNSwgMS41LCAnMi4wJywgMi4yNSwgJzMuMCddOwoKaWYgKHR5cGVvZiBMaW5lU3BhY2VMaXN0ICE9PSAndW5kZWZpbmVkJyAmJiBMaW5lU3BhY2VMaXN0ICYmIExpbmVTcGFjZUxpc3QgPT09IE9iamVjdChMaW5lU3BhY2VMaXN0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKExpbmVTcGFjZUxpc3QpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpbmVTcGFjZUxpc3QsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJMaW5lU3BhY2VMaXN0IiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBMaXN0V29yZFNwYWNlID0gWzAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwXTsKCmlmICh0eXBlb2YgTGlzdFdvcmRTcGFjZSAhPT0gJ3VuZGVmaW5lZCcgJiYgTGlzdFdvcmRTcGFjZSAmJiBMaXN0V29yZFNwYWNlID09PSBPYmplY3QoTGlzdFdvcmRTcGFjZSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShMaXN0V29yZFNwYWNlKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaXN0V29yZFNwYWNlLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiTGlzdFdvcmRTcGFjZSIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCnZhciBpY29uTHN0ID0gewogIFNwZWNpYWxTeW1ib2xzOiAn4pazIOKWvSDil4sg4peHIOKWoSDimIYg4pa3IOKXgSDimaQg4pmhIOKZoiDimacg4payIOKWvCDil48g4peGIOKWoCDimIUg4pa2IOKXgCDimaAg4pmlIOKZpiDimaMg4pmAIOKYuiDimJEg4oiaIOKYkiDDlyDiiLcg4oC7IOKGliDihpEg4oaXIOKGkCDihpIg4oaZIOKGkyDihpgg4oaVIOKGlCcsCiAgUHVuY3R1YXRpb246ICfvvIwg44CCIO+8nyDvvIEg77yaIO+8myDCtyDigKYgfiAmIEAgIyAsIC4gPyAhIDogOyDjgIEg4oCm4oCmIO+9niDvvIYg77ygIO+8gyDigJwg4oCdIOKAmCDigJkg44CdIOOAniAiIFwnIO+8giDvvIcgwrQg77yHICggKSDjgJAg44CRIOOAiiDjgIsg77ycIO+8niDvuZ0g77meIDwgPiAoICkgWyBdIMKrIMK7IOKAuSDigLog44CUIOOAlSDjgIgg44CJIHsgfSDvvLsg77y9IOOAjCDjgI0g772bIO+9nSDjgJYg44CXIOOAjiDjgI8g77i1IO+4tyDvuLkg77i/IO+4vSDvuYEg77mDIO+4uyDvuJcgLyB8IFxcIO+4tiDvuLgg77i6IO+5gCDvuL4g77mCIO+5hCDvuLwg77iYIO+8jyDvvZwg77y8IF8g77y/IO+5jyDvuY0g77mOIGAgwqYgwqEgXiDCrcKtXMKoIMuKIMKvIO+/oyDvuYsg77mJIO+5iiDLiyDvuLQgy4cnLAogIERpZ2l0U2VyaWFsTnVtYmVyOiAn4pGgIOKRoSDikaIg4pGjIOKRpCDikaUg4pGmIOKRpyDikagg4pGpIOKRqiDikasg4pGsIOKRrSDika4g4pGvIOKRsCDikbEg4pGyIOKRsyDikbQg4pG1IOKRtiDikbcg4pG4IOKRuSDikbog4pG7IOKRvCDikb0g4pG+IOKRvyDikoAg4pKBIOKSgiDikoMg4pKEIOKShSDikoYg4pKHIOKSiCDikokg4pKKIOKSiyDikowg4pKNIOKSjiDiko8g4pKQIOKSkSDikpIg4pKTIOKSlCDikpUg4pKWIOKSlyDikpgg4pKZIOKSmiDikpsg4oWgIOKFoSDihaIg4oWjIOKFpCDihaUg4oWmIOKFpyDihagg4oWpIOKFqiDihasg4oWwIOKFsSDihbIg4oWzIOKFtCDihbUg4oW2IOKFtyDihbgg4oW5IOKdtiDinbcg4p24IOKduSDinbog4p27IOKdvCDinb0g4p2+IOKdvyDjiKAg44ihIOOIoiDjiKMg44ikIOOIpSDjiKYg44inIOOIqCDjiKknLAogIE51bWJlck5uaXQ6ICfvuaIg77mjIMK3IC8gPSDvuaQg77mlIOKJpiDiiacg4omuIOKJryDiiaEg77yLIO+8jSDDlyDDtyDvvJ0g77ycIO+8niDiiaQg4omlIOKJiCDiiZIg4omgIO+5oiDvuaMgwrEg4oi2IOKItSDiiLQg4oi3IOOPkiDjj5Eg4oiRIOKIjyDiiIUg4oidIOKIvSDiiIgg4oipIOKIpyDiipkg4oySIOKIpSDiiJ8g4oijIOKIgiDiiIYg4oieIOKJjCDiiIkg4oiqIOKIqCDiipUg4oq/IOKKpSDiiKAg4oirIOKIrCDiiK0gJSDigLAg77yFIMK6IMK5IMKyIMKzIOKBvyDihIUg4oiuIOKIryDiiLAg4oKBIOKCgiDigoMgwr0g4oWTIOKFlCDCvCDCviDCsCDihIMg4oSJIOOAkiDjjo4g446PIM68bSDjjpwg446dIOOOniDigLIgwqUgXCQg4oKsIOC4vyDvv6Eg446hIG3CsyDjj4QgbWwgbW9sIOOPlSDigLMg77+lIMKjIO+/oCDigqAnLAogIEdyZWVjZUxhdGluOiAnzpEgzpIgzpMgzpQgzpUgzpYgzpcgzpggzpkgzpogzpsgzpwgzp0gzp4gzp8gzqAgzqEgzqMgzqQgzqUgzqYgzqcgzqggzqkgzrEgzrIgzrMgzrQgzrUgzrYgzrcgzrggzrkgzrogzrsgzrwgzr0gzr4gzr8gz4Agz4Egz4Mgz4Qgz4Ugz4Ygz4cgz4ggz4kgw4Agw4Egw4Igw4Mgw4Qgw4Ugw4Ygw4cgw4ggw4kgw4ogw4sgw4wgw40gw44gw48gw5Agw5Egw5Igw5Mgw5Qgw5Ugw5Ygw5ggw5kgw5ogw5sgw5wgw50gw54gxaAgxbggxZIgw6Agw6Egw6Igw6Mgw6Qgw6Ugw6Ygw6cgw6ggw6kgw6ogw6sgw6wgw60gw64gw68gw7Agw7Egw7Igw7Mgw7Ugw7Qgw7Ygw7ggw7kgw7ogw7sgw7wgw70gw74gxaEgw78gxZMnLAogIFBpbnlpbkJvcG9tb2ZvOiAnxIEgw6Egx44gw6AgxJMgw6kgxJsgw6ggxasgw7ogx5Qgw7kgxY0gw7Mgx5Igw7IgxKsgw60gx5Agw6wgx5Ygx5ggx5ogx5wgw6ogxYQg7p+HIMWIIMO8IO6fiCDjhJog44SbIOOEnCDjhKcg44SoIOOEqSDjhJ0g44SeIOOEnyDjhKAg44ShIOOEoiDjhKMg44SkIOOEpSDjhKYg44SFIOOEhiDjhIcg44SIIOOEiSDjhIog44SLIOOEjCDjhI0g44SOIOOEjyDjhJAg44SRIOOEkiDjhJMg44SUIOOElSDjhJYg44SXIOOEmCDjhJknLAogIENoaW5lc2VDaGFyYWN0ZXJzOiAn6Zu2IOWjuSDotLAg5Y+BIOiChiDkvI0g6ZmGIOafkiDmjYwg546WIOaLviDkvbAg5LufIOS4hyDkur8g5YWGIOWQiSDlpKog5ouNIOiJviDliIYg5Y6YIOavqyDlvq4g546KIOWYgiDmp5Eg5pykIOWbjSDlrLIg5auQIOmdkCDpvpgg6ZGrIOa3vCDnhLEg5ZimIOW3rSDli6Ug5rC8IOWrkSDngpsg5oGPIOWFsiDlpaMg54OOIOW/iCDpvpEg5LiAIOS4qCDkuL8g5Li2IOOHjyDkuoUg5LmaIOS5myDjh4Ag5LmAIOOEiyDjgIcg8KCDiiDwoIOOIPCgg40g5YyaIOWHtSDlhoIg5LiFIOS4hCDwoISMIPCgg4sg8KG/qCDwoIOMIOWNjSDmm7Eg44ChIOOAoiDjgKMg44CkIOOApSDjgKYg44CnIOOAqCDjgKkg5Y2BIOWNkCDnlLQg5byNIOW8jiDlvJAg5Y2EIOW3nCDjgIYg44CDIOOAhSDjga4g5ZunIOS4tiDlhqsg5rC1IOeBrCDpmJ0g5Y2pIOWIgiDlv4Qg6K6gIOaJjCDkursg5b2zIOWOgyDiuoEg8KCYqCDiuoYg4rqEIOW5vyDnlpIg6aWjIOmShSDnpLsg6KGkIOi+tiDniZwg6YeSIOmjoCDiuqog4ruKIOezuSDiup0g5LipIOS4rCDniq0g57qfIOW7tCDmlLUg5aSKIOeavyDoh7wg6JmNIOWLuSDlsKIg5bu+IOatuiDlpKwg5rC6IOS4giDniKsg55m2IOiAgiDiursg4rquIOK6syDiurYg4rq3IOK6iCDpvrUg5b2QIOK6iyDnvZIg6KaAIOK7lyDkuqAg5a6AIOWGliDoibkg4rqMIOS4tyDiuqcg5LqHIOW9oScsCiAgRW5nbGlzaFBob25vZ3JhbTogJ8mRy5AgyZQ6IMmcy5AgaTogdTogyowgyZIgyZkgyaogyoogZSDDpiBlyaogYcmqIMmUyaogyarJmSBlyZkgyorJmSDJmcqKIGHKiiBwIHQgayBmIM64IHMgYiBkIGcgdiDDsCB6IMqDIGggdHMgdMqDIGogdHIgypIgciBkeiBkypIgZHIgdyBtIG4gxYsgbCcsCiAgT3RoZXI6ICcvIOKIpyB7ICQgIyDCpSDimYIg4pmAJwp9OwpleHBvcnQgdmFyIHN5bWJvbE9iaiA9IFt7CiAgbGFiZWw6ICfnibnmrornrKblj7cnLAogIHR5cGU6ICdTcGVjaWFsU3ltYm9scycsCiAgY29udGVudDogW10KfSwgewogIGxhYmVsOiAn5qCH54K556ym5Y+3JywKICB0eXBlOiAnUHVuY3R1YXRpb24nLAogIGNvbnRlbnQ6IFtdCn0sIHsKICBsYWJlbDogJ+aVsOWtl+W6j+WPtycsCiAgdHlwZTogJ0RpZ2l0U2VyaWFsTnVtYmVyJywKICBjb250ZW50OiBbXQp9LCB7CiAgbGFiZWw6ICfmlbDlrZcv5Y2V5L2NJywKICB0eXBlOiAnTnVtYmVyTm5pdCcsCiAgY29udGVudDogW10KfSwgewogIGxhYmVsOiAn5biM6IWKL+aLieS4gScsCiAgdHlwZTogJ0dyZWVjZUxhdGluJywKICBjb250ZW50OiBbXQp9LCB7CiAgbGFiZWw6ICfmi7zpn7Mv5rOo6Z+zJywKICB0eXBlOiAnUGlueWluQm9wb21vZm8nLAogIGNvbnRlbnQ6IFtdCn0sIHsKICBsYWJlbDogJ+S4reaWh+Wtl+espicsCiAgdHlwZTogJ0NoaW5lc2VDaGFyYWN0ZXJzJywKICBjb250ZW50OiBbXQp9LCB7CiAgbGFiZWw6ICfoi7Hmlofpn7PmoIcnLAogIHR5cGU6ICdFbmdsaXNoUGhvbm9ncmFtJywKICBjb250ZW50OiBbXQp9LCB7CiAgbGFiZWw6ICflhbbku5YnLAogIHR5cGU6ICdPdGhlcicsCiAgY29udGVudDogW10KfV07CgppZiAodHlwZW9mIHN5bWJvbE9iaiAhPT0gJ3VuZGVmaW5lZCcgJiYgc3ltYm9sT2JqICYmIHN5bWJvbE9iaiA9PT0gT2JqZWN0KHN5bWJvbE9iaikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShzeW1ib2xPYmopKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN5bWJvbE9iaiwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogInN5bWJvbE9iaiIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCnZhciBzcGVjaWFsSWNvbiA9IHsKICAn7p+HJzogJ2h0dHBzOi8vdGVzdC0xMjU0NDU1ODYxLnBpY2NkLm15cWNsb3VkLmNvbS9kYXRhL2NhbGN1bGF0ZV9mZWF0dXJlcy8yMDIwMDQxNi8zNjBjOGUzYjdjMjU1YTQ1MzAzMzAwZGI2M2FhY2I1YS5wbmc/aW1hZ2VWaWV3Mi8zL2gvMTYnLAogICfun4gnOiAnaHR0cHM6Ly90ZXN0LTEyNTQ0NTU4NjEucGljY2QubXlxY2xvdWQuY29tL2RhdGEvY2FsY3VsYXRlX2ZlYXR1cmVzLzIwMjAwNDE2L2YwMjIyMzBiMDA5NmE0MDYyOTdlZjg2ZmFjM2ViOWFkLnBuZz9pbWFnZVZpZXcyLzMvaC8xNicsCiAgJ+OEpyc6ICdodHRwczovL3Rlc3QtMTI1NDQ1NTg2MS5waWNjZC5teXFjbG91ZC5jb20vZGF0YS9jYWxjdWxhdGVfZmVhdHVyZXMvMjAyMDA0MTUvNTMzMzNiOGQ5YTI2MmQyODUyZTJkOTZjNWViMGNlNGEucG5nP2ltYWdlVmlldzIvMy9oLzE2JywKICAn6b61JzogJ2h0dHBzOi8vdGVzdC0xMjU0NDU1ODYxLnBpY2NkLm15cWNsb3VkLmNvbS9kYXRhL2NhbGN1bGF0ZV9mZWF0dXJlcy8yMDIwMDQxNi9jMmQ5MWY3ZDQ5YzQwMGRjYjBjZjhkMjM3ZmUyMWQ5Yy5wbmc/aW1hZ2VWaWV3Mi8zL3cvMTUnCn07CmV4cG9ydCBmdW5jdGlvbiBzeW1ib2xMaXN0KCkgewogIHZhciBvYmogPSBfLm1hcChzeW1ib2xPYmosIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAvLyBsZXQgY29udGVudEl0ZW0gPSBBcnJheS5mcm9tKGljb25Mc3RbaXRlbS50eXBlXSk7CiAgICB2YXIgY29udGVudEl0ZW0gPSBpY29uTHN0W2l0ZW0udHlwZV0uc3BsaXQoJyAnKTsKICAgIGl0ZW0uY29udGVudCA9IF8ubWFwKGNvbnRlbnRJdGVtLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgc3RyMCA9ICfikaAg4pGhIOKRoiDikaMg4pGkIOKRpSDikaYg4pGnIOKRqCDikaknOwogICAgICB2YXIgc3RyID0gJ+KRqiDikasg4pGsIOKRrSDika4g4pGvIOKRsCDikbEg4pGyIOKRsyc7CiAgICAgIHZhciBzdHIyID0gJ+6fh+6fiOOEp+m+tSc7CiAgICAgIHZhciBzdHIzID0gJ21vbCc7IC8vIGlmIChzdHIwLmluZGV4T2YoaXRlbSkgPiAtMSkgewogICAgICAvLyAgICAgcmV0dXJuIHsKICAgICAgLy8gICAgICAgICB0ZXh0OiBpdGVtLAogICAgICAvLyAgICAgICAgIGZvbnRTaXplOiAnMTYnCiAgICAgIC8vICAgICB9OwogICAgICAvLyB9CgogICAgICBpZiAoc3RyLmluZGV4T2YoaXRlbSkgPiAtMSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0ZXh0OiBpdGVtLAogICAgICAgICAgZm9udFNpemU6ICcxNycKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoc3RyMy5pbmRleE9mKGl0ZW0pID4gLTEpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dDogaXRlbSwKICAgICAgICAgIGZvbnRTaXplOiAnMTAnCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHN0cjIuaW5kZXhPZihpdGVtKSA+IC0xKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG1lZGlhVHlwZTogJ0lNQUdFJywKICAgICAgICAgIGNoYXJhY3Rlcjogc3BlY2lhbEljb25baXRlbV0sCiAgICAgICAgICBjaGlsZHJlbjogW3sKICAgICAgICAgICAgdGV4dDogJycsCiAgICAgICAgICAgIG1hcms6IFtdCiAgICAgICAgICB9XSwKICAgICAgICAgIHR5cGU6ICdtZW50aW9uJwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgdGV4dDogaXRlbSwKICAgICAgICB0eXBlOiAnc3RyaW5nJwogICAgICB9OwogICAgfSk7CiAgICByZXR1cm4gaXRlbTsKICB9KTsKCiAgcmV0dXJuIG9iajsKfQoKaWYgKHR5cGVvZiBzeW1ib2xMaXN0ICE9PSAndW5kZWZpbmVkJyAmJiBzeW1ib2xMaXN0ICYmIHN5bWJvbExpc3QgPT09IE9iamVjdChzeW1ib2xMaXN0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHN5bWJvbExpc3QpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN5bWJvbExpc3QsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJzeW1ib2xMaXN0IiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBjb2xvckxpc3QgPSBbJzAwMDAwMCcsICc1MjUyNTInLCAnOTY5Njk2JywgJ2Q5ZDlkOScsICdFREVERUQnLCAnYjcxYzFjJywgJ2QzMmYyZicsICdmNDQzMzYnLCAnZTU3MzczJywgJ2ZmY2RkMicsICc4ODBlNGYnLCAnYzIxODU2JywgJ2U5MWU2MycsICdmMDYyOTInLCAnZjhkZGIwJywgJzRhMTQ4YycsICc3YjFmYTInLCAnOWMyN2IwJywgJ2JhNjhjOCcsICdlMWJlZTcnLCAnMzExYjkyJywgJzUxMmRhOCcsICc2NzNhYjcnLCAnOTU3NWNkJywgJ2QxYzRlOScsICcxYTIzN2UnLCAnMzAzZjlmJywgJzNmNTFiNScsICc3OTg2Y2InLCAnYzVjYWU5JywgJzBkNDdhMScsICcxOTc2ZDInLCAnMjE5NmYzJywgJzY0YjVmNicsICdiYmRlZmInLCAnMDE1Nzk2JywgJzAyODhkMScsICcwM2E5ZjQnLCAnNGZjM2Y3JywgJ2IzZTVmYycsICcwMDYwNjQnLCAnMDA5N2E3JywgJzAwYmNkNCcsICc0ZGQwZTEnLCAnYjJlYmYyJywgJzAwNGQ0MCcsICcwMDc5NmInLCAnMDA5Njg4JywgJzRkYjZhYycsICdiMmRmZGInLCAnMTk0RDMzJywgJzM4OGUzYycsICc0Y2FmNTAnLCAnODFjNzg0JywgJ2M4ZTZjOScsICczMzY5MWUnLCAnNjg5ZjM4JywgJzhiYzM0YScsICdhZWQ1ODEnLCAnZGNlZGM4JywgJzgyNzcxNycsICdhZmI0MmInLCAnY2RkYzM5JywgJ2RjZTc3NScsICdmMGY0YzMnLCAnZjU3ZjE3JywgJ2ZiYzAyZCcsICdmZmViM2InLCAnZmZmMTc2JywgJ2ZmZjljNCcsICdmZjZmMDAnLCAnZmZhMDAwJywgJ2ZmYzEwNycsICdmZmQ1NGYnLCAnZmZlY2IzJywgJ2U2NTEwMCcsICdmNTdjMDAnLCAnZmY5ODAwJywgJ2ZmYjc0ZCcsICdmZmUwYjInLCAnYmYzNjBjJywgJ2U2NGExOScsICdmZjU3MjInLCAnZmY4YTY1JywgJ2ZmY2NiYycsICczZTI3MjMnLCAnNWQ0MDM3JywgJzc5NTU0OCcsICdhMTg4N2YnLCAnZDdjY2M4JywgJzI2MzIzOCcsICc0NTVhNjQnLCAnNjA3ZDhiJywgJzkwYTRhZScsICdjZmQ4ZGMnXTsKCmlmICh0eXBlb2YgY29sb3JMaXN0ICE9PSAndW5kZWZpbmVkJyAmJiBjb2xvckxpc3QgJiYgY29sb3JMaXN0ID09PSBPYmplY3QoY29sb3JMaXN0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGNvbG9yTGlzdCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29sb3JMaXN0LCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiY29sb3JMaXN0IiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBmb250U2l6ZUxpc3QgPSBbewogIGNvbnRlbnQ6ICfkupTlj7cnLAogIHZhbHVlOiAnMjEnCn0sIHsKICBjb250ZW50OiAn5bCP5ZubJywKICB2YWx1ZTogJzI0Jwp9LCB7CiAgY29udGVudDogJ+Wbm+WPtycsCiAgdmFsdWU6ICcyOCcKfSwgewogIGNvbnRlbnQ6ICflsI/kuIknLAogIHZhbHVlOiAnMzAnCn0sIHsKICBjb250ZW50OiAn5LiJ5Y+3JywKICB2YWx1ZTogJzMyJwp9LCB7CiAgY29udGVudDogJ+Wwj+S6jCcsCiAgdmFsdWU6ICczNicKfSwgewogIGNvbnRlbnQ6ICfkuozlj7cnLAogIHZhbHVlOiAnNDQnCn0sIHsKICBjb250ZW50OiAn5bCP5LiAJywKICB2YWx1ZTogJzQ4Jwp9LCB7CiAgY29udGVudDogJ+S4gOWPtycsCiAgdmFsdWU6ICc1MicKfSwgewogIGNvbnRlbnQ6ICflsI/liJ0nLAogIHZhbHVlOiAnNzInCn0sIHsKICBjb250ZW50OiAn5Yid5Y+3JywKICB2YWx1ZTogJzg0Jwp9XTsKCmlmICh0eXBlb2YgZm9udFNpemVMaXN0ICE9PSAndW5kZWZpbmVkJyAmJiBmb250U2l6ZUxpc3QgJiYgZm9udFNpemVMaXN0ID09PSBPYmplY3QoZm9udFNpemVMaXN0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGZvbnRTaXplTGlzdCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm9udFNpemVMaXN0LCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiZm9udFNpemVMaXN0IiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBmb250U2l6ZU9iaiA9IHsKICAnMjEnOiAn5LqU5Y+3JywKICAnMjQnOiAn5bCP5ZubJywKICAnMjgnOiAn5Zub5Y+3JywKICAnMzAnOiAn5bCP5LiJJywKICAnMzInOiAn5LiJ5Y+3JywKICAnMzYnOiAn5bCP5LqMJywKICAnNDQnOiAn5LqM5Y+3JywKICAnNDgnOiAn5bCP5LiAJywKICAnNTInOiAn5LiA5Y+3JywKICAnNzInOiAn5bCP5YidJywKICAnODQnOiAn5Yid5Y+3Jwp9OwoKaWYgKHR5cGVvZiBmb250U2l6ZU9iaiAhPT0gJ3VuZGVmaW5lZCcgJiYgZm9udFNpemVPYmogJiYgZm9udFNpemVPYmogPT09IE9iamVjdChmb250U2l6ZU9iaikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShmb250U2l6ZU9iaikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm9udFNpemVPYmosICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJmb250U2l6ZU9iaiIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB2YXIgZm9udExpc3QgPSBbewogIGNvbnRlbnQ6ICflrovkvZMnLAogIHZhbHVlOiAn5a6L5L2TJwp9LCB7CiAgY29udGVudDogJ+alt+S9kycsCiAgdmFsdWU6ICfmpbfkvZMnCn0sIHsKICBjb250ZW50OiAnVGltZXMgTmV3IFJvbWFuJywKICB2YWx1ZTogJ1RpbWVzIE5ldyBSb21hbicKfV07CgppZiAodHlwZW9mIGZvbnRMaXN0ICE9PSAndW5kZWZpbmVkJyAmJiBmb250TGlzdCAmJiBmb250TGlzdCA9PT0gT2JqZWN0KGZvbnRMaXN0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGZvbnRMaXN0KSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmb250TGlzdCwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImZvbnRMaXN0IiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IHZhciBmb250T2JqID0gewogICflrovkvZMnOiAn5a6L5L2TJywKICAn5qW35L2TJzogJ+alt+S9kycsCiAgJ1RpbWVzIE5ldyBSb21hbic6ICdUaW1lcyBOZXcgUm9tYW4nCn07CgppZiAodHlwZW9mIGZvbnRPYmogIT09ICd1bmRlZmluZWQnICYmIGZvbnRPYmogJiYgZm9udE9iaiA9PT0gT2JqZWN0KGZvbnRPYmopICYmIE9iamVjdC5pc0V4dGVuc2libGUoZm9udE9iaikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm9udE9iaiwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogImZvbnRPYmoiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9CgpleHBvcnQgdmFyIHF1ZXN0aW9uT2JqID0gZnVuY3Rpb24gcXVlc3Rpb25PYmooKSB7CiAgdmFyIGRhdGEgPSB7CiAgICBxdWVzdGlvbjogewogICAgICBxdWVzdGlvblR5cGU6ICcnLAogICAgICBzdGVtOiBbewogICAgICAgIGZyYWdtZW50czogW3sKICAgICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgICAgbWVkaWFUeXBlOiAnVEVYVCcsCiAgICAgICAgICBzdHlsZXM6IFtdCiAgICAgICAgfV0KICAgICAgfV0sCiAgICAgIGFuc3dlcjogW3sKICAgICAgICBmcmFnbWVudHM6IFt7CiAgICAgICAgICBjb250ZW50OiAnJywKICAgICAgICAgIG1lZGlhVHlwZTogJ1RFWFQnLAogICAgICAgICAgc3R5bGVzOiBbXQogICAgICAgIH1dCiAgICAgIH1dLAogICAgICBleHBsYW5hdGlvbjogW3sKICAgICAgICBmcmFnbWVudHM6IFt7CiAgICAgICAgICBjb250ZW50OiAnJywKICAgICAgICAgIG1lZGlhVHlwZTogJ1RFWFQnLAogICAgICAgICAgc3R5bGVzOiBbXQogICAgICAgIH1dCiAgICAgIH1dLAogICAgICBvcHRpb246IFt7CiAgICAgICAgZnJhZ21lbnRzOiBbewogICAgICAgICAgY29udGVudDogJycsCiAgICAgICAgICBtZWRpYVR5cGU6ICdURVhUJywKICAgICAgICAgIHN0eWxlczogWydpc0FkZCddCiAgICAgICAgfV0KICAgICAgfSwgewogICAgICAgIGZyYWdtZW50czogW3sKICAgICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgICAgbWVkaWFUeXBlOiAnVEVYVCcsCiAgICAgICAgICBzdHlsZXM6IFsnaXNBZGQnXQogICAgICAgIH1dCiAgICAgIH0sIHsKICAgICAgICBmcmFnbWVudHM6IFt7CiAgICAgICAgICBjb250ZW50OiAnJywKICAgICAgICAgIG1lZGlhVHlwZTogJ1RFWFQnLAogICAgICAgICAgc3R5bGVzOiBbJ2lzQWRkJ10KICAgICAgICB9XQogICAgICB9LCB7CiAgICAgICAgZnJhZ21lbnRzOiBbewogICAgICAgICAgY29udGVudDogJycsCiAgICAgICAgICBtZWRpYVR5cGU6ICdURVhUJywKICAgICAgICAgIHN0eWxlczogWydpc0FkZCddCiAgICAgICAgfV0KICAgICAgfV0KICAgIH0KICB9OwogIHJldHVybiBfLmNsb25lRGVlcChkYXRhKTsKfTsKCmlmICh0eXBlb2YgcXVlc3Rpb25PYmogIT09ICd1bmRlZmluZWQnICYmIHF1ZXN0aW9uT2JqICYmIHF1ZXN0aW9uT2JqID09PSBPYmplY3QocXVlc3Rpb25PYmopICYmIE9iamVjdC5pc0V4dGVuc2libGUocXVlc3Rpb25PYmopKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHF1ZXN0aW9uT2JqLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAicXVlc3Rpb25PYmoiLAogICAgICBmaWxlbmFtZTogInNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihjaGFuZ2VKc29uLCAiY2hhbmdlSnNvbiIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZ2V0VmlkZW9VcmwsICJnZXRWaWRlb1VybCIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY2xhc3NOYW1lTGlzdCwgImNsYXNzTmFtZUxpc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGJsb2NrU3R5bGVMaXN0LCAiYmxvY2tTdHlsZUxpc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGNoYW5nZUh0bWwsICJjaGFuZ2VIdG1sIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRmcmFnbWVudHMsICJnZXRmcmFnbWVudHMiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHNob3dNYXRoSmF4LCAic2hvd01hdGhKYXgiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHNob3dNYXRoSmF4MSwgInNob3dNYXRoSmF4MSIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoaXNDaG9pY2UsICJpc0Nob2ljZSIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIob3B0aW9uT2JqZWN0LCAib3B0aW9uT2JqZWN0IiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihvcHRpb25WYWx1ZSwgIm9wdGlvblZhbHVlIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihxdWVzdGlvblR5cGVUZXh0LCAicXVlc3Rpb25UeXBlVGV4dCIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIocXVlc3Rpb25UeXBlLCAicXVlc3Rpb25UeXBlIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRRdWVzdGlvbiwgImdldFF1ZXN0aW9uIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRTdHJ1Y3R1cmUsICJnZXRTdHJ1Y3R1cmUiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldFF1ZXN0aW9uSHRtbCwgImdldFF1ZXN0aW9uSHRtbCIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZ2V0RW1wdHlPcHRpb24sICJnZXRFbXB0eU9wdGlvbiIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY2hlY2tBcnIsICJjaGVja0FyciIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY2hlY2tRdWVzdGlvbiwgImNoZWNrUXVlc3Rpb24iLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGIsICJiIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRRdWVzdGlvblR5cGUsICJnZXRRdWVzdGlvblR5cGUiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKFZlcmlmaWNhdGlvbktleSwgIlZlcmlmaWNhdGlvbktleSIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoaWNvbk9iaiwgImljb25PYmoiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGNsYXNzTmFtZXNMaXN0LCAiY2xhc3NOYW1lc0xpc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHNob3dTdHlsZSwgInNob3dTdHlsZSIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoc2hvd05vZGUsICJzaG93Tm9kZSIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoVGV4dEluZGVudExpc3QsICJUZXh0SW5kZW50TGlzdCIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoTGluZVNwYWNlTGlzdCwgIkxpbmVTcGFjZUxpc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKExpc3RXb3JkU3BhY2UsICJMaXN0V29yZFNwYWNlIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihpY29uTHN0LCAiaWNvbkxzdCIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoc3ltYm9sT2JqLCAic3ltYm9sT2JqIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihzcGVjaWFsSWNvbiwgInNwZWNpYWxJY29uIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihzeW1ib2xMaXN0LCAic3ltYm9sTGlzdCIsICJGOlxcc2xhdGVcXGVhc3RlZHVDb21wb2VudHNcXHNyY1xcUXVlc3Rpb25FZGl0b3JcXGVkaXRvclxcY2xpZW50LnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY29sb3JMaXN0LCAiY29sb3JMaXN0IiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcihmb250U2l6ZUxpc3QsICJmb250U2l6ZUxpc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGZvbnRTaXplT2JqLCAiZm9udFNpemVPYmoiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGZvbnRMaXN0LCAiZm9udExpc3QiLCAiRjpcXHNsYXRlXFxlYXN0ZWR1Q29tcG9lbnRzXFxzcmNcXFF1ZXN0aW9uRWRpdG9yXFxlZGl0b3JcXGNsaWVudC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGZvbnRPYmosICJmb250T2JqIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihxdWVzdGlvbk9iaiwgInF1ZXN0aW9uT2JqIiwgIkY6XFxzbGF0ZVxcZWFzdGVkdUNvbXBvZW50c1xcc3JjXFxRdWVzdGlvbkVkaXRvclxcZWRpdG9yXFxjbGllbnQudHMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["F:/slate/easteduCompoents/src/QuestionEditor/editor/client.ts"],"names":["initMathjaxConfig","Tips","bold","centerAlignment","cleanUp","disorder","formatMatch","Italic","leftAlignment","order","picture","pinyin","point","rightAlignment","strikeout","subscript","superscript","symbol","textIndent","triangle","underline","video","wordspace","lineSpace","lowerTriangle","_","changeJson","json","initVal","NumberedListObj","key","hasOwnProperty","el","fragments","children","stylesObj","isVideoItem","forEach","element","content","obj","object","styles","text","indexOf","color","split","Wordspace","FontSize","Font","mediaType","type","character","tag","String","Math","random","replace","mark","width","scale","push","map","item","styleItem","length","hasNumberedList","filter","includes","alignment","NumberedList","e","undefined","ListItem","lastChildren","isEnd","getVideoUrl","urlObj","stem","questions","index","classNameList","blockStyleList","changeHtml","editorJson","getfragments","i","num","classNameItem","slice","fontFamily","fontSize","concat","cloneDeep","newStyleList","blockItem","StyleItem","indentation","showMathJax","hidden","window","MathJax","close","Hub","Queue","document","getElementById","showMathJax1","cb","isChoice","optionObject","optionValue","questionTypeText","SINGLE_CHOICE","MULTIPLE_CHOICE","INDEFINITE_CHOICE","COMPLETION","JUDGEMENT","FREE_RESPONSE","COMPREHENSIVE","questionType","getQuestion","question","questionArr","getStructure","Comprehensive","title","questionItem","isMinorTopic","getQuestionType","typeItem","isAdd","isFilled","isAnswer","requireText","optionLength","option","optionItem","answer","getQuestionHtml","questionList","checkQuestion","checkArr","getEmptyOption","questionStructure","isOnlyOption","ei","newQuestionStructure","JSON","parse","stringify","newQuestionStructure1","splice","pop","errList","result","require","b","FORMULA","image","italic","code","questionDemo","isFistRich","VerificationKey","iconObj","classNamesList","showStyle","name","sign","SubscriptButton","showNode","TextIndentList","LineSpaceList","ListWordSpace","iconLst","SpecialSymbols","Punctuation","DigitSerialNumber","NumberNnit","GreeceLatin","PinyinBopomofo","ChineseCharacters","EnglishPhonogram","Other","symbolObj","label","specialIcon","symbolList","contentItem","str0","str","str2","str3","colorList","fontSizeList","value","fontSizeObj","fontList","fontObj","questionObj","data","explanation"],"mappings":"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","sourcesContent":["import { initMathjaxConfig } from '../../showQuestion/MathConfig';\r\ninitMathjaxConfig();\r\n// import { Tips } from '../index';\r\nimport { Tips } from '../../MessageTips/index';\r\nimport {\r\n    bold,\r\n    centerAlignment,\r\n    cleanUp,\r\n    disorder,\r\n    formatMatch,\r\n    Italic,\r\n    leftAlignment,\r\n    order,\r\n    picture,\r\n    pinyin,\r\n    point,\r\n    rightAlignment,\r\n    strikeout,\r\n    subscript,\r\n    superscript,\r\n    symbol,\r\n    textIndent,\r\n    triangle,\r\n    underline,\r\n    video,\r\n    wordspace,\r\n    lineSpace,\r\n    lowerTriangle\r\n} from './toolbarIcon';\r\nimport _ from 'lodash';\r\n\r\nexport const changeJson = (json: any) => {\r\n\r\n    let initVal: any = [];\r\n    let NumberedListObj: any = {};\r\n\r\n\r\n    for (const key in json) {\r\n\r\n        if (json.hasOwnProperty(key)) {\r\n            const el = json[key].fragments;\r\n            let children: any = [];\r\n            // 添加段落样式\r\n            let stylesObj: any = {};\r\n            let isVideoItem = false;\r\n            el.forEach((element: any) => {\r\n\r\n                element.content = element.content ? element.content : '';\r\n\r\n                if (element.content !== '\\u200B') {\r\n\r\n                    let obj: any = {};\r\n                    let object = element.styles;\r\n                    obj.text = element.content;\r\n\r\n                    for (const key in object) {\r\n                        if (object.hasOwnProperty(key)) {\r\n                            const el = object[key];\r\n\r\n                            if (el.indexOf('Color') !== -1) {\r\n                                let color = el.split('Color')[1];\r\n                                obj['color'] = `#${color}`;\r\n                            } else if (el.indexOf('Wordspace') !== -1) {\r\n\r\n                                let Wordspace = el.split('#')[1];\r\n                                obj['Wordspace'] = `${Wordspace}`;\r\n                            } else if (el.indexOf('FontSize') !== -1) {\r\n                                let FontSize = el.split('FontSize')[1];\r\n                                obj['FontSize'] = `${FontSize}`;\r\n                            } else if (el.indexOf('Font') !== -1) {\r\n                                let Font = el.split('Font')[1];\r\n                                obj['Font'] = `${Font}`;\r\n                            } else {\r\n                                obj[el] = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (element.mediaType === 'IMAGE' || element.mediaType === 'FORMULA') {\r\n\r\n                        obj = {\r\n                            type: 'mention',\r\n                            mediaType: element.mediaType,\r\n                            character: element.content,\r\n                            tag: String(Math.random()).replace('\\.', ''),\r\n                            children: [{ text: 'IMAGE', mark: [] }],\r\n                        };\r\n\r\n                        let object = element.styles;\r\n\r\n                        // 添加图片的宽度和缩放\r\n                        for (const key in object) {\r\n                            if (object.hasOwnProperty(key)) {\r\n                                const el = object[key];\r\n                                if (el.indexOf('width') !== -1) {\r\n                                    let width = el.split('#')[1];\r\n                                    obj['width'] = width;\r\n                                }\r\n                                if (el.indexOf('scale') !== -1) {\r\n                                    let scale = el.split('#')[1];\r\n                                    obj['scale'] = scale;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        children.push({\r\n                            text: '\\u200B',\r\n                            type: 'space',\r\n                            tag: String(Math.random()).replace('\\.', '')\r\n                        });\r\n                        children.push(obj);\r\n\r\n                        children.push({\r\n                            text: '',\r\n                            type: 'space',\r\n                            tag: String(Math.random()).replace('\\.', '')\r\n                        });\r\n\r\n                    } else if (element.mediaType !== 'AUDIO'){\r\n                        children.push(obj);\r\n                    } else {\r\n                        isVideoItem = true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            (json[key].styles || []).map((item: any) => {\r\n                let styleItem = item.split('#');\r\n                stylesObj[styleItem[0]] = styleItem[1];\r\n            });\r\n\r\n            if (children.length) {\r\n\r\n                // 判断是否是排序\r\n                const hasNumberedList = (json[key].styles || []).filter((element: any) => {\r\n                    return element.includes('NumberedList');\r\n                });\r\n\r\n                if (hasNumberedList.length === 0) {\r\n                    initVal.push({\r\n                        children: children,\r\n                        type: json[key].alignment,\r\n                        styles: json[key].styles || [],\r\n                        ...stylesObj\r\n                    });\r\n                } else {\r\n                    let type = hasNumberedList[0].split('#');\r\n\r\n                    delete stylesObj.NumberedList;\r\n\r\n                    let styles = (json[key].styles || []).filter((e: any) => !e.includes('NumberedList'));\r\n\r\n                    if (NumberedListObj[hasNumberedList[0]] === undefined) {\r\n\r\n                        initVal.push({\r\n                            NumberedList: type[1],\r\n                            children: [{\r\n                                ListItem: true,\r\n                                children: children,\r\n                                type: json[key].alignment,\r\n                                styles: styles,\r\n                                ...stylesObj\r\n                            }]\r\n                        });\r\n                        NumberedListObj[hasNumberedList[0]] = initVal.length - 1;\r\n                    } else {\r\n\r\n                        initVal[NumberedListObj[hasNumberedList[0]]].children.push({\r\n                            children: children,\r\n                            ListItem: true,\r\n                            type: json[key].alignment,\r\n                            styles: styles,\r\n                            ...stylesObj\r\n                        });\r\n\r\n                        NumberedListObj[hasNumberedList[0]] = initVal.length - 1;\r\n                    }\r\n                }\r\n\r\n            } else if (!isVideoItem){\r\n\r\n                initVal.push({\r\n                    children: [{ text: '' }],\r\n                    type: json[key].alignment,\r\n                    styles: json[key].styles || [],\r\n                    ...stylesObj\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // 当最后是图片或者公式的时候，增加空格\r\n    let lastChildren = initVal.length !== 0 && initVal[initVal.length - 1].children;\r\n\r\n    if (lastChildren && lastChildren.length > 0 && lastChildren[lastChildren.length - 1].type === 'space') {\r\n        initVal[initVal.length - 1].children.push({\r\n            text: ' ',\r\n            isEnd: true,\r\n            type: ''\r\n        });\r\n    }\r\n\r\n    if (initVal.length === 0) {\r\n        initVal = [{\r\n            children: [{ text: '' }],\r\n            type: 'Left'\r\n        }];\r\n    }\r\n\r\n    return initVal;\r\n};\r\n\r\nexport function getVideoUrl(item: any) {\r\n\r\n    let urlObj: any = {\r\n        content: '',\r\n    };\r\n    _.map(item.stem, (element) => {\r\n        _.map(element.fragments, (el) => {\r\n            if (el.mediaType === 'AUDIO') {\r\n                urlObj.content = el.content;\r\n            }\r\n        })\r\n    });\r\n\r\n    if (item.questions && item.questions.length > 0) {\r\n        let questions: any = {};\r\n        _.map(item.questions, (el, index) => {\r\n            questions[index] = getVideoUrl(el);\r\n        });\r\n        urlObj.questions = questions;\r\n    }\r\n\r\n    return urlObj;\r\n}\r\n\r\n\r\nconst classNameList = ['Bold', 'UnderlineWave', 'Italic', 'UnderlineDotted', 'UnderlineDouble', 'VertAlignSuperscript', 'VertAlignSubscript', 'UnderlineSingle', 'Strike', 'EmphasisDot'];\r\nconst blockStyleList = ['LineSpace', 'TextIndent'];\r\n\r\n\r\n\r\nexport const changeHtml = (json: any) => {\r\n\r\n    let editorJson = [];\r\n\r\n    for (const key in json) {\r\n        if (json.hasOwnProperty(key)) {\r\n            const element = json[key].children;\r\n\r\n            // console.log(element);\r\n\r\n            // 如果有排序的数据\r\n            if (!json[key].NumberedList) {\r\n                editorJson = getfragments(json, key, editorJson);\r\n\r\n            } else {\r\n                /* eslint-disable */\r\n                for (const i in json[key].children) {\r\n                    if (json[key].children.hasOwnProperty(i)) {\r\n                        const element = json[key].children[key];\r\n\r\n                        editorJson = getfragments(json[key].children, i, editorJson, json[key].NumberedList, key);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return editorJson;\r\n};\r\n\r\nlet getfragments = function(json: any, key: any, editorJson?: any, NumberedList?: any, num?: any) {\r\n\r\n    const element = json[key].children;\r\n\r\n    let fragments: any = [];\r\n\r\n    // if (!element) {\r\n    //     return [];\r\n    // }\r\n\r\n    if (element) {\r\n\r\n        for (let index = 0; index < element.length; index++) {\r\n            let obj = {};\r\n            const el = element[index];\r\n\r\n            let styles = classNameList.filter((classNameItem) => {\r\n\r\n                return el[classNameItem];\r\n            });\r\n\r\n            if (el.color) {\r\n                let color = el.color.slice(1);\r\n                styles.push(`Color${color}`);\r\n            }\r\n\r\n            if (el.Font) {\r\n                let fontFamily = el.Font;\r\n                styles.push(`Font${fontFamily}`);\r\n            }\r\n            if (el.FontSize) {\r\n                let fontSize = el.FontSize;\r\n                styles.push(`FontSize${fontSize}`);\r\n            }\r\n\r\n            if (el.Wordspace) {\r\n                styles.push(`Wordspace#${el.Wordspace}`);\r\n            }\r\n\r\n            if (el.width) {\r\n                styles.push(`width#${el.width}`);\r\n            }\r\n\r\n            if (el.scale) {\r\n                styles.push(`scale#${el.scale}`);\r\n            }\r\n\r\n            if (el.mediaType !== 'FORMULA' && el.mediaType !== 'IMAGE') {\r\n                obj = {\r\n                    content: el.text,\r\n                    mediaType: 'TEXT',\r\n                    styles: styles\r\n                };\r\n            } else if (el.mediaType === 'IMAGE' || el.mediaType === 'FORMULA') {\r\n                obj = {\r\n                    content: el.character,\r\n                    mediaType: el.mediaType,\r\n                    styles: styles\r\n                };\r\n            }\r\n\r\n            if ((el.type === 'space' && el.text && el.text.replace(/(^\\s*)|(\\s*$)/g, '') !== '') || (el.type !== 'space')) {\r\n                fragments = fragments.concat(_.cloneDeep(obj));\r\n            }\r\n        }\r\n\r\n        if (fragments.length) {\r\n\r\n            let newStyleList = blockStyleList.filter((blockItem) => {\r\n\r\n                return json[key][blockItem];\r\n            });\r\n\r\n            newStyleList = newStyleList.map((StyleItem) => {\r\n                return `${StyleItem}#${json[key][StyleItem]}`;\r\n            });\r\n\r\n            // 有排序进行处理\r\n            if (NumberedList) {\r\n                newStyleList.push(`NumberedList#${NumberedList}#${num}`);\r\n            }\r\n\r\n            editorJson.push({\r\n                fragments: fragments,\r\n                alignment: json[key].type,\r\n                styles: newStyleList,\r\n                indentation: 0\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    return editorJson;\r\n};\r\n\r\n\r\n\r\nexport const showMathJax = (hidden?: any) => {\r\n\r\n    if (!hidden) {\r\n        // Tips.open({\r\n        //     message: '加载中...',\r\n        //     type: 'spin',\r\n        //     isShow: true\r\n        // });\r\n    }\r\n    // @ts-ignore\r\n    if (window?.MathJax) {\r\n        if (!hidden) {\r\n            Tips.close();\r\n        }\r\n        // @ts-ignore\r\n        window?.MathJax.Hub.Queue(['Typeset', MathJax.Hub, document.getElementById('RichText')]);\r\n    }\r\n\r\n};\r\n\r\nexport const showMathJax1 = (cb: Function) => {\r\n    // @ts-ignore\r\n    if (window?.MathJax) {\r\n        // @ts-ignore\r\n        window?.MathJax.Hub.Queue(['Typeset', MathJax.Hub, document.getElementById('root')], () => {\r\n            cb && cb();\r\n        });\r\n    }\r\n\r\n};\r\n\r\n\r\nexport const isChoice = ['SINGLE_CHOICE', 'MULTIPLE_CHOICE', 'INDEFINITE_CHOICE'];\r\nexport const optionObject = [\r\n    ['√', '×'],\r\n    ['T', 'F'],\r\n    ['True', 'False'],\r\n    ['正确', '错误'],\r\n    ['A', 'B'],\r\n    // ['a', 'b'],\r\n\r\n    // ['是', '否'],\r\n    // ['对', '错'],\r\n    // ['TRUE', 'FALSE'],\r\n    // ['true', 'false'],\r\n    // ['✔', '✖'],\r\n];\r\nexport const optionValue = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\nexport let questionTypeText: any = {\r\n    SINGLE_CHOICE: '',\r\n    MULTIPLE_CHOICE: '（请设置多个答案）',\r\n    INDEFINITE_CHOICE: '（请设置一个或多个答案）',\r\n    COMPLETION: '',\r\n    JUDGEMENT: '',\r\n    FREE_RESPONSE: '',\r\n    COMPREHENSIVE: '',\r\n};\r\n\r\n\r\nexport let questionType = {\r\n    SINGLE_CHOICE: '单选题',\r\n    MULTIPLE_CHOICE: '多选题',\r\n    INDEFINITE_CHOICE: '不定项选择题',\r\n    COMPLETION: '填空题',\r\n    JUDGEMENT: '判断题',\r\n    FREE_RESPONSE: '解答题',\r\n    COMPREHENSIVE: '综合题',\r\n};\r\n\r\nexport function getQuestion(question: any, questionType: any) {\r\n\r\n    let questionArr = getStructure(question, questionType);\r\n\r\n\r\n    if (questionType === 'COMPREHENSIVE') {\r\n        let Comprehensive = {\r\n            type: 'comprehensive',\r\n            title: '综合题',\r\n            content: []\r\n        };\r\n        Comprehensive.content = (question.questions || []).map((questionItem: any) => {\r\n            return getStructure(questionItem, questionItem.questionType, true);\r\n        });\r\n        questionArr.push(Comprehensive);\r\n    }\r\n\r\n    return questionArr;\r\n}\r\n\r\nfunction getStructure(question: any, questionType: any, isMinorTopic?: any) {\r\n   \r\n    let questionArr  = getQuestionType(questionType, isMinorTopic).map((typeItem: any) => {\r\n\r\n        typeItem.content = changeJson(question[typeItem['type']]);\r\n        typeItem.questionType = question.questionType;\r\n\r\n        // 当选择题的时候，添加内容\r\n        if (typeItem['type'] === 'option' && isChoice.indexOf(questionType) > -1) {\r\n\r\n            typeItem.content = typeItem.content.map((item: any) => {\r\n\r\n                item['children'][0].isAdd = true;\r\n                item.isFilled = true;\r\n                item.isAnswer= false;\r\n                item.key = String(Math.random()).replace('\\.', '');\r\n                item.requireText = '内容不能为空';\r\n                return item;\r\n            });\r\n\r\n        }\r\n\r\n        if (typeItem['type'] === 'answer') {\r\n\r\n            if (isChoice.indexOf(questionType) > -1) {\r\n                let optionLength = question.option && question.option.length;\r\n                typeItem.isChoice = true;\r\n                typeItem.option = optionValue.slice(0, optionLength);\r\n                typeItem.questionType = questionType;\r\n\r\n                typeItem.content = typeItem.content.filter((item: any) => {\r\n                    return item.children && item.children.length === 1 && optionValue.indexOf(item.children[0]['text'].replace(/\\s/g, '')) > -1;\r\n                });\r\n            } else if (questionType === 'JUDGEMENT') {\r\n\r\n                typeItem.isChoice = true;\r\n                typeItem.questionType = questionType;\r\n\r\n                typeItem.option = optionObject.filter((optionItem) => {\r\n                    return question.answer && question.answer[0] && optionItem.indexOf(question.answer[0].fragments[0]['content']) > -1;\r\n                })[0] || ['√', '×'];\r\n\r\n                typeItem.content = typeItem.content.filter((item: any) => {\r\n                    return item.children && item.children.length && typeItem.option.indexOf(item.children[0]['text']) > -1;\r\n                });\r\n            } else {\r\n                typeItem.requireText = '内容不能为空';\r\n            }\r\n        }\r\n\r\n        return typeItem;\r\n    });\r\n\r\n    return questionArr;\r\n}\r\n\r\n\r\nexport function getQuestionHtml(question: any, type: string) {\r\n\r\n    let questionList: any = {};\r\n    // 验证是否有错\r\n    let checkQuestion = checkArr(question, type);\r\n\r\n    question.map((item: any) => {\r\n        if (item.type !== 'comprehensive') {\r\n            questionList[item.type] = changeHtml(item.content);\r\n        } else {\r\n            questionList.questions = item['content'].map((el: any) => {\r\n                let obj: any = {};\r\n                el.map((i: any) => {\r\n                    return obj[i.type] = changeHtml(i.content);\r\n                });\r\n\r\n                return obj;\r\n            });\r\n        }\r\n    });\r\n\r\n    return {\r\n        questionList,\r\n        ...checkQuestion\r\n    };\r\n}\r\n\r\n\r\nexport function getEmptyOption(index: any, questionStructure: any, isOnlyOption: any, ei: any) {\r\n\r\n    let newQuestionStructure = JSON.parse(JSON.stringify(questionStructure)).map((questionItem: any) => {\r\n        if (questionItem.type === 'option') {\r\n            if (questionItem.content.length === 2) {\r\n                isOnlyOption = true;\r\n            }\r\n            questionItem.content.length = 0;\r\n        }\r\n\r\n        if (questionItem.type === 'comprehensive') {\r\n\r\n            questionItem.content[ei].map((item: any) => {\r\n                if (item.type === 'option') {\r\n                    if (item.content.length === 2) {\r\n                        isOnlyOption = true;\r\n                    }\r\n                    item.content.length = 0;\r\n                }\r\n            });\r\n        }\r\n        return questionItem;\r\n    });\r\n\r\n    let newQuestionStructure1 = JSON.parse(JSON.stringify(questionStructure)).map((questionItem: any) => {\r\n        if (questionItem.type === 'option') {\r\n            questionItem.content.splice(index, 1);\r\n        }\r\n        if (questionItem.type === 'answer') {\r\n            questionItem.option.pop();\r\n            questionItem.content = questionItem.content.filter((item: any) => {\r\n                return questionItem.option.indexOf(item.children[0]['text'].replace(/(^\\s*)|(\\s*$)/g, '')) > -1;\r\n            });\r\n        }\r\n\r\n        if (questionItem.type === 'comprehensive') {\r\n\r\n            questionItem.content[ei].map((item: any) => {\r\n                if (item.type === 'option') {\r\n                    item.content.splice(index, 1);\r\n                }\r\n                if (item.type === 'answer') {\r\n                    item.option.pop();\r\n                    item.content = item.content.filter((el: any) => {\r\n                        return item.option.indexOf(el.children[0]['text'].replace(/(^\\s*)|(\\s*$)/g, '')) > -1;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        return questionItem;\r\n    });\r\n\r\n    return {\r\n        newQuestionStructure,\r\n        newQuestionStructure1,\r\n        isOnlyOption\r\n    };\r\n}\r\n\r\n\r\nfunction checkArr(question: any, type: any, errList: any = []) {\r\n\r\n    question.map((questionItem: any) => {\r\n\r\n        if (questionItem.type !== 'comprehensive') {\r\n            let obj = checkQuestion(questionItem, type, errList);\r\n            questionItem = obj.questionItem;\r\n            errList = obj.errList;\r\n        } else {\r\n\r\n            questionItem['content'].map((el: any, index: any) => {\r\n\r\n                el.map((e: any) => {\r\n                    let obj = checkQuestion(e, e.questionType, errList, index);\r\n                    e = obj.questionItem;\r\n                    errList = obj.errList;\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    return {\r\n        question: question,\r\n        errList: errList\r\n    };\r\n}\r\n\r\n\r\nfunction checkQuestion(questionItem: any, type: any, errList: any, i?: any) {\r\n\r\n    let text = '';\r\n\r\n    questionItem.content = typeof questionItem.content === 'string' ? JSON.parse(questionItem.content) : questionItem.content;\r\n\r\n    (questionItem.content || []).map((item: any) => {\r\n\r\n        if (item.NumberedList) {\r\n            text += ' ';\r\n        }\r\n        item.children.map((e: any) => {\r\n            // let result = e.text ? e.text.replace(/(^\\s*)|(\\s*$)/g, '') : '';\r\n            let result = e.text;\r\n            if (e.character) {\r\n                result += e.character ? e.character : '';\r\n            }\r\n\r\n            text += result;\r\n        });\r\n    });\r\n\r\n    if (questionItem.require &&\r\n        (questionItem.content.length === 0 ||\r\n        (text === ''))\r\n    ) {\r\n        questionItem.isFilled = false;\r\n        errList.push({\r\n            index: i,\r\n            type: questionItem.type\r\n        });\r\n    }\r\n\r\n    // 当非必填没有数据的时候，加一个'略'\r\n    if (!questionItem.require && text === '') {\r\n        questionItem.content = [{\r\n            children: [{\r\n                text: '略'\r\n            }],\r\n            type: 'Left'\r\n        }];\r\n    }\r\n\r\n    if (questionItem.type === 'option') {\r\n        questionItem['content'].map((item: any) => {\r\n            let text = '';\r\n\r\n            if (item.NumberedList) {\r\n                text += ' ';\r\n            }\r\n\r\n            // item.children.map((e:any) => {\r\n            //     let result = e.text ? e.text.replace(/(^\\s*)|(\\s*$)/g, '') : '';\r\n            //     if (e.character) {\r\n            //         result += e.character ? e.character.replace(/(^\\s*)|(\\s*$)/g, '') : '';\r\n            //     }\r\n            //     text += result;\r\n            // });\r\n\r\n            item.children.map((e: any) => {\r\n                // let result = e.text ? e.text.replace(/(^\\s*)|(\\s*$)/g, '') : '';\r\n                let result = e.text;\r\n                if (e.character) {\r\n                    result += e.character ? e.character : '';\r\n                }\r\n\r\n                text += result;\r\n            });\r\n\r\n            if (text === '') {\r\n                item.isFilled = false;\r\n                errList.push({\r\n                    index: i,\r\n                    type: questionItem.type\r\n                });\r\n\r\n                if (!questionItem.require) {\r\n                    item = [{\r\n                        children: [{\r\n                            text: '略'\r\n                        }],\r\n                        type: 'Left'\r\n                    }];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    if (questionItem.type === 'answer' && type === 'MULTIPLE_CHOICE' && questionItem['content'].length <= 1) {\r\n        questionItem.isFilled = false;\r\n        errList.push({\r\n            index: i,\r\n            type: questionItem.type\r\n        });\r\n    } else if (questionItem.type === 'answer' && (type === 'SINGLE_CHOICE' || type === 'JUDGEMENT') && questionItem['content'].length !== 1) {\r\n        questionItem.isFilled = false;\r\n        errList.push({\r\n            index: i,\r\n            type: questionItem.type\r\n        });\r\n    }\r\n\r\n    return { questionItem, errList };\r\n\r\n}\r\n\r\n\r\nlet b = [\r\n    {\r\n        children: [\r\n\r\n            { text: `<math display='block'> <mrow>  <msub>   <mi>S</mi>   <mrow>    <mo>&#x25B3;</mo><mi>O</mi><mi>B</mi><mi>C</mi></mrow>  </msub>  <mo>=</mo><mfrac>   <mn>1</mn>   <mn>2</mn>  </mfrac>  <mi>B</mi><mi>C</mi><mo>&#x22C5;</mo><mi>r</mi></mrow></math>`, FORMULA: true },\r\n            { text: 'https://www.mathjax.org/badge/sponsors/CUP', },\r\n            { text: 'https://www.mathjax.org/badge/sponsors/CUP.jpg', image: true },\r\n        ],\r\n    },\r\n    {\r\n        type: 'paragraph',\r\n        children: [\r\n            { text: 'This is editable ' },\r\n            { text: 'rich', bold: true },\r\n            { text: ' text, ' },\r\n            { text: 'much', italic: true },\r\n            { text: ' better than a ' },\r\n            { text: '<textarea>', code: true },\r\n            { text: '!' },\r\n        ],\r\n    },\r\n    {\r\n        type: 'right',\r\n        children: [\r\n            {\r\n                text:\r\n                    'Since it',\r\n            },\r\n            { text: 'bold', bold: true },\r\n            {\r\n                text:\r\n                    ', or add a semantically rendered block quote in the middle of the page, like this:',\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        type: 'block-quote',\r\n        children: [{ text: 'A wise quote.' }],\r\n    },\r\n    {\r\n        type: 'center',\r\n        children: [{ text: 'Try it out for yourself!' }],\r\n    },\r\n];\r\n\r\n\r\nexport let getQuestionType = (questionType: any, isMinorTopic: any) => {\r\n\r\n    let questionDemo = [\r\n\r\n        {\r\n            type: 'stem',  // 题型\r\n            title: !isMinorTopic ? '题干' : '小题题干',  // 标题\r\n            require: true, // 是否是必填\r\n            isFilled: true, // 是否填写\r\n            requireText: '内容不能为空', // 没填的提示\r\n            isFistRich: !isMinorTopic ? true : false, // 是否是第一个弹出框\r\n            content: [] // 富文本内容\r\n        },\r\n        {\r\n            type: 'option',\r\n            title: !isMinorTopic ? '选项' : '小题选项',\r\n            require: true,\r\n            isFilled: true,\r\n            content: []\r\n        },\r\n        {\r\n            type: 'answer',\r\n            title: !isMinorTopic ? '答案' : '小题答案',\r\n            require: true,\r\n            isFilled: true,\r\n            requireText: '正确答案没有选填',\r\n            option: [],\r\n            content: []\r\n        },\r\n        {\r\n            type: 'explanation',\r\n            title: !isMinorTopic ? '解析' : '小题解析',\r\n            content: []\r\n        }\r\n    ];\r\n\r\n    if (isChoice.indexOf(questionType) === -1) {\r\n        questionDemo.splice(1, 1);\r\n    }\r\n\r\n    if (questionType === 'COMPREHENSIVE') {\r\n        questionDemo = questionDemo.slice(0, 1);\r\n    }\r\n\r\n    return questionDemo;\r\n};\r\n\r\n\r\n\r\nexport const VerificationKey = [9, 13, 16, 17, 18, 32, 37, 38, 39, 40, 93]; // 不被验证的按键；\r\n\r\nexport const iconObj = {\r\n    bold: bold, // 加粗\r\n    centerAlignment: centerAlignment, // 居中\r\n    cleanUp: cleanUp, // 清除\r\n    disorder: disorder, // 无序排序\r\n    formatMatch: formatMatch, // 格式刷\r\n    Italic: Italic, // 斜杠\r\n    leftAlignment: leftAlignment, // 居左\r\n    order: order, // 有序排序\r\n    picture: picture, // 图片\r\n    pinyin: pinyin, // 拼音\r\n    point: point, // 着重号\r\n    rightAlignment: rightAlignment, // 居右\r\n    strikeout: strikeout, // 删除线\r\n    subscript: subscript, // 右下标\r\n    superscript: superscript, // 右上标\r\n    symbol: symbol, // 公式\r\n    textIndent: textIndent, // 首航缩进\r\n    triangle: triangle, // 点击向下\r\n    underline: underline, // 下标\r\n    video: video, // 音频\r\n    wordspace: wordspace, // 字间距\r\n    lineSpace: lineSpace, // 行间距\r\n    lowerTriangle: lowerTriangle // 下三角\r\n};\r\n\r\nexport const classNamesList = ['Bold', 'UnderlineWave', 'Italic', 'UnderlineDotted', 'UnderlineDouble', 'VertAlignSuperscript', 'VertAlignSubscript', 'UnderlineSingle', 'Strike'];\r\n\r\nexport const showStyle = [\r\n    // { name: 'bold', sign: 'Bold' },\r\n    // { name: 'Italic', sign: 'Italic' },\r\n    { name: 'underline', sign: 'UnderlineSingle', SubscriptButton: true },\r\n    // { name: 'strikeout', sign: 'Strike' },\r\n    // { name: 'subscript', sign: 'VertAlignSubscript' },\r\n    // { name: 'superscript', sign: 'VertAlignSuperscript' },\r\n    // { name: 'point', sign: 'EmphasisDot' },\r\n];\r\n\r\nexport const showNode = [\r\n    // { name: 'leftAlignment', sign: 'Left' },\r\n    // { name: 'centerAlignment', sign: 'Center' },\r\n    // { name: 'rightAlignment', sign: 'Right' },\r\n    // { name: 'textIndent', sign: 'TextIndent', togetherLowerTriangle: true },\r\n];\r\n\r\nexport const TextIndentList = [0, 0.5, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\n\r\nexport const LineSpaceList = ['1.0', 1.15, 1.5, '2.0', 2.25, '3.0'];\r\n\r\nexport const ListWordSpace = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\n\r\nlet iconLst: any = {\r\n    SpecialSymbols: '△ ▽ ○ ◇ □ ☆ ▷ ◁ ♤ ♡ ♢ ♧ ▲ ▼ ● ◆ ■ ★ ▶ ◀ ♠ ♥ ♦ ♣ ♀ ☺ ☑ √ ☒ × ∷ ※ ↖ ↑ ↗ ← → ↙ ↓ ↘ ↕ ↔',\r\n    Punctuation: '， 。 ？ ！ ： ； · … ~ & @ # , . ? ! : ; 、 …… ～ ＆ ＠ ＃ “ ” ‘ ’ 〝 〞 \" \\' ＂ ＇ ´ ＇ ( ) 【 】 《 》 ＜ ＞ ﹝ ﹞ < > ( ) [ ] « » ‹ › 〔 〕 〈 〉 { } ［ ］ 「 」 ｛ ｝ 〖 〗 『 』 ︵ ︷ ︹ ︿ ︽ ﹁ ﹃ ︻ ︗ / | \\\\ ︶ ︸ ︺ ﹀ ︾ ﹂ ﹄ ︼ ︘ ／ ｜ ＼ _ ＿ ﹏ ﹍ ﹎ ` ¦ ¡ ^ ­­\\¨ ˊ ¯ ￣ ﹋ ﹉ ﹊ ˋ ︴ ˇ',\r\n    DigitSerialNumber: '① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳ ⑴ ⑵ ⑶ ⑷ ⑸ ⑹ ⑺ ⑻ ⑼ ⑽ ⑾ ⑿ ⒀ ⒁ ⒂ ⒃ ⒄ ⒅ ⒆ ⒇ ⒈ ⒉ ⒊ ⒋ ⒌ ⒍ ⒎ ⒏ ⒐ ⒑ ⒒ ⒓ ⒔ ⒕ ⒖ ⒗ ⒘ ⒙ ⒚ ⒛ Ⅰ Ⅱ Ⅲ Ⅳ Ⅴ Ⅵ Ⅶ Ⅷ Ⅸ Ⅹ Ⅺ Ⅻ ⅰ ⅱ ⅲ ⅳ ⅴ ⅵ ⅶ ⅷ ⅸ ⅹ ❶ ❷ ❸ ❹ ❺ ❻ ❼ ❽ ❾ ❿ ㈠ ㈡ ㈢ ㈣ ㈤ ㈥ ㈦ ㈧ ㈨ ㈩',\r\n    NumberNnit: '﹢ ﹣ · / = ﹤ ﹥ ≦ ≧ ≮ ≯ ≡ ＋ － × ÷ ＝ ＜ ＞ ≤ ≥ ≈ ≒ ≠ ﹢ ﹣ ± ∶ ∵ ∴ ∷ ㏒ ㏑ ∑ ∏ ∅ ∝ ∽ ∈ ∩ ∧ ⊙ ⌒ ∥ ∟ ∣ ∂ ∆ ∞ ≌ ∉ ∪ ∨ ⊕ ⊿ ⊥ ∠ ∫ ∬ ∭ % ‰ ％ º ¹ ² ³ ⁿ ℅ ∮ ∯ ∰ ₁ ₂ ₃ ½ ⅓ ⅔ ¼ ¾ ° ℃ ℉ 〒 ㎎ ㎏ μm ㎜ ㎝ ㎞ ′ ¥ \\$ € ฿ ￡ ㎡ m³ ㏄ ml mol ㏕ ″ ￥ £ ￠ ₠',\r\n    GreeceLatin: 'Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ξ Ο Π Ρ Σ Τ Υ Φ Χ Ψ Ω α β γ δ ε ζ η θ ι κ λ μ ν ξ ο π ρ σ τ υ φ χ ψ ω À Á Â Ã Ä Å Æ Ç È É Ê Ë Ì Í Î Ï Ð Ñ Ò Ó Ô Õ Ö Ø Ù Ú Û Ü Ý Þ Š Ÿ Œ à á â ã ä å æ ç è é ê ë ì í î ï ð ñ ò ó õ ô ö ø ù ú û ü ý þ š ÿ œ',\r\n    PinyinBopomofo: 'ā á ǎ à ē é ě è ū ú ǔ ù ō ó ǒ ò ī í ǐ ì ǖ ǘ ǚ ǜ ê ń  ň ü  ㄚ ㄛ ㄜ ㄧ ㄨ ㄩ ㄝ ㄞ ㄟ ㄠ ㄡ ㄢ ㄣ ㄤ ㄥ ㄦ ㄅ ㄆ ㄇ ㄈ ㄉ ㄊ ㄋ ㄌ ㄍ ㄎ ㄏ ㄐ ㄑ ㄒ ㄓ ㄔ ㄕ ㄖ ㄗ ㄘ ㄙ',\r\n    ChineseCharacters: '零 壹 贰 叁 肆 伍 陆 柒 捌 玖 拾 佰 仟 万 亿 兆 吉 太 拍 艾 分 厘 毫 微 玊 嘂 槑 朤 囍 嬲 嫐 靐 龘 鑫 淼 焱 嘦 巭 勥 氼 嫑 炛 恏 兲 奣 烎 忈 龑 一 丨 丿 丶 ㇏ 亅 乚 乛 ㇀ 乀 ㄋ 〇 𠃊 𠃎 𠃍 匚 凵 冂 丅 丄 𠄌 𠃋 𡿨 𠃌 卍 曱 〡 〢 〣 〤 〥 〦 〧 〨 〩 十 卐 甴 弍 弎 弐 卄 巜 〆 〃 々 の 囧 丶 冫 氵 灬 阝 卩 刂 忄 讠 扌 亻 彳 厃 ⺁ 𠘨 ⺆ ⺄ 广 疒 饣 钅 礻 衤 辶 牜 釒 飠 ⺪ ⻊ 糹 ⺝ 丩 丬 犭 纟 廴 攵 夊 皿 臼 虍 勹 尢 廾 歺 夬 氺 丂 爫 癶 耂 ⺻ ⺮ ⺳ ⺶ ⺷ ⺈ 龵 彐 ⺋ 罒 覀 ⻗ 亠 宀 冖 艹 ⺌ 丷 ⺧ 亇 彡',\r\n    EnglishPhonogram: 'ɑː ɔ: ɜː i: u: ʌ ɒ ə ɪ ʊ e æ eɪ aɪ ɔɪ ɪə eə ʊə əʊ aʊ p t k f θ s b d g v ð z ʃ h ts tʃ j tr ʒ r dz dʒ dr w m n ŋ l',\r\n    Other: '/ ∧ { $ # ¥ ♂ ♀'\r\n};\r\n\r\nexport const symbolObj = [\r\n    {\r\n        label: '特殊符号',\r\n        type: 'SpecialSymbols',\r\n        content: []\r\n    },\r\n    {\r\n        label: '标点符号',\r\n        type: 'Punctuation',\r\n        content: []\r\n    },\r\n    {\r\n        label: '数字序号',\r\n        type: 'DigitSerialNumber',\r\n        content: []\r\n    },\r\n    {\r\n        label: '数字/单位',\r\n        type: 'NumberNnit',\r\n        content: []\r\n    },\r\n    {\r\n        label: '希腊/拉丁',\r\n        type: 'GreeceLatin',\r\n        content: []\r\n    },\r\n    {\r\n        label: '拼音/注音',\r\n        type: 'PinyinBopomofo',\r\n        content: []\r\n    },\r\n    {\r\n        label: '中文字符',\r\n        type: 'ChineseCharacters',\r\n        content: []\r\n    },\r\n    {\r\n        label: '英文音标',\r\n        type: 'EnglishPhonogram',\r\n        content: []\r\n    },\r\n    {\r\n        label: '其他',\r\n        type: 'Other',\r\n        content: []\r\n    }\r\n];\r\n\r\nlet specialIcon: any = {\r\n    '': 'https://test-1254455861.piccd.myqcloud.com/data/calculate_features/20200416/360c8e3b7c255a45303300db63aacb5a.png?imageView2/3/h/16',\r\n    '': 'https://test-1254455861.piccd.myqcloud.com/data/calculate_features/20200416/f022230b0096a406297ef86fac3eb9ad.png?imageView2/3/h/16',\r\n    'ㄧ': 'https://test-1254455861.piccd.myqcloud.com/data/calculate_features/20200415/53333b8d9a262d2852e2d96c5eb0ce4a.png?imageView2/3/h/16',\r\n    '龵': 'https://test-1254455861.piccd.myqcloud.com/data/calculate_features/20200416/c2d91f7d49c400dcb0cf8d237fe21d9c.png?imageView2/3/w/15'\r\n};\r\n\r\n\r\nexport function symbolList() {\r\n\r\n\r\n    let obj = _.map(symbolObj, (item: any) => {\r\n\r\n        // let contentItem = Array.from(iconLst[item.type]);\r\n        let contentItem = iconLst[item.type].split(' ');\r\n\r\n        item.content = _.map(contentItem, (item) => {\r\n\r\n            let str0 = '① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩';\r\n            let str = '⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳';\r\n\r\n            let str2 = 'ㄧ龵';\r\n\r\n            let str3 = 'mol';\r\n\r\n            // if (str0.indexOf(item) > -1) {\r\n            //     return {\r\n            //         text: item,\r\n            //         fontSize: '16'\r\n            //     };\r\n            // }\r\n            if (str.indexOf(item) > -1) {\r\n                return {\r\n                    text: item,\r\n                    fontSize: '17'\r\n                };\r\n            }\r\n\r\n            if (str3.indexOf(item) > -1) {\r\n                return {\r\n                    text: item,\r\n                    fontSize: '10'\r\n                };\r\n            }\r\n\r\n            if (str2.indexOf(item) > -1) {\r\n\r\n                return {\r\n                    mediaType: 'IMAGE',\r\n                    character: specialIcon[item],\r\n                    children: [{ text: '', mark: [] }],\r\n                    type: 'mention'\r\n                };\r\n            }\r\n\r\n\r\n            return {\r\n                text: item,\r\n                type: 'string'\r\n            };\r\n        });\r\n\r\n        return item;\r\n\r\n    });\r\n\r\n    return obj;\r\n}\r\n\r\n\r\nexport const colorList = [\r\n    '000000', '525252', '969696', 'd9d9d9', 'EDEDED',\r\n    'b71c1c', 'd32f2f', 'f44336', 'e57373', 'ffcdd2',\r\n    '880e4f', 'c21856', 'e91e63', 'f06292', 'f8ddb0',\r\n    '4a148c', '7b1fa2', '9c27b0', 'ba68c8', 'e1bee7',\r\n    '311b92', '512da8', '673ab7', '9575cd', 'd1c4e9',\r\n    '1a237e', '303f9f', '3f51b5', '7986cb', 'c5cae9',\r\n    '0d47a1', '1976d2', '2196f3', '64b5f6', 'bbdefb',\r\n    '015796', '0288d1', '03a9f4', '4fc3f7', 'b3e5fc',\r\n    '006064', '0097a7', '00bcd4', '4dd0e1', 'b2ebf2',\r\n    '004d40', '00796b', '009688', '4db6ac', 'b2dfdb',\r\n    '194D33', '388e3c', '4caf50', '81c784', 'c8e6c9',\r\n    '33691e', '689f38', '8bc34a', 'aed581', 'dcedc8',\r\n    '827717', 'afb42b', 'cddc39', 'dce775', 'f0f4c3',\r\n    'f57f17', 'fbc02d', 'ffeb3b', 'fff176', 'fff9c4',\r\n    'ff6f00', 'ffa000', 'ffc107', 'ffd54f', 'ffecb3',\r\n    'e65100', 'f57c00', 'ff9800', 'ffb74d', 'ffe0b2',\r\n    'bf360c', 'e64a19', 'ff5722', 'ff8a65', 'ffccbc',\r\n    '3e2723', '5d4037', '795548', 'a1887f', 'd7ccc8',\r\n    '263238', '455a64', '607d8b', '90a4ae', 'cfd8dc',\r\n\r\n];\r\n\r\nexport const fontSizeList = [\r\n    {\r\n        content: '五号',\r\n        value: '21'\r\n    },\r\n    {\r\n        content: '小四',\r\n        value: '24'\r\n    },\r\n    {\r\n        content: '四号',\r\n        value: '28'\r\n    },\r\n    {\r\n        content: '小三',\r\n        value: '30'\r\n    },\r\n    {\r\n        content: '三号',\r\n        value: '32'\r\n    },\r\n    {\r\n        content: '小二',\r\n        value: '36'\r\n    },\r\n    {\r\n        content: '二号',\r\n        value: '44'\r\n    },\r\n    {\r\n        content: '小一',\r\n        value: '48'\r\n    },\r\n    {\r\n        content: '一号',\r\n        value: '52'\r\n    },\r\n    {\r\n        content: '小初',\r\n        value: '72'\r\n    },\r\n    {\r\n        content: '初号',\r\n        value: '84'\r\n    },\r\n];\r\n\r\nexport const fontSizeObj = {\r\n    '21': '五号',\r\n    '24': '小四',\r\n    '28': '四号',\r\n    '30': '小三',\r\n    '32': '三号',\r\n    '36': '小二',\r\n    '44': '二号',\r\n    '48': '小一',\r\n    '52': '一号',\r\n    '72': '小初',\r\n    '84': '初号',\r\n};\r\n\r\nexport const fontList = [\r\n    {\r\n        content: '宋体',\r\n        value: '宋体'\r\n    },\r\n    {\r\n        content: '楷体',\r\n        value: '楷体'\r\n    },\r\n    {\r\n        content: 'Times New Roman',\r\n        value: 'Times New Roman'\r\n    },\r\n];\r\n\r\nexport const fontObj = {\r\n    '宋体': '宋体',\r\n    '楷体': '楷体',\r\n    'Times New Roman': 'Times New Roman',\r\n};\r\n\r\n\r\nexport let questionObj = () => {\r\n\r\n    let data = {\r\n        question: {\r\n            questionType: '',\r\n            stem: [\r\n                {\r\n                    fragments: [\r\n                        { content: '', mediaType: 'TEXT', styles: [] },\r\n                    ]\r\n                },\r\n            ],\r\n            answer: [\r\n                {\r\n                    fragments: [\r\n                        { content: '', mediaType: 'TEXT', styles: [] },\r\n                    ]\r\n                },\r\n            ],\r\n            explanation: [\r\n                { fragments: [{ content: '', mediaType: 'TEXT', styles: [] }] },\r\n            ],\r\n            option: [\r\n                { fragments: [{ content: '', mediaType: 'TEXT', styles: ['isAdd'] }] },\r\n                { fragments: [{ content: '', mediaType: 'TEXT', styles: ['isAdd'] }] },\r\n                { fragments: [{ content: '', mediaType: 'TEXT', styles: ['isAdd'] }] },\r\n                { fragments: [{ content: '', mediaType: 'TEXT', styles: ['isAdd'] }] },\r\n            ]\r\n        },\r\n\r\n\r\n    };\r\n    return _.cloneDeep(data);\r\n\r\n};"]}]}